import{a as W,b as Ie,c as jg,d as M,e as gD,f as $l,g as mD,h as yD,i as vD,j as $g,k as ql,l as bc,m as qg,n as Hl,o as zl,p as _D,q as Hg,r as be,s as Fn,t as Jn,u as Gl,v as so,w as Wl,x as wD,y as Rn,z as Ot}from"./chunk-RNB5MT6I.js";var ED=null;var zg=1,Gg=Symbol("SIGNAL");function Gt(t){let e=ED;return ED=t,e}var ID={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function AP(t){if(!(Qg(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===zg)){if(!t.producerMustRecompute(t)&&!Wg(t)){t.dirty=!1,t.lastCleanEpoch=zg;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=zg}}function DD(t){return t&&(t.nextProducerIndex=0),Gt(t)}function CD(t,e){if(Gt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Qg(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Kg(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Wg(t){Kl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(AP(n),r!==n.version))return!0}return!1}function bD(t){if(Kl(t),Qg(t))for(let e=0;e<t.producerNode.length;e++)Kg(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Kg(t,e){if(SP(t),Kl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Kg(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Kl(i),i.producerIndexOfThis[r]=e}}function Qg(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Kl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function SP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function xP(){throw new Error}var MP=xP;function TD(t){MP=t}function ae(t){return typeof t=="function"}function ps(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ql=ps(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ao(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var et=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof Ql?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AD(o)}catch(s){e=e??[],s instanceof Ql?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ql(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ao(n,e)}remove(e){let{_finalizers:n}=this;n&&ao(n,e),e instanceof t&&e._removeParent(this)}};et.EMPTY=(()=>{let t=new et;return t.closed=!0,t})();var Yg=et.EMPTY;function Yl(t){return t instanceof et||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function AD(t){ae(t)?t():t.unsubscribe()}var Pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gs={setTimeout(t,e,...n){let{delegate:r}=gs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=gs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Xl(t){gs.setTimeout(()=>{let{onUnhandledError:e}=Pn;if(e)e(t);else throw t})}function Tc(){}var SD=Xg("C",void 0,void 0);function xD(t){return Xg("E",void 0,t)}function MD(t){return Xg("N",t,void 0)}function Xg(t,e,n){return{kind:t,value:e,error:n}}var co=null;function ms(t){if(Pn.useDeprecatedSynchronousErrorHandling){let e=!co;if(e&&(co={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=co;if(co=null,n)throw r}}else t()}function FD(t){Pn.useDeprecatedSynchronousErrorHandling&&co&&(co.errorThrown=!0,co.error=t)}var uo=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yl(e)&&e.add(this)):this.destination=PP}static create(e,n,r){return new Mr(e,n,r)}next(e){this.isStopped?Zg(MD(e),this):this._next(e)}error(e){this.isStopped?Zg(xD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zg(SD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FP=Function.prototype.bind;function Jg(t,e){return FP.call(t,e)}var em=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Jl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Jl(r)}else Jl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jl(n)}}},Mr=class extends uo{constructor(e,n,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Pn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Jg(e.next,o),error:e.error&&Jg(e.error,o),complete:e.complete&&Jg(e.complete,o)}):i=e}this.destination=new em(i)}};function Jl(t){Pn.useDeprecatedSynchronousErrorHandling?FD(t):Xl(t)}function RP(t){throw t}function Zg(t,e){let{onStoppedNotification:n}=Pn;n&&gs.setTimeout(()=>n(t,e))}var PP={closed:!0,next:Tc,error:RP,complete:Tc};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wt(t){return t}function tm(...t){return nm(t)}function nm(t){return t.length===0?Wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=UP(n)?n:new Mr(n,r,i);return ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=RD(r),new r((i,o)=>{let s=new Mr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ys](){return this}pipe(...n){return nm(n)(this)}toPromise(n){return n=RD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function RD(t){var e;return(e=t??Pn.Promise)!==null&&e!==void 0?e:Promise}function NP(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}function UP(t){return t&&t instanceof uo||NP(t)&&Yl(t)}function rm(t){return ae(t?.lift)}function ue(t){return e=>{if(rm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new im(t,e,n,r,i)}var im=class extends uo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vs(){return ue((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _s=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,rm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return vs()(this)}};var PD=ps(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PD}next(n){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yg:(this.currentObservers=null,o.push(n),new et(()=>{this.currentObservers=null,ao(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new Zl(e,n),t})(),Zl=class extends at{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yg}};var At=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ac={now(){return(Ac.delegate||Date).now()},delegate:void 0};var ed=class extends at{constructor(e=1/0,n=1/0,r=Ac){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var td=class extends et{constructor(e,n){super()}schedule(e,n=0){return this}};var Sc={setInterval(t,e,...n){let{delegate:r}=Sc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Sc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ws=class extends td{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Sc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Sc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ao(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Es=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Es.now=Ac.now;var Is=class extends Es{constructor(e,n=Es.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var lo=new Is(ws);var nd=class extends ws{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var rd=class extends Is{};var om=new rd(nd);var on=new he(t=>t.complete());function ND(t){return t&&ae(t.schedule)}function sm(t){return t[t.length-1]}function id(t){return ae(sm(t))?t.pop():void 0}function Zn(t){return ND(sm(t))?t.pop():void 0}function UD(t,e){return typeof sm(t)=="number"?t.pop():e}var od=t=>t&&typeof t.length=="number"&&typeof t!="function";function sd(t){return ae(t?.then)}function ad(t){return ae(t[ys])}function cd(t){return Symbol.asyncIterator&&ae(t?.[Symbol.asyncIterator])}function ud(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ld=kP();function dd(t){return ae(t?.[ld])}function hd(t){return mD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield $l(n.read());if(i)return yield $l(void 0);yield yield $l(r)}}finally{n.releaseLock()}})}function fd(t){return ae(t?.getReader)}function Be(t){if(t instanceof he)return t;if(t!=null){if(ad(t))return OP(t);if(od(t))return VP(t);if(sd(t))return LP(t);if(cd(t))return kD(t);if(dd(t))return BP(t);if(fd(t))return jP(t)}throw ud(t)}function OP(t){return new he(e=>{let n=t[ys]();if(ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VP(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LP(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Xl)})}function BP(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kD(t){return new he(e=>{$P(t,e).catch(n=>e.error(n))})}function jP(t){return kD(hd(t))}function $P(t,e){var n,r,i,o;return gD(this,void 0,void 0,function*(){try{for(n=yD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function sn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function dn(t,e=0){return ue((n,r)=>{n.subscribe(le(r,i=>sn(r,t,()=>r.next(i),e),()=>sn(r,t,()=>r.complete(),e),i=>sn(r,t,()=>r.error(i),e)))})}function Nn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function OD(t,e){return Be(t).pipe(Nn(e),dn(e))}function VD(t,e){return Be(t).pipe(Nn(e),dn(e))}function LD(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function BD(t,e){return new he(n=>{let r;return sn(n,e,()=>{r=t[ld](),sn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function pd(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{sn(n,e,()=>{let r=t[Symbol.asyncIterator]();sn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function jD(t,e){return pd(hd(t),e)}function $D(t,e){if(t!=null){if(ad(t))return OD(t,e);if(od(t))return LD(t,e);if(sd(t))return VD(t,e);if(cd(t))return pd(t,e);if(dd(t))return BD(t,e);if(fd(t))return jD(t,e)}throw ud(t)}function pe(t,e){return e?$D(t,e):Be(t)}function re(...t){let e=Zn(t);return pe(t,e)}function Ds(t,e){let n=ae(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function am(t){return!!t&&(t instanceof he||ae(t.lift)&&ae(t.subscribe))}var Fr=ps(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){return ue((n,r)=>{let i=0;n.subscribe(le(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:qP}=Array;function HP(t,e){return qP(e)?t(...e):t(e)}function gd(t){return ee(e=>HP(t,e))}var{isArray:zP}=Array,{getPrototypeOf:GP,prototype:WP,keys:KP}=Object;function md(t){if(t.length===1){let e=t[0];if(zP(e))return{args:e,keys:null};if(QP(e)){let n=KP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function QP(t){return t&&typeof t=="object"&&GP(t)===WP}function yd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xc(...t){let e=Zn(t),n=id(t),{args:r,keys:i}=md(t);if(r.length===0)return pe([],e);let o=new he(YP(r,e,i?s=>yd(i,s):Wt));return n?o.pipe(gd(n)):o}function YP(t,e,n=Wt){return r=>{qD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)qD(e,()=>{let l=pe(t[c],e),d=!1;l.subscribe(le(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qD(t,e,n){t?sn(n,t,e):e()}function HD(t,e,n,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=A=>l<r?I(A):c.push(A),I=A=>{o&&e.next(A),l++;let C=!1;Be(n(A,d++)).subscribe(le(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let P=c.shift();s?sn(e,s,()=>I(P)):I(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(le(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ct(t,e,n=1/0){return ae(e)?ct((r,i)=>ee((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>HD(r,i,t,n)))}function ci(t=1/0){return ct(Wt,t)}function zD(){return ci(1)}function Cs(...t){return zD()(pe(t,Zn(t)))}function vd(t){return new he(e=>{Be(t()).subscribe(e)})}function cm(...t){let e=id(t),{args:n,keys:r}=md(t),i=new he(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;Be(n[d]).subscribe(le(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?yd(r,a):a),o.complete())}))}});return e?i.pipe(gd(e)):i}function um(...t){let e=Zn(t),n=UD(t,1/0),r=t;return r.length?r.length===1?Be(r[0]):ci(n)(pe(r,e)):on}function _t(t,e){return ue((n,r)=>{let i=0;n.subscribe(le(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ui(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(le(n,void 0,void 0,s=>{o=Be(t(s,ui(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function GD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(le(s,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Rr(t,e){return ae(e)?ct(t,e,1):ct(t,1)}function lm(t,e=lo){return ue((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}n.subscribe(le(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function li(t){return ue((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pr(t){return t<=0?()=>on:ue((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function dm(t){return ee(()=>t)}function hm(t,e=Wt){return t=t??XP,ue((n,r)=>{let i,o=!0;n.subscribe(le(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function XP(t,e){return t===e}function _d(t=JP){return ue((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function JP(){return new Fr}function er(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,o)=>t(i,o,r)):Wt,Pr(1),n?li(e):_d(()=>new Fr))}function bs(t){return t<=0?()=>on:ue((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function fm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,o)=>t(i,o,r)):Wt,bs(1),n?li(e):_d(()=>new Fr))}function Mc(){return ue((t,e)=>{let n,r=!1;t.subscribe(le(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function ho(t,e){return ue(GD(t,e,arguments.length>=2,!0))}function WD(t={}){let{connector:e=()=>new at,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,d=f=!1},I=()=>{let A=s;y(),A?.unsubscribe()};return ue((A,C)=>{l++,!f&&!d&&g();let P=c=c??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=pm(I,i))}),P.subscribe(C),!s&&l>0&&(s=new Mr({next:B=>P.next(B),error:B=>{f=!0,g(),a=pm(y,n,B),P.error(B)},complete:()=>{d=!0,g(),a=pm(y,r),P.complete()}}),Be(A).subscribe(s))})(o)}}function pm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Mr({next:()=>{r.unsubscribe(),t()}});return Be(e(...n)).subscribe(r)}function wd(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,WD({connector:()=>new ed(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function fo(...t){let e=Zn(t);return ue((n,r)=>{(e?Cs(t,n,e):Cs(t,n)).subscribe(r)})}function Re(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(le(r,c=>{i?.unsubscribe();let l=0,d=o++;Be(t(c,d)).subscribe(i=le(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ed(t,e){return ae(e)?Re(()=>t,e):Re(()=>t)}function gm(t){return ue((e,n)=>{Be(t).subscribe(le(n,()=>n.complete(),Tc)),!n.closed&&e.subscribe(n)})}function Qe(t,e,n){let r=ae(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wt}var PC="https://g.co/ng/security#xss",te=class extends Error{constructor(e,n){super(th(e,n)),this.code=e}};function th(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var Rm=class extends at{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=mm(o),i&&(i=mm(i)),s&&(s=mm(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof et&&e.add(a),a}};function mm(t){return e=>{setTimeout(t,void 0,e)}}var ut=Rm;var ge=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ge||{});function Qt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Qt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function KD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var NC=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(NC||{}),rr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(rr||{});function qc(t){return{toString:t}.toString()}var wt=globalThis;var Rs={},wn=[];function Pe(t){for(let e in t)if(t[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function ZP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var eN=Pe({\u0275cmp:Pe}),tN=Pe({\u0275dir:Pe}),nN=Pe({\u0275pipe:Pe}),rN=Pe({\u0275mod:Pe}),Rd=Pe({\u0275fac:Pe}),Fc=Pe({__NG_ELEMENT_ID__:Pe}),QD=Pe({__NG_ENV_ID__:Pe}),Vt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Vt||{});function UC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Pm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];iN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function kC(t){return t===3||t===4||t===6}function iN(t){return t.charCodeAt(0)===64}function Pc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?YD(t,n,i,null,e[++r]):YD(t,n,i,null,null))}}return t}function YD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var OC="ng-template";function oN(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&UC(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function VC(t){return t.type===4&&t.value!==OC}function sN(t,e,n){let r=t.type===4&&!n?OC:t.value;return e===r}function aN(t,e,n){let r=4,i=t.attrs||[],o=lN(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Un(r)&&!Un(c))return!1;if(s&&Un(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!sN(t,c,n)||c===""&&e.length===1){if(Un(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!oN(t.attrs,l,n)){if(Un(r))return!1;s=!0}continue}let d=r&8?"class":c,f=cN(d,i,VC(t),n);if(f===-1){if(Un(r))return!1;s=!0;continue}if(l!==""){let g;f>o?g="":g=i[f+1].toLowerCase();let y=r&8?g:null;if(y&&UC(y,l,0)!==-1||r&2&&l!==g){if(Un(r))return!1;s=!0}}}}return Un(r)||s}function Un(t){return(t&1)===0}function cN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return dN(e,t)}function uN(t,e,n=!1){for(let r=0;r<e.length;r++)if(aN(t,e[r],n))return!0;return!1}function lN(t){for(let e=0;e<t.length;e++){let n=t[e];if(kC(n))return e}return t.length}function dN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function XD(t,e){return t?":not("+e.trim()+")":e}function hN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Un(s)&&(e+=XD(o,i),i=""),r=s,o=o||!Un(r);n++}return i!==""&&(e+=XD(o,i)),e}function fN(t){return t.map(hN).join(",")}function pN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Un(i))break;i=o}r++}return{attrs:e,classes:n}}function $e(t){return qc(()=>{let e=qC(t),n=Ie(W({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===NC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||rr.Emulated,styles:t.styles||wn,_:null,schemas:t.schemas||null,tView:null,id:""});HC(n);let r=t.dependencies;return n.directiveDefs=ZD(r,!1),n.pipeDefs=ZD(r,!0),n.id=yN(n),n})}function gN(t){return fi(t)||LC(t)}function mN(t){return t!==null}function Ye(t){return qc(()=>({type:t.type,bootstrap:t.bootstrap||wn,declarations:t.declarations||wn,imports:t.imports||wn,exports:t.exports||wn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function JD(t,e){if(t==null)return Rs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Vt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Vt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function St(t){return qc(()=>{let e=qC(t);return HC(e),e})}function nh(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function fi(t){return t[eN]||null}function LC(t){return t[tN]||null}function BC(t){return t[nN]||null}function jC(t){let e=fi(t)||LC(t)||BC(t);return e!==null?e.standalone:!1}function $C(t,e){let n=t[rN]||null;if(!n&&e===!0)throw new Error(`Type ${Qt(t)} does not have '\u0275mod' property.`);return n}function qC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Rs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||wn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JD(t.inputs,e),outputs:JD(t.outputs),debugInfo:null}}function HC(t){t.features?.forEach(e=>e(t))}function ZD(t,e){if(!t)return null;let n=e?BC:gN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(mN)}function yN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Or=0,ve=1,se=2,Lt=3,kn=4,Ln=5,Pd=6,Nc=7,On=8,Ps=9,Nr=10,lt=11,Uc=12,eC=13,Bs=14,ir=15,rh=16,Ts=17,Ns=18,ih=19,zC=20,hi=21,ym=22,yo=23,Vn=25,GC=1;var vo=7,Nd=8,Ud=9,En=10,_y=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(_y||{});function go(t){return Array.isArray(t)&&typeof t[GC]=="object"}function Vr(t){return Array.isArray(t)&&t[GC]===!0}function WC(t){return(t.flags&4)!==0}function oh(t){return t.componentOffset>-1}function wy(t){return(t.flags&1)===1}function pi(t){return!!t.template}function vN(t){return(t[se]&512)!==0}var _N="svg",wN="math",EN=!1;function IN(){return EN}function or(t){for(;Array.isArray(t);)t=t[Or];return t}function KC(t,e){return or(e[t])}function In(t,e){return or(e[t.index])}function QC(t,e){return t.data[e]}function YC(t,e){return t[e]}function yi(t,e){let n=e[t];return go(n)?n:n[Or]}function Ey(t){return(t[se]&128)===128}function DN(t){return Vr(t[Lt])}function kd(t,e){return e==null?null:t[e]}function XC(t){t[Ts]=0}function CN(t){t[se]&1024||(t[se]|=1024,Ey(t)&&kc(t))}function bN(t,e){for(;t>0;)e=e[Bs],t--;return e}function Iy(t){return!!(t[se]&9216||t[yo]?.dirty)}function Nm(t){Iy(t)?kc(t):t[se]&64&&(IN()?(t[se]|=1024,kc(t)):t[Nr].changeDetectionScheduler?.notify())}function kc(t){t[Nr].changeDetectionScheduler?.notify();let e=Oc(t);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Ey(e)));)e=Oc(e)}function JC(t,e){if((t[se]&256)===256)throw new te(911,!1);t[hi]===null&&(t[hi]=[]),t[hi].push(e)}function TN(t,e){if(t[hi]===null)return;let n=t[hi].indexOf(e);n!==-1&&t[hi].splice(n,1)}function Oc(t){let e=t[Lt];return Vr(e)?e[Lt]:e}var ye={lFrame:ob(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function AN(){return ye.lFrame.elementDepthCount}function SN(){ye.lFrame.elementDepthCount++}function xN(){ye.lFrame.elementDepthCount--}function ZC(){return ye.bindingsEnabled}function MN(){return ye.skipHydrationRootTNode!==null}function FN(t){return ye.skipHydrationRootTNode===t}function RN(){ye.skipHydrationRootTNode=null}function Se(){return ye.lFrame.lView}function Xt(){return ye.lFrame.tView}function Hc(t){return ye.lFrame.contextLView=t,t[On]}function zc(t){return ye.lFrame.contextLView=null,t}function cn(){let t=eb();for(;t!==null&&t.type===64;)t=t.parent;return t}function eb(){return ye.lFrame.currentTNode}function PN(){let t=ye.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Gc(t,e){let n=ye.lFrame;n.currentTNode=t,n.isParent=e}function tb(){return ye.lFrame.isParent}function NN(){ye.lFrame.isParent=!1}function Dy(){let t=ye.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function UN(t){return ye.lFrame.bindingIndex=t}function sh(){return ye.lFrame.bindingIndex++}function kN(t){let e=ye.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ON(){return ye.lFrame.inI18n}function VN(t,e){let n=ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,Um(e)}function LN(){return ye.lFrame.currentDirectiveIndex}function Um(t){ye.lFrame.currentDirectiveIndex=t}function BN(t){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function nb(t){ye.lFrame.currentQueryIndex=t}function jN(t){let e=t[ve];return e.type===2?e.declTNode:e.type===1?t[Ln]:null}function rb(t,e,n){if(n&ge.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ge.Host);)if(i=jN(o),i===null||(o=o[Bs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ye.lFrame=ib();return r.currentTNode=e,r.lView=t,!0}function Cy(t){let e=ib(),n=t[ve];ye.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ib(){let t=ye.lFrame,e=t===null?null:t.child;return e===null?ob(t):e}function ob(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sb(){let t=ye.lFrame;return ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ab=sb;function by(){let t=sb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $N(t){return(ye.lFrame.contextLView=bN(t,ye.lFrame.contextLView))[On]}function js(){return ye.lFrame.selectedIndex}function _o(t){ye.lFrame.selectedIndex=t}function ah(){let t=ye.lFrame;return QC(t.tView,t.selectedIndex)}function qN(){return ye.lFrame.currentNamespace}var cb=!0;function Ty(){return cb}function Ay(t){cb=t}function HN(){return ch(cn(),Se())}function ch(t,e){return new vi(In(t,e))}var vi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=HN;let t=e;return t})();function Sy(t,e){t.forEach(n=>Array.isArray(n)?Sy(n,e):e(n))}function ub(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Od(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function GN(t,e,n){let r=Wc(t,e);return r>=0?t[r|1]=n:(r=~r,zN(t,r,e,n)),r}function vm(t,e){let n=Wc(t,e);if(n>=0)return t[n|1]}function Wc(t,e){return WN(t,e,1)}function WN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}function lb(t){return(t.flags&128)===128}var km;function db(t){km=t}function KN(){if(km!==void 0)return km;if(typeof document<"u")return document;throw new te(210,!1)}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xe(t){return{providers:t.providers||[],imports:t.imports||[]}}function uh(t){return tC(t,fb)||tC(t,pb)}function hb(t){return uh(t)!==null}function tC(t,e){return t.hasOwnProperty(e)?t[e]:null}function QN(t){let e=t&&(t[fb]||t[pb]);return e||null}function nC(t){return t&&(t.hasOwnProperty(rC)||t.hasOwnProperty(YN))?t[rC]:null}var fb=Pe({\u0275prov:Pe}),rC=Pe({\u0275inj:Pe}),pb=Pe({ngInjectableDef:Pe}),YN=Pe({ngInjectorDef:Pe}),q=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},lh=new q("",{providedIn:"root",factory:()=>XN}),XN="ng",xy=new q(""),Ct=new q("",{providedIn:"platform",factory:()=>"unknown"});var My=new q("",{providedIn:"root",factory:()=>KN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var JN=Pe({__forward_ref__:Pe});function bo(t){return t.__forward_ref__=bo,t.toString=function(){return Qt(this())},t}function Kt(t){return gb(t)?t():t}function gb(t){return typeof t=="function"&&t.hasOwnProperty(JN)&&t.__forward_ref__===bo}function mb(t){return t&&!!t.\u0275providers}function dh(t){return typeof t=="string"?t:t==null?"":String(t)}function ZN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():dh(t)}function e2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new te(-200,t)}function Fy(t,e){throw new te(-201,!1)}var Om;function yb(){return Om}function an(t){let e=Om;return Om=t,e}function vb(t,e,n){let r=uh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ge.Optional)return null;if(e!==void 0)return e;Fy(t,"Injector")}var t2={},Vc=t2,Vm="__NG_DI_FLAG__",Vd="ngTempTokenPath",n2="ngTokenPath",r2=/\n/gm,i2="\u0275",iC="__source",Ms;function o2(){return Ms}function di(t){let e=Ms;return Ms=t,e}function s2(t,e=ge.Default){if(Ms===void 0)throw new te(-203,!1);return Ms===null?vb(t,void 0,e):Ms.get(t,e&ge.Optional?null:void 0,e)}function N(t,e=ge.Default){return(yb()||s2)(Kt(t),e)}function H(t,e=ge.Default){return N(t,hh(e))}function hh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Lm(t){let e=[];for(let n=0;n<t.length;n++){let r=Kt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],c=a2(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(N(i,o))}else e.push(N(r))}return e}function _b(t,e){return t[Vm]=e,t.prototype[Vm]=e,t}function a2(t){return t[Vm]}function c2(t,e,n,r){let i=t[Vd];throw e[iC]&&i.unshift(e[iC]),t.message=u2(`
`+t.message,i,n,r),t[n2]=i,t[Vd]=null,t}function u2(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==i2?t.slice(2):t;let i=Qt(e);if(Array.isArray(e))i=e.map(Qt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Qt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(r2,`
  `)}`}var l2="h",d2="b";var h2=()=>null;function Ry(t,e,n=!1){return h2(t,e,n)}var Id="__parameters__";function f2(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function wb(t,e,n){return qc(()=>{let r=f2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Id)?c[Id]:Object.defineProperty(c,Id,{value:[]})[Id];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var $s=_b(wb("Optional"),8);var Py=_b(wb("SkipSelf"),4);function wo(t,e){let n=t.hasOwnProperty(Rd);return n?t[Rd]:null}var Us=new q(""),Eb=new q("",-1),Ib=new q(""),Ld=class{get(e,n=Vc){if(n===Vc){let r=new Error(`NullInjectorError: No provider for ${Qt(e)}!`);throw r.name="NullInjectorError",r}return n}};function fh(t){return{\u0275providers:t}}function p2(...t){return{\u0275providers:Db(!0,t),\u0275fromNgModule:!0}}function Db(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Sy(e,s=>{let a=s;Bm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Cb(i,o),n}function Cb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ny(i,o=>{e(o,r)})}}function Bm(t,e,n,r){if(t=Kt(t),!t)return!1;let i=null,o=nC(t),s=!o&&fi(t);if(!o&&!s){let c=t.ngModule;if(o=nC(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Bm(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Sy(o.imports,d=>{Bm(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Cb(l,e)}if(!a){let l=wo(i)||(()=>new i);e({provide:i,useFactory:l,deps:wn},i),e({provide:Ib,useValue:i,multi:!0},i),e({provide:Us,useValue:()=>N(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Ny(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ny(t,e){for(let n of t)mb(n)&&(n=n.\u0275providers),Array.isArray(n)?Ny(n,e):e(n)}var g2=Pe({provide:String,useValue:Pe});function bb(t){return t!==null&&typeof t=="object"&&g2 in t}function m2(t){return!!(t&&t.useExisting)}function y2(t){return!!(t&&t.useFactory)}function ks(t){return typeof t=="function"}function v2(t){return!!t.useClass}var ph=new q(""),Ad={},_2={},_m;function Uy(){return _m===void 0&&(_m=new Ld),_m}var Yt=class{},Lc=class extends Yt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$m(e,s=>this.processProvider(s)),this.records.set(Eb,As(void 0,this)),i.has("environment")&&this.records.set(Yt,As(void 0,this));let o=this.records.get(ph);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ib,wn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=di(this),r=an(void 0),i;try{return e()}finally{di(n),an(r)}}get(e,n=Vc,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(QD))return e[QD](this);r=hh(r);let i,o=di(this),s=an(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=C2(e)&&uh(e);l&&this.injectableDefInScope(l)?c=As(jm(e),Ad):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?Uy():this.parent;return n=r&ge.Optional&&n===Vc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Vd]=a[Vd]||[]).unshift(Qt(e)),o)throw a;return c2(a,e,"R3InjectorError",this.source)}else throw a}finally{an(s),di(o)}}resolveInjectorInitializers(){let e=di(this),n=an(void 0),r;try{let i=this.get(Us,wn,ge.Self);for(let o of i)o()}finally{di(e),an(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Qt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new te(205,!1)}processProvider(e){e=Kt(e);let n=ks(e)?e:Kt(e&&e.provide),r=E2(e);if(!ks(e)&&e.multi===!0){let i=this.records.get(n);i||(i=As(void 0,Ad,!0),i.factory=()=>Lm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Ad&&(n.value=_2,n.value=n.factory()),typeof n.value=="object"&&n.value&&D2(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Kt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function jm(t){let e=uh(t),n=e!==null?e.factory:wo(t);if(n!==null)return n;if(t instanceof q)throw new te(204,!1);if(t instanceof Function)return w2(t);throw new te(204,!1)}function w2(t){if(t.length>0)throw new te(204,!1);let n=QN(t);return n!==null?()=>n.factory(t):()=>new t}function E2(t){if(bb(t))return As(void 0,t.useValue);{let e=Tb(t);return As(e,Ad)}}function Tb(t,e,n){let r;if(ks(t)){let i=Kt(t);return wo(i)||jm(i)}else if(bb(t))r=()=>Kt(t.useValue);else if(y2(t))r=()=>t.useFactory(...Lm(t.deps||[]));else if(m2(t))r=()=>N(Kt(t.useExisting));else{let i=Kt(t&&(t.useClass||t.provide));if(I2(t))r=()=>new i(...Lm(t.deps));else return wo(i)||jm(i)}return r}function As(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function I2(t){return!!t.deps}function D2(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function C2(t){return typeof t=="function"||typeof t=="object"&&t instanceof q}function $m(t,e){for(let n of t)Array.isArray(n)?$m(n,e):n&&mb(n)?$m(n.\u0275providers,e):e(n)}function ar(t,e){t instanceof Lc&&t.assertNotDestroyed();let n,r=di(t),i=an(void 0);try{return e()}finally{di(r),an(i)}}function b2(t){if(!yb()&&!o2())throw new te(-203,!1)}function T2(t){let e=wt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function A2(t){return typeof t=="function"}var qm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ab(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function _i(){return Sb}function Sb(t){return t.type.prototype.ngOnChanges&&(t.setInput=x2),S2}_i.ngInherit=!0;function S2(){let t=Mb(this),e=t?.current;if(e){let n=t.previous;if(n===Rs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function x2(t,e,n,r,i){let o=this.declaredInputs[r],s=Mb(t)||M2(t,{previous:Rs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new qm(l&&l.currentValue,n,c===Rs),Ab(t,e,i,n)}var xb="__ngSimpleChanges__";function Mb(t){return t[xb]||null}function M2(t,e){return t[xb]=e}var oC=null;var tr=function(t,e,n){oC?.(t,e,n)};function F2(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Sb(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ky(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Sd(t,e,n){Fb(t,e,3,n)}function xd(t,e,n,r){(t[se]&3)===n&&Fb(t,e,n,r)}function wm(t,e){let n=t[se];(n&3)===e&&(n&=16383,n+=1,t[se]=n)}function Fb(t,e,n,r){let i=r!==void 0?t[Ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ts]+=65536),(a<o||o==-1)&&(R2(t,n,e,c),t[Ts]=(t[Ts]&4294901760)+c+2),c++}function sC(t,e){tr(4,t,e);let n=Gt(null);try{e.call(t)}finally{Gt(n),tr(5,t,e)}}function R2(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[se]>>14<t[Ts]>>16&&(t[se]&3)===e&&(t[se]+=16384,sC(a,o)):sC(a,o)}var Fs=-1,Eo=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function P2(t){return t instanceof Eo}function N2(t){return(t.flags&8)!==0}function U2(t){return(t.flags&16)!==0}function Rb(t){return t!==Fs}function Bd(t){return t&32767}function k2(t){return t>>16}function jd(t,e){let n=k2(t),r=e;for(;n>0;)r=r[Bs],n--;return r}var Hm=!0;function $d(t){let e=Hm;return Hm=t,e}var O2=256,Pb=O2-1,Nb=5,V2=0,nr={};function L2(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fc)&&(r=n[Fc]),r==null&&(r=n[Fc]=V2++);let i=r&Pb,o=1<<i;e.data[t+(i>>Nb)]|=o}function qd(t,e){let n=Ub(t,e);if(n!==-1)return n;let r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,Em(r.data,t),Em(e,null),Em(r.blueprint,null));let i=Oy(t,e),o=t.injectorIndex;if(Rb(i)){let s=Bd(i),a=jd(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Em(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ub(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Oy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Bb(i),r===null)return Fs;if(n++,i=i[Bs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fs}function zm(t,e,n){L2(t,e,n)}function B2(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(kC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function kb(t,e,n){if(n&ge.Optional||t!==void 0)return t;Fy(e,"NodeInjector")}function Ob(t,e,n,r){if(n&ge.Optional&&r===void 0&&(r=null),!(n&(ge.Self|ge.Host))){let i=t[Ps],o=an(void 0);try{return i?i.get(e,r,n&ge.Optional):vb(e,r,n&ge.Optional)}finally{an(o)}}return kb(r,e,n)}function Vb(t,e,n,r=ge.Default,i){if(t!==null){if(e[se]&2048&&!(r&ge.Self)){let s=z2(t,e,n,r,nr);if(s!==nr)return s}let o=Lb(t,e,n,r,nr);if(o!==nr)return o}return Ob(e,n,r,i)}function Lb(t,e,n,r,i){let o=q2(n);if(typeof o=="function"){if(!rb(e,t,r))return r&ge.Host?kb(i,n,r):Ob(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))Fy(n);else return s}finally{ab()}}else if(typeof o=="number"){let s=null,a=Ub(t,e),c=Fs,l=r&ge.Host?e[ir][Ln]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?Oy(t,e):e[a+8],c===Fs||!cC(r,!1)?a=-1:(s=e[ve],a=Bd(c),e=jd(c,e)));a!==-1;){let d=e[ve];if(aC(o,a,d.data)){let f=j2(a,e,n,s,r,l);if(f!==nr)return f}c=e[a+8],c!==Fs&&cC(r,e[ve].data[a+8]===l)&&aC(o,a,e)?(s=d,a=Bd(c),e=jd(c,e)):a=-1}}return i}function j2(t,e,n,r,i,o){let s=e[ve],a=s.data[t+8],c=r==null?oh(a)&&Hm:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,d=$2(a,s,n,c,l);return d!==null?Os(e,s,d,a):nr}function $2(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let I=s[y];if(y<c&&n===I||y>=c&&I.type===n)return y}if(i){let y=s[c];if(y&&pi(y)&&y.type===n)return c}return null}function Os(t,e,n,r){let i=t[n],o=e.data;if(P2(i)){let s=i;s.resolving&&e2(ZN(o[n]));let a=$d(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?an(s.injectImpl):null,d=rb(t,r,ge.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&F2(n,o[n],e)}finally{l!==null&&an(l),$d(a),s.resolving=!1,ab()}}return i}function q2(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fc)?t[Fc]:void 0;return typeof e=="number"?e>=0?e&Pb:H2:e}function aC(t,e,n){let r=1<<t;return!!(n[e+(t>>Nb)]&r)}function cC(t,e){return!(t&ge.Self)&&!(t&ge.Host&&e)}var mo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Vb(this._tNode,this._lView,e,hh(r),n)}};function H2(){return new mo(cn(),Se())}function qs(t){return qc(()=>{let e=t.prototype.constructor,n=e[Rd]||Gm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Rd]||Gm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gm(t){return gb(t)?()=>{let e=Gm(Kt(t));return e&&e()}:wo(t)}function z2(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=Lb(o,s,n,r|ge.Self,nr);if(a!==nr)return a;let c=o.parent;if(!c){let l=s[zC];if(l){let d=l.get(n,nr,r);if(d!==nr)return d}c=Bb(s),s=s[Bs]}o=c}return i}function Bb(t){let e=t[ve],n=e.type;return n===2?e.declTNode:n===1?t[Ln]:null}function Vy(t){return B2(cn(),t)}function uC(t,e=null,n=null,r){let i=jb(t,e,n,r);return i.resolveInjectorInitializers(),i}function jb(t,e=null,n=null,r,i=new Set){let o=[n||wn,p2(t)];return r=r||(typeof t=="object"?void 0:Qt(t)),new Lc(o,e||Uy(),r||null,i)}var Bn=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return uC({name:""},i,r,"");{let o=r.name??"";return uC({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Vc,e.NULL=new Ld,e.\u0275prov=K({token:e,providedIn:"any",factory:()=>N(Eb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),G2="ngOriginalError";function Im(t){return t[G2]}var sr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Im(e);for(;n&&Im(n);)n=Im(n);return n||null}},$b=new q("",{providedIn:"root",factory:()=>H(sr).handleError.bind(void 0)});var qb=!1,W2=new q("",{providedIn:"root",factory:()=>qb});var Dd;function K2(){if(Dd===void 0&&(Dd=null,wt.trustedTypes))try{Dd=wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Dd}function lC(t){return K2()?.createScriptURL(t)||t}var Hd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PC})`}};function Kc(t){return t instanceof Hd?t.changingThisBreaksApplicationSecurity:t}function Ly(t,e){let n=Q2(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PC})`)}return n===e}function Q2(t){return t instanceof Hd&&t.getTypeName()||null}var Y2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hb(t){return t=String(t),t.match(Y2)?t:"unsafe:"+t}var gh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(gh||{});function Qc(t){let e=Gb();return e?e.sanitize(gh.URL,t)||"":Ly(t,"URL")?Kc(t):Hb(dh(t))}function X2(t){let e=Gb();if(e)return lC(e.sanitize(gh.RESOURCE_URL,t)||"");if(Ly(t,"ResourceURL"))return lC(Kc(t));throw new te(904,!1)}function J2(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?X2:Qc}function zb(t,e,n){return J2(e,n)(t)}function Gb(){let t=Se();return t&&t[Nr].sanitizer}var Wb=new Map,Z2=0;function eU(){return Z2++}function tU(t){Wb.set(t[ih],t)}function nU(t){Wb.delete(t[ih])}var dC="__ngContext__";function Io(t,e){go(e)?(t[dC]=e[ih],tU(e)):t[dC]=e}function Kb(t){return t instanceof Function?t():t}function rU(t){return(t??H(Bn)).get(Ct)==="browser"}var Ur=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ur||{}),iU;function By(t,e){return iU(t,e)}function Ss(t,e,n,r,i){if(r!=null){let o,s=!1;Vr(r)?o=r:go(r)&&(s=!0,r=r[Or]);let a=or(r);t===0&&n!==null?i==null?Zb(e,n,a):zd(e,n,a,i||null,!0):t===1&&n!==null?zd(e,n,a,i||null,!0):t===2?EU(e,a,s):t===3&&e.destroyNode(a),o!=null&&DU(e,t,o,n,i)}}function oU(t,e){return t.createText(e)}function sU(t,e,n){t.setValue(e,n)}function Qb(t,e,n){return t.createElement(e,n)}function aU(t,e){Yb(t,e),e[Or]=null,e[Ln]=null}function cU(t,e,n,r,i,o){r[Or]=i,r[Ln]=e,mh(t,r,n,1,i,o)}function Yb(t,e){mh(t,e,e[lt],2,null,null)}function uU(t){let e=t[Uc];if(!e)return Dm(t[ve],t);for(;e;){let n=null;if(go(e))n=e[Uc];else{let r=e[En];r&&(n=r)}if(!n){for(;e&&!e[kn]&&e!==t;)go(e)&&Dm(e[ve],e),e=e[Lt];e===null&&(e=t),go(e)&&Dm(e[ve],e),n=e&&e[kn]}e=n}}function lU(t,e,n,r){let i=En+r,o=n.length;r>0&&(n[i-1][kn]=e),r<o-En?(e[kn]=n[i],ub(n,En+r,e)):(n.push(e),e[kn]=null),e[Lt]=n;let s=e[rh];s!==null&&n!==s&&dU(s,e);let a=e[Ns];a!==null&&a.insertView(t),Nm(e),e[se]|=128}function dU(t,e){let n=t[Ud],i=e[Lt][Lt][ir];e[ir]!==i&&(t[se]|=_y.HasTransplantedViews),n===null?t[Ud]=[e]:n.push(e)}function Xb(t,e){let n=t[Ud],r=n.indexOf(e);n.splice(r,1)}function Wm(t,e){if(t.length<=En)return;let n=En+e,r=t[n];if(r){let i=r[rh];i!==null&&i!==t&&Xb(i,r),e>0&&(t[n-1][kn]=r[kn]);let o=Od(t,En+e);aU(r[ve],r);let s=o[Ns];s!==null&&s.detachView(o[ve]),r[Lt]=null,r[kn]=null,r[se]&=-129}return r}function Jb(t,e){if(!(e[se]&256)){let n=e[lt];n.destroyNode&&mh(t,e,n,3,null,null),uU(e)}}function Dm(t,e){if(!(e[se]&256)){e[se]&=-129,e[se]|=256,e[yo]&&bD(e[yo]),fU(t,e),hU(t,e),e[ve].type===1&&e[lt].destroy();let n=e[rh];if(n!==null&&Vr(e[Lt])){n!==e[Lt]&&Xb(n,e);let r=e[Ns];r!==null&&r.detachView(t)}nU(e)}}function hU(t,e){let n=t.cleanup,r=e[Nc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Nc]=null);let i=e[hi];if(i!==null){e[hi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function fU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Eo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];tr(4,a,c);try{c.call(a)}finally{tr(5,a,c)}}else{tr(4,i,o);try{o.call(i)}finally{tr(5,i,o)}}}}}function pU(t,e,n){return gU(t,e.parent,n)}function gU(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Or];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===rr.None||o===rr.Emulated)return null}return In(r,n)}}function zd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Zb(t,e,n){t.appendChild(e,n)}function hC(t,e,n,r,i){r!==null?zd(t,e,n,r,i):Zb(t,e,n)}function mU(t,e,n,r){t.removeChild(e,n,r)}function jy(t,e){return t.parentNode(e)}function yU(t,e){return t.nextSibling(e)}function vU(t,e,n){return wU(t,e,n)}function _U(t,e,n){return t.type&40?In(t,n):null}var wU=_U,fC;function $y(t,e,n,r){let i=pU(t,r,e),o=e[lt],s=r.parent||e[Ln],a=vU(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)hC(o,i,n[c],a,!1);else hC(o,i,n,a,!1);fC!==void 0&&fC(o,r,e,n,i)}function Md(t,e){if(e!==null){let n=e.type;if(n&3)return In(e,t);if(n&4)return Km(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Md(t,r);{let i=t[e.index];return Vr(i)?Km(-1,i):or(i)}}else{if(n&32)return By(e,t)()||or(t[e.index]);{let r=eT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oc(t[ir]);return Md(i,r)}else return Md(t,e.next)}}}return null}function eT(t,e){if(e!==null){let r=t[ir][Ln],i=e.projection;return r.projection[i]}return null}function Km(t,e){let n=En+t+1;if(n<e.length){let r=e[n],i=r[ve].firstChild;if(i!==null)return Md(r,i)}return e[vo]}function EU(t,e,n){let r=jy(t,e);r&&mU(t,r,e,n)}function qy(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Io(or(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)qy(t,e,n.child,r,i,o,!1),Ss(e,t,i,a,o);else if(c&32){let l=By(n,r),d;for(;d=l();)Ss(e,t,i,d,o);Ss(e,t,i,a,o)}else c&16?IU(t,e,r,n,i,o):Ss(e,t,i,a,o);n=s?n.projectionNext:n.next}}function mh(t,e,n,r,i,o){qy(n,r,t.firstChild,e,i,o,!1)}function IU(t,e,n,r,i,o){let s=n[ir],c=s[Ln].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ss(e,t,i,d,o)}else{let l=c,d=s[Lt];lb(r)&&(l.flags|=128),qy(t,e,l,d,i,o,!0)}}function DU(t,e,n,r,i){let o=n[vo],s=or(n);o!==s&&Ss(e,t,r,o,i);for(let a=En;a<n.length;a++){let c=n[a];mh(c[ve],c,t,e,r,o)}}function CU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ur.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ur.Important),t.setStyle(n,r,i,o))}}function bU(t,e,n){t.setAttribute(e,"style",n)}function tT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function nT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Pm(t,e,r),i!==null&&tT(t,e,i),o!==null&&bU(t,e,o)}var wi={};function oe(t=1){rT(Xt(),Se(),js()+t,!1)}function rT(t,e,n,r){if(!r)if((e[se]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Sd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&xd(e,o,0,n)}_o(n)}function J(t,e=ge.Default){let n=Se();if(n===null)return N(t,e);let r=cn();return Vb(r,n,Kt(t),e)}function iT(){let t="invalid";throw new Error(t)}function oT(t,e,n,r,i,o){let s=Gt(null);try{let a=null;i&Vt.SignalBased&&(a=e[r][Gg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Vt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Ab(e,a,r,o)}finally{Gt(s)}}function TU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)_o(~i);else{let o=i,s=n[++r],a=n[++r];VN(s,o);let c=e[o];a(2,c)}}}finally{_o(-1)}}function yh(t,e,n,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Or]=i,f[se]=r|4|128|8|64,(l!==null||t&&t[se]&2048)&&(f[se]|=2048),XC(f),f[Lt]=f[Bs]=t,f[On]=n,f[Nr]=s||t&&t[Nr],f[lt]=a||t&&t[lt],f[Ps]=c||t&&t[Ps]||null,f[Ln]=o,f[ih]=eU(),f[Pd]=d,f[zC]=l,f[ir]=e.type==2?t[ir]:f,f}function vh(t,e,n,r,i){let o=t.data[e];if(o===null)o=AU(t,e,n,r,i),ON()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=PN();o.injectorIndex=s===null?-1:s.injectorIndex}return Gc(o,!0),o}function AU(t,e,n,r,i){let o=eb(),s=tb(),a=s?o:o&&o.parent,c=t.data[e]=RU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function sT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function aT(t,e,n,r,i){let o=js(),s=r&2;try{_o(-1),s&&e.length>Vn&&rT(t,e,Vn,!1),tr(s?2:0,i),n(r,i)}finally{_o(o),tr(s?3:1,i)}}function cT(t,e,n){if(WC(e)){let r=Gt(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Gt(r)}}}function uT(t,e,n){ZC()&&(VU(t,e,n,In(n,e)),(n.flags&64)===64&&pT(t,e,n))}function lT(t,e,n=In){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function dT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Hy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hy(t,e,n,r,i,o,s,a,c,l,d){let f=Vn+r,g=f+i,y=SU(f,g),I=typeof l=="function"?l():l;return y[ve]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function SU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:wi);return n}function xU(t,e,n,r){let o=r.get(W2,qb)||n===rr.ShadowDom,s=t.selectRootElement(e,o);return MU(s),s}function MU(t){FU(t)}var FU=()=>null;function RU(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pC(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Vt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?gC(r,n,l,a,c):gC(r,n,l,a)}return r}function gC(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function PU(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=n?n.get(f):null,y=g?g.inputs:null,I=g?g.outputs:null;c=pC(0,f.inputs,d,c,y),l=pC(1,f.outputs,d,l,I);let A=c!==null&&s!==null&&!VC(e)?QU(c,d,s):null;a.push(A)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function NU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function zy(t,e,n,r,i,o,s,a){let c=In(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Gy(t,n,d,r,i),oh(e)&&UU(n,e.index)):e.type&3?(r=NU(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function UU(t,e){let n=yi(e,t);n[se]&16||(n[se]|=64)}function hT(t,e,n,r){if(ZC()){let i=r===null?null:{"":-1},o=BU(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&fT(t,e,n,s,i,a),i&&jU(n,r,i)}n.mergedAttrs=Pc(n.mergedAttrs,n.attrs)}function fT(t,e,n,r,i,o){for(let l=0;l<r.length;l++)zm(qd(n,e),t,r[l].type);qU(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=sT(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Pc(n.mergedAttrs,d.hostAttrs),HU(t,n,e,c,d),$U(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}PU(t,n,o)}function kU(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;OU(s)!=a&&s.push(a),s.push(n,r,o)}}function OU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function VU(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;oh(n)&&zU(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qd(n,e),Io(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Os(e,t,a,n);if(Io(l,e),s!==null&&KU(e,a-i,l,c,n,s),pi(c)){let d=yi(n.index,e);d[On]=Os(e,t,a,n)}}}function pT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=LN();try{_o(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Um(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&LU(c,l)}}finally{_o(-1),Um(s)}}function LU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function BU(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(uN(e,s.selectors,!1))if(r||(r=[]),pi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Qm(t,e,c)}else r.unshift(s),Qm(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Qm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function jU(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}}function $U(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pi(e)&&(n[""]=t)}}function qU(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function HU(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=wo(i.type,!0)),s=new Eo(o,pi(i),J);t.blueprint[r]=s,n[r]=s,kU(t,e,r,sT(t,n,i.hostVars,wi),i)}function zU(t,e,n){let r=In(e,t),i=dT(n),o=t[Nr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=_h(t,yh(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function GU(t,e,n,r,i,o){let s=In(t,e);WU(e[lt],s,o,t.value,n,r,i)}function WU(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?dh(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function KU(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];oT(r,n,c,l,d,f)}}function QU(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function gT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mT(t,e){let n=t.contentQueries;if(n!==null){let r=Gt(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];nb(o),a.contentQueries(2,e[s],s)}}}finally{Gt(r)}}}function _h(t,e){return t[Uc]?t[eC][kn]=e:t[Uc]=e,t[eC]=e,e}function Ym(t,e,n){nb(0);let r=Gt(null);try{e(t,n)}finally{Gt(r)}}function YU(t){return t[Nc]||(t[Nc]=[])}function XU(t){return t.cleanup||(t.cleanup=[])}function yT(t,e){let n=t[Ps],r=n?n.get(sr,null):null;r&&r.handleError(e)}function Gy(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],d=t.data[s];oT(d,l,r,a,c,i)}}function JU(t,e,n){let r=KC(e,t);sU(t[lt],r,n)}function ZU(t,e){let n=yi(e,t),r=n[ve];ek(r,n);let i=n[Or];i!==null&&n[Pd]===null&&(n[Pd]=Ry(i,n[Ps])),Wy(r,n,n[On])}function ek(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wy(t,e,n){Cy(e);try{let r=t.viewQuery;r!==null&&Ym(1,r,n);let i=t.template;i!==null&&aT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ns]?.finishViewCreation(t),t.staticContentQueries&&mT(t,e),t.staticViewQueries&&Ym(2,t.viewQuery,n);let o=t.components;o!==null&&tk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[se]&=-5,by()}}function tk(t,e){for(let n=0;n<e.length;n++)ZU(t,e[n])}function nk(t,e,n,r){let i=e.tView,s=t[se]&4096?4096:16,a=yh(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[rh]=c;let l=t[Ns];return l!==null&&(a[Ns]=l.createEmbeddedView(i)),Wy(i,a,n),a}function mC(t,e){return!e||e.firstChild===null||lb(t)}function rk(t,e,n,r=!0){let i=e[ve];if(lU(i,e,t,n),r){let s=Km(n,t),a=e[lt],c=jy(a,t[vo]);c!==null&&cU(i,t[Ln],a,e,c,s)}let o=e[Pd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Gd(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(or(o)),Vr(o)&&ik(o,r);let s=n.type;if(s&8)Gd(t,e,n.child,r);else if(s&32){let a=By(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=eT(e,n);if(Array.isArray(a))r.push(...a);else{let c=Oc(e[ir]);Gd(c[ve],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ik(t,e){for(let n=En;n<t.length;n++){let r=t[n],i=r[ve].firstChild;i!==null&&Gd(r[ve],r,i,e)}t[vo]!==t[Or]&&e.push(t[vo])}var vT=[];function ok(t){return t[yo]??sk(t)}function sk(t){let e=vT.pop()??Object.create(ck);return e.lView=t,e}function ak(t){t.lView[yo]!==t&&(t.lView=null,vT.push(t))}var ck=Ie(W({},ID),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{kc(t.lView)},consumerOnSignalRead(){this.lView[yo]=this}});function _T(t){return ET(t[Uc])}function wT(t){return ET(t[kn])}function ET(t){for(;t!==null&&!Vr(t);)t=t[kn];return t}var IT=100;function DT(t,e=!0,n=0){let r=t[Nr],i=r.rendererFactory,o=!1;o||i.begin?.();try{uk(t,n)}catch(s){throw e&&yT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function uk(t,e){Xm(t,e);let n=0;for(;Iy(t);){if(n===IT)throw new te(103,!1);n++,Xm(t,1)}}function lk(t,e,n,r){let i=e[se];if((i&256)===256)return;let o=!1;!o&&e[Nr].inlineEffectRunner?.flush(),Cy(e);let s=null,a=null;!o&&dk(t)&&(a=ok(e),s=DD(a));try{XC(e),UN(t.bindingStartIndex),n!==null&&aT(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let f=t.preOrderCheckHooks;f!==null&&Sd(e,f,null)}else{let f=t.preOrderHooks;f!==null&&xd(e,f,0,null),wm(e,0)}if(hk(e),CT(e,0),t.contentQueries!==null&&mT(t,e),!o)if(c){let f=t.contentCheckHooks;f!==null&&Sd(e,f)}else{let f=t.contentHooks;f!==null&&xd(e,f,1),wm(e,1)}TU(t,e);let l=t.components;l!==null&&TT(e,l,0);let d=t.viewQuery;if(d!==null&&Ym(2,d,r),!o)if(c){let f=t.viewCheckHooks;f!==null&&Sd(e,f)}else{let f=t.viewHooks;f!==null&&xd(e,f,2),wm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ym]){for(let f of e[ym])f();e[ym]=null}o||(e[se]&=-73)}catch(c){throw kc(e),c}finally{a!==null&&(CD(a,s),ak(a)),by()}}function dk(t){return t.type!==2}function CT(t,e){for(let n=_T(t);n!==null;n=wT(n))for(let r=En;r<n.length;r++){let i=n[r];bT(i,e)}}function hk(t){for(let e=_T(t);e!==null;e=wT(e)){if(!(e[se]&_y.HasTransplantedViews))continue;let n=e[Ud];for(let r=0;r<n.length;r++){let i=n[r],o=i[Lt];CN(i)}}}function fk(t,e,n){let r=yi(e,t);bT(r,n)}function bT(t,e){Ey(t)&&Xm(t,e)}function Xm(t,e){let r=t[ve],i=t[se],o=t[yo],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Wg(o)),o&&(o.dirty=!1),t[se]&=-9217,s)lk(r,t,r.template,t[On]);else if(i&8192){CT(t,1);let a=r.components;a!==null&&TT(t,a,1)}}function TT(t,e,n){for(let r=0;r<e.length;r++)fk(t,e[r],n)}function Ky(t){for(t[Nr].changeDetectionScheduler?.notify();t;){t[se]|=64;let e=Oc(t);if(vN(t)&&!e)return t;t=e}return null}var Do=class{get rootNodes(){let e=this._lView,n=e[ve];return Gd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Lt];if(Vr(e)){let n=e[Nd],r=n?n.indexOf(this):-1;r>-1&&(Wm(e,r),Od(n,r))}this._attachedToViewContainer=!1}Jb(this._lView[ve],this._lView)}onDestroy(e){JC(this._lView,e)}markForCheck(){Ky(this._cdRefInjectingView||this._lView)}detach(){this._lView[se]&=-129}reattach(){Nm(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,DT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Yb(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e,Nm(this._lView)}},wh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mk;let t=e;return t})(),pk=wh,gk=class extends pk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=nk(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Do(i)}};function mk(){return yk(cn(),Se())}function yk(t,e){return t.type&4?new gk(e,t,ch(t,e)):null}var J7=new RegExp(`^(\\d+)*(${d2}|${l2})*(.*)`);var vk=()=>null;function yC(t,e){return vk(t,e)}var Jm=class{},Zm=class{},Wd=class{};function _k(t){let e=Error(`No component factory found for ${Qt(t)}.`);return e[wk]=t,e}var wk="ngComponent";var ey=class{resolveComponentFactory(e){throw _k(e)}},Eh=(()=>{let e=class e{};e.NULL=new ey;let t=e;return t})(),Bc=class{},To=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Ek();let t=e;return t})();function Ek(){let t=Se(),e=cn(),n=yi(e.index,t);return(go(n)?n:t)[lt]}var Ik=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Cm={};function Dk(t){return typeof t=="function"&&t[Gg]!==void 0}var vC=new Set;function Ih(t){vC.has(t)||(vC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function AT(t){return Dk(t)&&typeof t.set=="function"}function Qy(t){let e=Gt(null);try{return t()}finally{Gt(e)}}function ST(t){return bk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Ck(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function bk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var ty=class{constructor(){}supports(e){return ST(e)}create(e){return new ny(e)}},Tk=(t,e)=>e,ny=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Tk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<_C(r,i,o)?n:r,a=_C(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;d<=I&&I<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!ST(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Ck(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new ry(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Kd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Kd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ry=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},iy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Kd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new iy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _C(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function wC(){return new Yy([new ty])}var Yy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||wC()),deps:[[e,new Py,new $s]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new te(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:wC});let t=e;return t})();var Lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Ak;let t=e;return t})();function Ak(t){return Sk(cn(),Se(),(t&16)===16)}function Sk(t,e,n){if(oh(t)&&!n){let r=yi(t.index,e);return new Do(r,r)}else if(t.type&47){let r=e[ir];return new Do(r,e)}return null}var xT=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xk,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),oy=class extends xT{constructor(e){super(),this._lView=e}onDestroy(e){return JC(this._lView,e),()=>TN(this._lView,e)}};function xk(){return new oy(Se())}function EC(...t){}function Mk(){let t=typeof wt.requestAnimationFrame=="function",e=wt[t?"requestAnimationFrame":"setTimeout"],n=wt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var me=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ut(!1),this.onMicrotaskEmpty=new ut(!1),this.onStable=new ut(!1),this.onError=new ut(!1),typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Mk().nativeRequestAnimationFrame,Pk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new te(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Fk,EC,EC);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Fk={};function Xy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Rk(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(wt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sy(t),t.isCheckStableRunning=!0,Xy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sy(t))}function Pk(t){let e=()=>{Rk(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(Nk(a))return n.invokeTask(i,o,s,a);try{return IC(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),DC(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return IC(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),DC(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,sy(t),Xy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function sy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function IC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function DC(t){t._nesting--,Xy(t)}var ay=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ut,this.onMicrotaskEmpty=new ut,this.onStable=new ut,this.onError=new ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Nk(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function Uk(t="zone.js",e){return t==="noop"?new ay:t==="zone.js"?new me(e):t}var xs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(xs||{}),kk={destroy(){}};function Jy(t,e){!e&&b2(Jy);let n=e?.injector??H(Bn);if(!rU(n))return kk;Ih("NgAfterNextRender");let r=n.get(Zy),i=r.handler??=new uy,o=e?.phase??xs.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(xT).onDestroy(s),c=new cy(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var cy=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(me),this.errorHandler=e.get(sr,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},uy=class{constructor(){this.executingCallbacks=!1,this.buckets={[xs.EarlyRead]:new Set,[xs.Write]:new Set,[xs.MixedReadWrite]:new Set,[xs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Zy=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function ly(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=KD(i,a);else if(o==2){let c=a,l=e[++s];r=KD(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Qd=class extends Eh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fi(e);return new Vs(n,this.ngModule)}};function CC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function Ok(t){let e=t.toLowerCase();return e==="svg"?_N:e==="math"?wN:null}var dy=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hh(r);let i=this.injector.get(e,Cm,r);return i!==Cm||n===Cm?i:this.parentInjector.get(e,n,r)}},Vs=class extends Wd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=CC(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return CC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=fN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof Yt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new dy(e,o):e,a=s.get(Bc,null);if(a===null)throw new te(407,!1);let c=s.get(Ik,null),l=s.get(Zy,null),d=s.get(Jm,null),f={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},g=a.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?xU(g,r,this.componentDef.encapsulation,s):Qb(g,y,Ok(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let C=null;I!==null&&(C=Ry(I,s,!0));let P=Hy(0,null,null,1,0,null,null,null,null,null,null),B=yh(null,P,null,A,null,null,f,g,s,null,C);Cy(B);let U,V;try{let Y=this.componentDef,X,E=null;Y.findHostDirectiveDefs?(X=[],E=new Map,Y.findHostDirectiveDefs(Y,X,E),X.push(Y)):X=[Y];let v=Vk(B,I),_=Lk(v,I,Y,X,B,f,g);V=QC(P,Vn),I&&$k(g,Y,I,r),n!==void 0&&qk(V,this.ngContentSelectors,n),U=jk(_,Y,X,E,B,[Hk]),Wy(P,B,null)}finally{by()}return new hy(this.componentType,U,ch(V,B),B,V)}},hy=class extends Zm{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Do(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Gy(o[ve],o,i,e,n),this.previousInputValues.set(e,n);let s=yi(this._tNode.index,o);Ky(s)}}get injector(){return new mo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Vk(t,e){let n=t[ve],r=Vn;return t[r]=e,vh(n,r,2,"#host",null)}function Lk(t,e,n,r,i,o,s){let a=i[ve];Bk(r,t,e,s);let c=null;e!==null&&(c=Ry(e,i[Ps]));let l=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=yh(i,dT(n),null,d,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Qm(a,t,r.length-1),_h(i,f),i[t.index]=f}function Bk(t,e,n,r){for(let i of t)e.mergedAttrs=Pc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ly(e,e.mergedAttrs,!0),n!==null&&nT(r,n,e))}function jk(t,e,n,r,i,o){let s=cn(),a=i[ve],c=In(s,i);fT(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,g=Os(i,a,f,s);Io(g,i)}pT(a,i,s),c&&Io(c,i);let l=Os(i,a,s.directiveStart+s.componentOffset,s);if(t[On]=i[On]=l,o!==null)for(let d of o)d(l,e);return cT(a,s,i),l}function $k(t,e,n,r){if(r)Pm(t,n,["ng-version","17.2.3"]);else{let{attrs:i,classes:o}=pN(e.selectors[0]);i&&Pm(t,n,i),o&&o.length>0&&tT(t,n,o.join(" "))}}function qk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Hk(){let t=cn();ky(Se()[ve],t)}var Hs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zk;let t=e;return t})();function zk(){let t=cn();return Wk(t,Se())}var Gk=Hs,MT=class extends Gk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ch(this._hostTNode,this._hostLView)}get injector(){return new mo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Oy(this._hostTNode,this._hostLView);if(Rb(e)){let n=jd(e,this._hostLView),r=Bd(e),i=n[ve].data[r+8];return new mo(i,n)}else return new mo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=bC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=yC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,mC(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!A2(e),a;if(s)a=n;else{let I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new Vs(fi(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let A=(s?l:this.parentInjector).get(Yt,null);A&&(o=A)}let d=fi(c.componentType??{}),f=yC(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,o);return this.insertImpl(y.hostView,a,mC(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(DN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Lt],l=new MT(c,c[Ln],c[Lt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return rk(s,i,o,r),e.attachToViewContainerRef(),ub(bm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=bC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Wm(this._lContainer,n);r&&(Od(bm(this._lContainer),n),Jb(r[ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Wm(this._lContainer,n);return r&&Od(bm(this._lContainer),n)!=null?new Do(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function bC(t){return t[Nd]}function bm(t){return t[Nd]||(t[Nd]=[])}function Wk(t,e){let n,r=e[t.index];return Vr(r)?n=r:(n=gT(r,e,null,t),e[t.index]=n,_h(e,n)),Qk(n,e,t,r),new MT(n,t,e)}function Kk(t,e){let n=t[lt],r=n.createComment(""),i=In(e,t),o=jy(n,i);return zd(n,o,r,yU(n,i),!1),r}var Qk=Jk,Yk=()=>!1;function Xk(t,e,n){return Yk(t,e,n)}function Jk(t,e,n,r){if(t[vo])return;let i;n.type&8?i=or(r):i=Kk(e,n),t[vo]=i}function Zk(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(rO))}return o}return Yd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>iO(o));e.push(c)}),tO(),Promise.all(e).then(()=>{})}var Yd=new Map,eO=new Set;function tO(){let t=Yd;return Yd=new Map,t}function nO(){return Yd.size===0}function rO(t){return typeof t=="string"?t:t.text()}function iO(t){eO.delete(t)}function oO(t){return Object.getPrototypeOf(t.prototype).constructor}function Br(t){let e=oO(t.type),n=!0,r=[t];for(;e;){let i;if(pi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Cd(t.inputs),s.inputTransforms=Cd(t.inputTransforms),s.declaredInputs=Cd(t.declaredInputs),s.outputs=Cd(t.outputs);let a=i.hostBindings;a&&lO(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&cO(t,c),l&&uO(t,l),sO(t,i),ZP(t.outputs,i.outputs),pi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Br&&(n=!1)}}e=Object.getPrototypeOf(e)}aO(r)}function sO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function aO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pc(i.hostAttrs,n=Pc(n,i.hostAttrs))}}function Cd(t){return t===Rs?{}:t===wn?[]:t}function cO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function uO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function lO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function e0(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var gi=class{},jc=class{};var Xd=class extends gi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qd(this);let i=$C(e);this._bootstrapComponents=Kb(i.bootstrap),this._r3Injector=jb(e,n,[{provide:gi,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver},...r],Qt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jd=class extends jc{constructor(e){super(),this.moduleType=e}create(e){return new Xd(this.moduleType,e,[])}};function dO(t,e,n){return new Xd(t,e,n)}var fy=class extends gi{constructor(e){super(),this.componentFactoryResolver=new Qd(this),this.instance=null;let n=new Lc([...e.providers,{provide:gi,useValue:this},{provide:Eh,useValue:this.componentFactoryResolver}],e.parent||Uy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dh(t,e,n=null){return new fy({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ao=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new At(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function FT(t,e,n){return t[e]=n}function mi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function hO(t,e,n,r){let i=mi(t,e,n);return mi(t,e+1,r)||i}function fO(t,e,n,r,i,o,s,a,c){let l=e.consts,d=vh(e,t,4,s||null,kd(l,a));hT(e,n,d,kd(l,c)),ky(e,d);let f=d.tView=Hy(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function hn(t,e,n,r,i,o,s,a){let c=Se(),l=Xt(),d=t+Vn,f=l.firstCreatePass?fO(d,l,c,e,n,r,i,o,s):l.data[d];Gc(f,!1);let g=pO(l,c,f,t);Ty()&&$y(l,c,g,f),Io(g,c);let y=gT(g,c,g,f);return c[d]=y,_h(c,y),Xk(y,f,c),wy(f)&&uT(l,c,f),s!=null&&lT(c,f,a),hn}var pO=gO;function gO(t,e,n,r){return Ay(!0),e[lt].createComment("")}function Yc(t,e,n,r){let i=Se(),o=sh();if(mi(i,o,e)){let s=Xt(),a=ah();GU(a,i,t,e,n,r)}return Yc}function RT(t,e,n,r){return mi(t,sh(),n)?e+dh(n)+r:wi}function bd(t,e){return t<<17|e<<2}function Co(t){return t>>17&32767}function mO(t){return(t&2)==2}function yO(t,e){return t&131071|e<<17}function py(t){return t|2}function Ls(t){return(t&131068)>>2}function Tm(t,e){return t&-131069|e<<2}function vO(t){return(t&1)===1}function gy(t){return t|1}function _O(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Co(s),c=Ls(s);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Wc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=Co(t[a+1]);t[r+1]=bd(g,a),g!==0&&(t[g+1]=Tm(t[g+1],r)),t[a+1]=yO(t[a+1],r)}else t[r+1]=bd(a,0),a!==0&&(t[a+1]=Tm(t[a+1],r)),a=r;else t[r+1]=bd(c,0),a===0?a=r:t[c+1]=Tm(t[c+1],r),c=r;l&&(t[r+1]=py(t[r+1])),TC(t,d,r,!0),TC(t,d,r,!1),wO(e,d,t,r,o),s=bd(a,c),o?e.classBindings=s:e.styleBindings=s}function wO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Wc(o,e)>=0&&(n[r+1]=gy(n[r+1]))}function TC(t,e,n,r){let i=t[n+1],o=e===null,s=r?Co(i):Ls(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];EO(c,e)&&(a=!0,t[s+1]=r?gy(l):py(l)),s=r?Co(l):Ls(l)}a&&(t[n+1]=r?py(i):gy(i))}function EO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Wc(t,e)>=0:!1}function Je(t,e,n){let r=Se(),i=sh();if(mi(r,i,e)){let o=Xt(),s=ah();zy(o,s,r,t,e,r[lt],n,!1)}return Je}function AC(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Gy(t,n,o[s],s,r)}function Ch(t,e){return IO(t,e,null,!0),Ch}function IO(t,e,n,r){let i=Se(),o=Xt(),s=kN(2);if(o.firstUpdatePass&&CO(o,t,s,r),e!==wi&&mi(i,s,e)){let a=o.data[js()];xO(o,a,i,i[lt],t,i[s+1]=MO(e,n),r,s)}}function DO(t,e){return e>=t.expandoStartIndex}function CO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[js()],s=DO(t,n);FO(o,r)&&e===null&&!s&&(e=!1),e=bO(i,o,e,r),_O(i,o,e,n,s,r)}}function bO(t,e,n,r){let i=BN(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Am(null,t,e,n,r),n=$c(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Am(i,t,e,n,r),o===null){let c=TO(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Am(null,t,e,c[1],r),c=$c(c,e.attrs,r),AO(t,e,r,c))}else o=SO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function TO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ls(r)!==0)return t[Co(r)]}function AO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Co(i)]=r}function SO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=$c(r,s,n)}return $c(r,e.attrs,n)}function Am(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=$c(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function $c(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),GN(t,s,n?!0:e[++o]))}return t===void 0?null:t}function xO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=vO(l)?SC(c,e,n,i,Ls(l),s):void 0;if(!Zd(d)){Zd(o)||mO(l)&&(o=SC(c,null,n,i,a,s));let f=KC(js(),n);CU(r,s,f,i,o)}}function SC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===wi&&(g=f?wn:void 0);let y=f?vm(g,r):d===r?g:void 0;if(l&&!Zd(y)&&(y=vm(c,r)),Zd(y)&&(a=y,s))return a;let I=t[i+1];i=s?Co(I):Ls(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=vm(c,r))}return a}function Zd(t){return t!==void 0}function MO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Qt(Kc(t)))),t}function FO(t,e){return(t.flags&(e?8:16))!==0}function RO(t,e,n,r,i,o){let s=e.consts,a=kd(s,i),c=vh(e,t,2,r,a);return hT(e,n,c,kd(s,o)),c.attrs!==null&&ly(c,c.attrs,!1),c.mergedAttrs!==null&&ly(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(t,e,n,r){let i=Se(),o=Xt(),s=Vn+t,a=i[lt],c=o.firstCreatePass?RO(s,o,i,e,n,r):o.data[s],l=PO(o,i,c,a,e,t);i[s]=l;let d=wy(c);return Gc(c,!0),nT(a,l,c),(c.flags&32)!==32&&Ty()&&$y(o,i,l,c),AN()===0&&Io(l,i),SN(),d&&(uT(o,i,c),cT(o,c,i)),r!==null&&lT(i,c),L}function j(){let t=cn();tb()?NN():(t=t.parent,Gc(t,!1));let e=t;FN(e)&&RN(),xN();let n=Xt();return n.firstCreatePass&&(ky(n,t),WC(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&N2(e)&&AC(n,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&U2(e)&&AC(n,e,Se(),e.stylesWithoutHost,!1),j}function jn(t,e,n,r){return L(t,e,n,r),j(),jn}var PO=(t,e,n,r,i,o)=>(Ay(!0),Qb(r,i,qN()));function bh(){return Se()}var po=void 0;function NO(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var UO=["en",[["a","p"],["AM","PM"],po],[["AM","PM"],po,po],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],po,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],po,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",po,"{1} 'at' {0}",po],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",NO],Sm={};function Dn(t){let e=kO(t),n=xC(e);if(n)return n;let r=e.split("-")[0];if(n=xC(r),n)return n;if(r==="en")return UO;throw new te(701,!1)}function xC(t){return t in Sm||(Sm[t]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[t]),Sm[t]}var tt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(tt||{});function kO(t){return t.toLowerCase().replace(/_/g,"-")}var eh="en-US";var OO=eh;function VO(t){typeof t=="string"&&(OO=t.toLowerCase().replace(/_/g,"-"))}function nt(t,e,n,r){let i=Se(),o=Xt(),s=cn();return PT(o,i,i[lt],s,t,e,r),nt}function LO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Nc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function PT(t,e,n,r,i,o,s){let a=wy(r),l=t.firstCreatePass&&XU(t),d=e[On],f=YU(e),g=!0;if(r.type&3||s){let A=In(r,e),C=s?s(A):A,P=f.length,B=s?V=>s(or(V[r.index])):r.index,U=null;if(!s&&a&&(U=LO(t,e,i,r.index)),U!==null){let V=U.__ngLastListenerFn__||U;V.__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,g=!1}else{o=FC(r,e,d,o,!1);let V=n.listen(C,i,o);f.push(o,V),l&&l.push(i,B,P,P+1)}}else o=FC(r,e,d,o,!1);let y=r.outputs,I;if(g&&y!==null&&(I=y[i])){let A=I.length;if(A)for(let C=0;C<A;C+=2){let P=I[C],B=I[C+1],Y=e[P][B].subscribe(o),X=f.length;if(f.push(o,Y),l){let E=typeof Y=="function"?X+1:-(X+1);l.push(i,r.index,X,E)}}}}function MC(t,e,n,r){try{return tr(6,e,n),n(r)!==!1}catch(i){return yT(t,i),!1}finally{tr(7,e,n)}}function FC(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?yi(t.index,e):e;Ky(a);let c=MC(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=MC(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function fn(t=1){return $N(t)}function t0(t,e,n){return Th(t,"",e,"",n),t0}function Th(t,e,n,r,i){let o=Se(),s=RT(o,e,n,r);if(s!==wi){let a=Xt(),c=ah();zy(a,c,o,t,s,o[lt],i,!1)}return Th}function BO(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Z(t,e=""){let n=Se(),r=Xt(),i=t+Vn,o=r.firstCreatePass?vh(r,i,1,e,null):r.data[i],s=jO(r,n,o,e,t);n[i]=s,Ty()&&$y(r,n,s,o),Gc(o,!1)}var jO=(t,e,n,r,i)=>(Ay(!0),oU(e[lt],r));function So(t){return Jt("",t,""),So}function Jt(t,e,n){let r=Se(),i=RT(r,t,e,n);return i!==wi&&JU(r,js(),i),Jt}function dt(t,e,n){AT(e)&&(e=e());let r=Se(),i=sh();if(mi(r,i,e)){let o=Xt(),s=ah();zy(o,s,r,t,e,r[lt],n,!1)}return dt}function Et(t,e){let n=AT(t);return n&&t.set(e),n}function ht(t,e){let n=Se(),r=Xt(),i=cn();return PT(r,n,n[lt],i,t,e),ht}function $O(t,e,n){let r=Xt();if(r.firstCreatePass){let i=pi(t);my(n,r.data,r.blueprint,i,!0),my(e,r.data,r.blueprint,i,!1)}}function my(t,e,n,r,i){if(t=Kt(t),Array.isArray(t))for(let o=0;o<t.length;o++)my(t[o],e,n,r,i);else{let o=Xt(),s=Se(),a=cn(),c=ks(t)?t:Kt(t.provide),l=Tb(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(ks(t)||!t.multi){let y=new Eo(l,i,J),I=Mm(c,e,i?d:d+g,f);I===-1?(zm(qd(a,s),o,c),xm(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[I]=y,s[I]=y)}else{let y=Mm(c,e,d+g,f),I=Mm(c,e,d,d+g),A=y>=0&&n[y],C=I>=0&&n[I];if(i&&!C||!i&&!A){zm(qd(a,s),o,c);let P=zO(i?HO:qO,n.length,i,r,l);!i&&C&&(n[I].providerFactory=P),xm(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=NT(n[i?I:y],l,!i&&r);xm(o,t,y>-1?y:I,P)}!i&&r&&C&&n[I].componentProviders++}}}function xm(t,e,n,r){let i=ks(e),o=v2(e);if(i||o){let c=(o?Kt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function NT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Mm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qO(t,e,n,r){return yy(this.multi,[])}function HO(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Os(n,n[ve],this.providerFactory.index,r);o=a.slice(0,s),yy(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],yy(i,o);return o}function yy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function zO(t,e,n,r,i){let o=new Eo(t,n,J);return o.multi=[],o.index=e,o.componentProviders=0,NT(o,i,r&&!n),o}function Xc(t,e=[]){return n=>{n.providersResolver=(r,i)=>$O(r,i?i(t):t,e)}}var GO=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Db(!1,r.type),o=i.length>0?Dh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=K({token:e,providedIn:"environment",factory:()=>new e(N(Yt))});let t=e;return t})();function UT(t){Ih("NgStandalone"),t.getStandaloneInjector=e=>e.get(GO).getOrCreateStandaloneInjector(t)}function kT(t,e,n,r){return VT(Se(),Dy(),t,e,n,r)}function OT(t,e){let n=t[e];return n===wi?void 0:n}function VT(t,e,n,r,i,o){let s=e+n;return mi(t,s,i)?FT(t,s+1,o?r.call(o,i):r(i)):OT(t,s+1)}function WO(t,e,n,r,i,o,s){let a=e+n;return hO(t,a,i,o)?FT(t,a+2,s?r.call(s,i,o):r(i,o)):OT(t,a+2)}function Ah(t,e){let n=Xt(),r,i=t+Vn;n.firstCreatePass?(r=KO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=wo(r.type,!0)),s,a=an(J);try{let c=$d(!1),l=o();return $d(c),BO(n,Se(),i,l),l}finally{an(a)}}function KO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function LT(t,e,n){let r=t+Vn,i=Se(),o=YC(i,r);return jT(i,r)?VT(i,Dy(),e,o.transform,n,o):o.transform(n)}function BT(t,e,n,r){let i=t+Vn,o=Se(),s=YC(o,i);return jT(o,i)?WO(o,Dy(),e,s.transform,n,r,s):s.transform(n,r)}function jT(t,e){return t[ve].data[e].pure}var Td=null;function QO(t){Td!==null&&(t.defaultEncapsulation!==Td.defaultEncapsulation||t.preserveWhitespaces!==Td.preserveWhitespaces)||(Td=t)}var kr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},$T=new kr("17.2.3"),Sh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var n0=new q(""),Jc=new q(""),xh=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,r0||(YO(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(N(me),N(Mh),N(Jc))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),Mh=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return r0?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function YO(t){r0=t}var r0;function Ei(t){return!!t&&typeof t.then=="function"}function i0(t){return!!t&&typeof t.subscribe=="function"}var Fh=new q(""),qT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=H(Fh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Ei(s))r.push(s);else if(i0(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rh=new q("");function XO(){TD(()=>{throw new te(600,!1)})}function JO(t){return t.isBoundToModule}function ZO(t,e,n){try{let r=n();return Ei(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function HT(t,e){return Array.isArray(e)?e.reduce(HT,t):W(W({},t),e)}var xo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H($b),this.afterRenderEffectManager=H(Zy),this.componentTypes=[],this.components=[],this.isStable=H(Ao).hasPendingTasks.pipe(ee(r=>!r)),this._injector=H(Yt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Wd;if(!this._injector.get(qT).done){let y=!o&&jC(r),I=!1;throw new te(405,I)}let a;o?a=r:a=this._injector.get(Eh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=JO(a)?void 0:this._injector.get(gi),l=i||a.selector,d=a.create(Bn.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(n0,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Fd(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new te(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===IT)throw new te(103,!1);let o=r===0;for(let{_lView:s,notifyErrorHandler:a}of this._views)!o&&!Fm(s)||this.detectChangesInView(s,a,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:s})=>Fm(s))&&(i.execute(),!this._views.some(({_lView:s})=>Fm(s))))break}}detectChangesInView(r,i,o){let s;o?(s=0,r[se]|=1024):r[se]&64?s=0:s=1,DT(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Fd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Rh,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Fd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new te(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Fd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Fm(t){return Iy(t)}var vy=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ph=(()=>{let e=class e{compileModuleSync(r){return new Jd(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=$C(r),s=Kb(o.declarations).reduce((a,c)=>{let l=fi(c);return l&&a.push(new Vs(l)),a},[]);return new vy(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eV=new q("");function tV(t,e,n){let r=new Jd(n);return Promise.resolve(r)}function RC(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var nV=(()=>{let e=class e{constructor(){this.zone=H(me),this.applicationRef=H(xo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rV(t){return[{provide:me,useFactory:t},{provide:Us,multi:!0,useFactory:()=>{let e=H(nV,{optional:!0});return()=>e.initialize()}},{provide:Us,multi:!0,useFactory:()=>{let e=H(sV);return()=>{e.initialize()}}},{provide:$b,useFactory:iV}]}function iV(){let t=H(me),e=H(sr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function oV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sV=(()=>{let e=class e{constructor(){this.subscription=new et,this.initialized=!1,this.zone=H(me),this.pendingTasks=H(Ao)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aV(){return typeof $localize<"u"&&$localize.locale||eh}var Nh=new q("",{providedIn:"root",factory:()=>H(Nh,ge.Optional|ge.SkipSelf)||aV()});var zT=new q(""),GT=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=Uk(i?.ngZone,oV({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=dO(r.moduleType,this.injector,rV(()=>o)),a=s.injector.get(sr,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Fd(this._modules,s),c.unsubscribe()})}),ZO(a,o,()=>{let c=s.injector.get(qT);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(Nh,eh);return VO(l||eh),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=HT({},i);return tV(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(xo);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new te(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new te(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(zT,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(N(Bn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Rc=null,WT=new q("");function cV(t){if(Rc&&!Rc.get(WT,!1))throw new te(400,!1);XO(),Rc=t;let e=t.get(GT);return dV(t),e}function o0(t,e,n=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=KT();if(!s||s.injector.get(WT,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):cV(uV(a,r))}return lV(i)}}function uV(t=[],e){return Bn.create({name:e,providers:[{provide:ph,useValue:"platform"},{provide:zT,useValue:new Set([()=>Rc=null])},...t]})}function lV(t){let e=KT();if(!e)throw new te(401,!1);return e}function KT(){return Rc?.get(GT)??null}function dV(t){t.get(xy,null)?.forEach(n=>n())}function s0(){return!1}var QT=o0(null,"core",[]),YT=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(N(xo))},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({});let t=e;return t})();function Ii(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function XT(t){let e=fi(t);if(!e)return null;let n=new Vs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var rA=null;function cr(){return rA}function iA(t){rA??=t}var qh=class{};var Bt=new q(""),m0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(hV),providedIn:"platform"});let t=e;return t})(),oA=new q(""),hV=(()=>{let e=class e extends m0{constructor(){super(),this._doc=H(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cr().getBaseHref(this._doc)}onPopState(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function y0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function JT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $r(t){return t&&t[0]!=="?"?"?"+t:t}var zr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(v0),providedIn:"root"});let t=e;return t})(),sA=new q(""),v0=(()=>{let e=class e extends zr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??H(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return y0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$r(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$r(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$r(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(N(m0),N(sA,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aA=(()=>{let e=class e extends zr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=y0(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$r(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$r(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(N(m0),N(sA,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),Gs=(()=>{let e=class e{constructor(r){this._subject=new ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=gV(JT(ZT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$r(i))}normalize(r){return e.stripTrailingSlash(pV(this._basePath,ZT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$r(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$r(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=$r,e.joinWithSlash=y0,e.stripTrailingSlash=JT,e.\u0275fac=function(i){return new(i||e)(N(zr))},e.\u0275prov=K({token:e,factory:()=>fV(),providedIn:"root"});let t=e;return t})();function fV(){return new Gs(N(zr))}function pV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ZT(t){return t.replace(/\/index.html$/,"")}function gV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Zt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Zt||{}),Ue=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ue||{}),pn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(pn||{}),qr=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(qr||{});function mV(t){return Dn(t)[tt.LocaleId]}function yV(t,e,n){let r=Dn(t),i=[r[tt.DayPeriodsFormat],r[tt.DayPeriodsStandalone]],o=Cn(i,e);return Cn(o,n)}function vV(t,e,n){let r=Dn(t),i=[r[tt.DaysFormat],r[tt.DaysStandalone]],o=Cn(i,e);return Cn(o,n)}function _V(t,e,n){let r=Dn(t),i=[r[tt.MonthsFormat],r[tt.MonthsStandalone]],o=Cn(i,e);return Cn(o,n)}function wV(t,e){let r=Dn(t)[tt.Eras];return Cn(r,e)}function Uh(t,e){let n=Dn(t);return Cn(n[tt.DateFormat],e)}function kh(t,e){let n=Dn(t);return Cn(n[tt.TimeFormat],e)}function Oh(t,e){let r=Dn(t)[tt.DateTimeFormat];return Cn(r,e)}function zh(t,e){let n=Dn(t),r=n[tt.NumberSymbols][e];if(typeof r>"u"){if(e===qr.CurrencyDecimal)return n[tt.NumberSymbols][qr.Decimal];if(e===qr.CurrencyGroup)return n[tt.NumberSymbols][qr.Group]}return r}function cA(t){if(!t[tt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[tt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function EV(t){let e=Dn(t);return cA(e),(e[tt.ExtraData][2]||[]).map(r=>typeof r=="string"?a0(r):[a0(r[0]),a0(r[1])])}function IV(t,e,n){let r=Dn(t);cA(r);let i=[r[tt.ExtraData][0],r[tt.ExtraData][1]],o=Cn(i,e)||[];return Cn(o,n)||[]}function Cn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function a0(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var DV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vh={},CV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Hr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Hr||{}),Ae=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ae||{}),Te=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Te||{});function bV(t,e,n,r){let i=NV(t);e=jr(n,e)||e;let s=[],a;for(;e;)if(a=CV.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=lA(r,c),i=PV(i,r,!0));let l="";return s.forEach(d=>{let f=FV(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Hh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function jr(t,e){let n=mV(t);if(Vh[n]??={},Vh[n][e])return Vh[n][e];let r="";switch(e){case"shortDate":r=Uh(t,pn.Short);break;case"mediumDate":r=Uh(t,pn.Medium);break;case"longDate":r=Uh(t,pn.Long);break;case"fullDate":r=Uh(t,pn.Full);break;case"shortTime":r=kh(t,pn.Short);break;case"mediumTime":r=kh(t,pn.Medium);break;case"longTime":r=kh(t,pn.Long);break;case"fullTime":r=kh(t,pn.Full);break;case"short":let i=jr(t,"shortTime"),o=jr(t,"shortDate");r=Lh(Oh(t,pn.Short),[i,o]);break;case"medium":let s=jr(t,"mediumTime"),a=jr(t,"mediumDate");r=Lh(Oh(t,pn.Medium),[s,a]);break;case"long":let c=jr(t,"longTime"),l=jr(t,"longDate");r=Lh(Oh(t,pn.Long),[c,l]);break;case"full":let d=jr(t,"fullTime"),f=jr(t,"fullDate");r=Lh(Oh(t,pn.Full),[d,f]);break}return r&&(Vh[n][e]=r),r}function Lh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function $n(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function TV(t,e){return $n(t,3).substring(0,e)}function ft(t,e,n=0,r=!1,i=!1){return function(o,s){let a=AV(t,o);if((n>0||a>-n)&&(a+=n),t===Ae.Hours)a===0&&n===-12&&(a=12);else if(t===Ae.FractionalSeconds)return TV(a,e);let c=zh(s,qr.MinusSign);return $n(a,e,c,r,i)}}function AV(t,e){switch(t){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Oe(t,e,n=Zt.Format,r=!1){return function(i,o){return SV(i,o,t,e,n,r)}}function SV(t,e,n,r,i,o){switch(n){case Te.Months:return _V(e,i,r)[t.getMonth()];case Te.Days:return vV(e,i,r)[t.getDay()];case Te.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=EV(e),d=IV(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,I]=g,A=s>=y.hours&&a>=y.minutes,C=s<I.hours||s===I.hours&&a<I.minutes;if(y.hours<I.hours){if(A&&C)return!0}else if(A||C)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return yV(e,i,r)[s<12?0:1];case Te.Eras:return wV(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Bh(t){return function(e,n,r){let i=-1*r,o=zh(n,qr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Hr.Short:return(i>=0?"+":"")+$n(s,2,o)+$n(Math.abs(i%60),2,o);case Hr.ShortGMT:return"GMT"+(i>=0?"+":"")+$n(s,1,o);case Hr.Long:return"GMT"+(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);case Hr.Extended:return r===0?"Z":(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var xV=0,$h=4;function MV(t){let e=Hh(t,xV,1).getDay();return Hh(t,0,1+(e<=$h?$h:$h+7)-e)}function uA(t){let e=t.getDay(),n=e===0?-3:$h-e;return Hh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function c0(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=uA(n),s=MV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return $n(i,t,zh(r,qr.MinusSign))}}function jh(t,e=!1){return function(n,r){let o=uA(n).getFullYear();return $n(o,t,zh(r,qr.MinusSign),e)}}var u0={};function FV(t){if(u0[t])return u0[t];let e;switch(t){case"G":case"GG":case"GGG":e=Oe(Te.Eras,Ue.Abbreviated);break;case"GGGG":e=Oe(Te.Eras,Ue.Wide);break;case"GGGGG":e=Oe(Te.Eras,Ue.Narrow);break;case"y":e=ft(Ae.FullYear,1,0,!1,!0);break;case"yy":e=ft(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=ft(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=ft(Ae.FullYear,4,0,!1,!0);break;case"Y":e=jh(1);break;case"YY":e=jh(2,!0);break;case"YYY":e=jh(3);break;case"YYYY":e=jh(4);break;case"M":case"L":e=ft(Ae.Month,1,1);break;case"MM":case"LL":e=ft(Ae.Month,2,1);break;case"MMM":e=Oe(Te.Months,Ue.Abbreviated);break;case"MMMM":e=Oe(Te.Months,Ue.Wide);break;case"MMMMM":e=Oe(Te.Months,Ue.Narrow);break;case"LLL":e=Oe(Te.Months,Ue.Abbreviated,Zt.Standalone);break;case"LLLL":e=Oe(Te.Months,Ue.Wide,Zt.Standalone);break;case"LLLLL":e=Oe(Te.Months,Ue.Narrow,Zt.Standalone);break;case"w":e=c0(1);break;case"ww":e=c0(2);break;case"W":e=c0(1,!0);break;case"d":e=ft(Ae.Date,1);break;case"dd":e=ft(Ae.Date,2);break;case"c":case"cc":e=ft(Ae.Day,1);break;case"ccc":e=Oe(Te.Days,Ue.Abbreviated,Zt.Standalone);break;case"cccc":e=Oe(Te.Days,Ue.Wide,Zt.Standalone);break;case"ccccc":e=Oe(Te.Days,Ue.Narrow,Zt.Standalone);break;case"cccccc":e=Oe(Te.Days,Ue.Short,Zt.Standalone);break;case"E":case"EE":case"EEE":e=Oe(Te.Days,Ue.Abbreviated);break;case"EEEE":e=Oe(Te.Days,Ue.Wide);break;case"EEEEE":e=Oe(Te.Days,Ue.Narrow);break;case"EEEEEE":e=Oe(Te.Days,Ue.Short);break;case"a":case"aa":case"aaa":e=Oe(Te.DayPeriods,Ue.Abbreviated);break;case"aaaa":e=Oe(Te.DayPeriods,Ue.Wide);break;case"aaaaa":e=Oe(Te.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":e=Oe(Te.DayPeriods,Ue.Abbreviated,Zt.Standalone,!0);break;case"bbbb":e=Oe(Te.DayPeriods,Ue.Wide,Zt.Standalone,!0);break;case"bbbbb":e=Oe(Te.DayPeriods,Ue.Narrow,Zt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Oe(Te.DayPeriods,Ue.Abbreviated,Zt.Format,!0);break;case"BBBB":e=Oe(Te.DayPeriods,Ue.Wide,Zt.Format,!0);break;case"BBBBB":e=Oe(Te.DayPeriods,Ue.Narrow,Zt.Format,!0);break;case"h":e=ft(Ae.Hours,1,-12);break;case"hh":e=ft(Ae.Hours,2,-12);break;case"H":e=ft(Ae.Hours,1);break;case"HH":e=ft(Ae.Hours,2);break;case"m":e=ft(Ae.Minutes,1);break;case"mm":e=ft(Ae.Minutes,2);break;case"s":e=ft(Ae.Seconds,1);break;case"ss":e=ft(Ae.Seconds,2);break;case"S":e=ft(Ae.FractionalSeconds,1);break;case"SS":e=ft(Ae.FractionalSeconds,2);break;case"SSS":e=ft(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Bh(Hr.Short);break;case"ZZZZZ":e=Bh(Hr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bh(Hr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bh(Hr.Long);break;default:return null}return u0[t]=e,e}function lA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function RV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function PV(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=lA(e,i);return RV(t,r*(o-i))}function NV(t){if(eA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Hh(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(DV))return UV(r)}let e=new Date(t);if(!eA(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function UV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function eA(t){return t instanceof Date&&!isNaN(t.valueOf())}function Gh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var l0=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dA=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new l0(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),tA(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);tA(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(J(Hs),J(wh),J(Yy))},e.\u0275dir=St({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function tA(t,e){t.context.$implicit=e.item}var Di=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new d0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){nA("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){nA("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(J(Hs),J(wh))},e.\u0275dir=St({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),d0=class{constructor(){this.$implicit=null,this.ngIf=null}};function nA(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Qt(e)}'.`)}function hA(t,e){return new te(2100,!1)}var h0=class{createSubscription(e,n){return Qy(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Qy(()=>e.unsubscribe())}},f0=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},kV=new f0,OV=new h0,fA=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ei(r))return kV;if(i0(r))return OV;throw hA(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(J(Lr,16))},e.\u0275pipe=nh({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var VV="mediumDate",LV=new q(""),BV=new q(""),pA=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??VV,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return bV(r,a,s||this.locale,c)}catch(a){throw hA(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(J(Nh,16),J(LV,24),J(BV,24))},e.\u0275pipe=nh({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var gA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({});let t=e;return t})(),_0="browser",jV="server";function $V(t){return t===_0}function Mo(t){return t===jV}var mA=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>$V(H(Ct))?new p0(H(Bt),window):new g0});let t=e;return t})(),p0=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=qV(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function qV(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var g0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zs=class{};var eu=class{},Kh=class{},Ro=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var E0=class{encodeKey(e){return yA(e)}encodeValue(e){return yA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function GV(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var WV=/%(\d[a-f0-9])/gi,KV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yA(t){return encodeURIComponent(t).replace(WV,(e,n)=>KV[n]??e)}function Wh(t){return`${t}`}var Ci=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new E0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=GV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Wh):[Wh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Wh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Wh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var I0=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function QV(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vA(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function _A(t){return typeof Blob<"u"&&t instanceof Blob}function wA(t){return typeof FormData<"u"&&t instanceof FormData}function YV(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Zc=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(QV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ro,this.context??=new I0,!this.params)this.params=new Ci,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:vA(this.body)||_A(this.body)||wA(this.body)||YV(this.body)||typeof this.body=="string"?this.body:this.body instanceof Ci?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wA(this.body)?null:_A(this.body)?this.body.type||null:vA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ci?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),l)),new t(n,r,o,{params:l,headers:c,context:d,reportProgress:a,responseType:i,withCredentials:s})}},Ws=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ws||{}),tu=class{constructor(e,n=Xh.Ok,r="OK"){this.headers=e.headers||new Ro,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},D0=class t extends tu{constructor(e={}){super(e),this.type=Ws.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qh=class t extends tu{constructor(e={}){super(e),this.type=Ws.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Yh=class extends tu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Xh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Xh||{});function w0(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var XV=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Zc)s=r;else{let l;o.headers instanceof Ro?l=o.headers:l=new Ro(o.headers);let d;o.params&&(o.params instanceof Ci?d=o.params:d=new Ci({fromObject:o.params})),s=new Zc(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=re(s).pipe(Rr(l=>this.handler.handle(l)));if(r instanceof Zc||o.observe==="events")return a;let c=a.pipe(_t(l=>l instanceof Qh));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ee(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ee(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Ci().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,w0(o,i))}post(r,i,o={}){return this.request("POST",r,w0(o,i))}put(r,i,o={}){return this.request("PUT",r,w0(o,i))}};e.\u0275fac=function(i){return new(i||e)(N(eu))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();function CA(t,e){return e(t)}function JV(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function ZV(t,e,n){return(r,i)=>ar(n,()=>e(r,o=>t(o,i)))}var eL=new q(""),C0=new q(""),tL=new q(""),nL=new q("");function rL(){let t=null;return(e,n)=>{t===null&&(t=(H(eL,{optional:!0})??[]).reduceRight(JV,CA));let r=H(Ao),i=r.add();return t(e,n).pipe(er(()=>r.remove(i)))}}var EA=(()=>{let e=class e extends eu{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=H(Ao);let o=H(nL,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(C0),...this.injector.get(tL,[])]));this.chain=o.reduceRight((s,a)=>ZV(s,a,this.injector),CA)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(er(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(N(Kh),N(Yt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();var iL=/^\)\]\}',?\n/;function oL(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var IA=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new te(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?pe(i.\u0275loadImpl()):re(null)).pipe(Re(()=>new he(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new Ro(a.getAllResponseHeaders()),B=oL(a)||r.url;return l=new D0({headers:P,status:a.status,statusText:C,url:B}),l},f=()=>{let{headers:C,status:P,statusText:B,url:U}=d(),V=null;P!==Xh.NoContent&&(V=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=V?Xh.Ok:0);let Y=P>=200&&P<300;if(r.responseType==="json"&&typeof V=="string"){let X=V;V=V.replace(iL,"");try{V=V!==""?JSON.parse(V):null}catch(E){V=X,Y&&(Y=!1,V={error:E,text:V})}}Y?(s.next(new Qh({body:V,headers:C,status:P,statusText:B,url:U||void 0})),s.complete()):s.error(new Yh({error:V,headers:C,status:P,statusText:B,url:U||void 0}))},g=C=>{let{url:P}=d(),B=new Yh({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error(B)},y=!1,I=C=>{y||(s.next(d()),y=!0);let P={type:Ws.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},A=C=>{let P={type:Ws.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),s.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",I),c!==null&&a.upload&&a.upload.addEventListener("progress",A)),a.send(c),s.next({type:Ws.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",I),c!==null&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(N(zs))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),bA=new q(""),sL="XSRF-TOKEN",aL=new q("",{providedIn:"root",factory:()=>sL}),cL="X-XSRF-TOKEN",uL=new q("",{providedIn:"root",factory:()=>cL}),Jh=class{},lL=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(N(Bt),N(Ct),N(aL))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();function dL(t,e){let n=t.url.toLowerCase();if(!H(bA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=H(Jh).getToken(),i=H(uL);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var TA=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(TA||{});function hL(t,e){return{\u0275kind:t,\u0275providers:e}}function fL(...t){let e=[XV,IA,EA,{provide:eu,useExisting:EA},{provide:Kh,useExisting:IA},{provide:C0,useValue:dL,multi:!0},{provide:bA,useValue:!0},{provide:Jh,useClass:lL}];for(let n of t)e.push(...n.\u0275providers);return fh(e)}var DA=new q("");function pL(){return hL(TA.LegacyInterceptors,[{provide:DA,useFactory:rL},{provide:C0,useExisting:DA,multi:!0}])}var AA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({providers:[fL(pL())]});let t=e;return t})();var A0=class extends qh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},S0=class t extends A0{static makeCurrent(){iA(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=gL();return n==null?null:mL(n)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gh(document.cookie,e)}},nu=null;function gL(){return nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null}function mL(t){return new URL(t,document.baseURI).pathname}var x0=class{addToWindow(e){wt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new te(5103,!1);return o},wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),wt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=wt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};wt.frameworkStabilizers||(wt.frameworkStabilizers=[]),wt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?cr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},yL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),M0=new q(""),FA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new te(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(N(M0),N(me))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),Zh=class{constructor(e){this._doc=e}},b0="ng-app-id",RA=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mo(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${b0}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(b0),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(b0,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(N(Bt),N(lh),N(My,8),N(Ct))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),T0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},R0=/%COMP%/g,PA="%COMP%",vL=`_nghost-${PA}`,_L=`_ngcontent-${PA}`,wL=!0,EL=new q("",{providedIn:"root",factory:()=>wL});function IL(t){return _L.replace(R0,t)}function DL(t){return vL.replace(R0,t)}function NA(t,e){return e.map(n=>n.replace(R0,t))}var SA=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Mo(c),this.defaultRenderer=new ru(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===rr.ShadowDom&&(i=Ie(W({},i),{encapsulation:rr.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ef?o.applyToHost(r):o instanceof iu&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case rr.Emulated:s=new ef(l,d,i,this.appId,f,a,c,g);break;case rr.ShadowDom:return new F0(l,d,r,i,a,c,this.nonce,g);default:s=new iu(l,d,i,f,a,c,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(N(FA),N(RA),N(lh),N(EL),N(Bt),N(Ct),N(me),N(My))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),ru=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(T0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(xA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(xA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=T0[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=T0[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(n,r,i&Ur.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ur.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function xA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var F0=class extends ru{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},iu=class extends ru{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?NA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ef=class extends iu{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=IL(l),this.hostAttr=DL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},CL=(()=>{let e=class e extends Zh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(N(Bt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})(),MA=["alt","control","meta","shift"],bL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},AL=(()=>{let e=class e extends Zh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),MA.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=bL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),MA.forEach(a=>{if(a!==o){let c=TL[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(N(Bt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();function SL(){S0.makeCurrent()}function xL(){return new sr}function ML(){return db(document),document}var FL=[{provide:Ct,useValue:_0},{provide:xy,useValue:SL,multi:!0},{provide:Bt,useFactory:ML,deps:[]}],UA=o0(QT,"browser",FL),RL=new q(""),PL=[{provide:Jc,useClass:x0,deps:[]},{provide:n0,useClass:xh,deps:[me,Mh,Jc]},{provide:xh,useClass:xh,deps:[me,Mh,Jc]}],NL=[{provide:ph,useValue:"root"},{provide:sr,useFactory:xL,deps:[]},{provide:M0,useClass:CL,multi:!0,deps:[Bt,me,Ct]},{provide:M0,useClass:AL,multi:!0,deps:[Bt]},SA,RA,FA,{provide:Bc,useExisting:SA},{provide:zs,useClass:yL,deps:[]},[]],kA=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:lh,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(N(RL,12))},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({providers:[...NL,...PL],imports:[gA,YT]});let t=e;return t})();var OA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(N(Bt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fe="primary",_u=Symbol("RouteTitle"),O0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Js(t){return new O0(t)}function UL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function kL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ur(t[n],e[n]))return!1;return!0}function ur(t,e){let n=t?V0(t):void 0,r=e?V0(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!WA(t[i],e[i]))return!1;return!0}function V0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function WA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function KA(t){return t.length>0?t[t.length-1]:null}function Si(t){return am(t)?t:Ei(t)?pe(Promise.resolve(t)):re(t)}var OL={exact:YA,subset:XA},QA={exact:VL,subset:LL,ignored:()=>!0};function LA(t,e,n){return OL[n.paths](t.root,e.root,n.matrixParams)&&QA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function VL(t,e){return ur(t,e)}function YA(t,e,n){if(!No(t.segments,e.segments)||!rf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!YA(t.children[r],e.children[r],n))return!1;return!0}function LL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>WA(t[n],e[n]))}function XA(t,e,n){return JA(t,e,e.segments,n)}function JA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!No(i,n)||e.hasChildren()||!rf(i,n,r))}else if(t.segments.length===n.length){if(!No(t.segments,n)||!rf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!XA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!No(t.segments,i)||!rf(t.segments,i,r)||!t.children[fe]?!1:JA(t.children[fe],e,o,r)}}function rf(t,e,n){return e.every((r,i)=>QA[n](t[i].parameters,r.parameters))}var bi=class{constructor(e=new xe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return $L.serialize(this)}},xe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return of(this)}},Po=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return e1(this)}};function BL(t,e){return No(t,e)&&t.every((n,r)=>ur(n.parameters,e[r].parameters))}function No(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function jL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===fe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==fe&&(n=n.concat(e(i,r)))}),n}var wu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new du,providedIn:"root"});let t=e;return t})(),du=class{parse(e){let n=new B0(e);return new bi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ou(e.root,!0)}`,r=zL(e.queryParams),i=typeof e.fragment=="string"?`#${qL(e.fragment)}`:"";return`${n}${r}${i}`}},$L=new du;function of(t){return t.segments.map(e=>e1(e)).join("/")}function ou(t,e){if(!t.hasChildren())return of(t);if(e){let n=t.children[fe]?ou(t.children[fe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${ou(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=jL(t,(r,i)=>i===fe?[ou(t.children[fe],!1)]:[`${i}:${ou(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[fe]!=null?`${of(t)}/${n[0]}`:`${of(t)}/(${n.join("//")})`}}function ZA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tf(t){return ZA(t).replace(/%3B/gi,";")}function qL(t){return encodeURI(t)}function L0(t){return ZA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sf(t){return decodeURIComponent(t)}function BA(t){return sf(t.replace(/\+/g,"%20"))}function e1(t){return`${L0(t.path)}${HL(t.parameters)}`}function HL(t){return Object.entries(t).map(([e,n])=>`;${L0(e)}=${L0(n)}`).join("")}function zL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${tf(n)}=${tf(i)}`).join("&"):`${tf(n)}=${tf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var GL=/^[^\/()?;#]+/;function P0(t){let e=t.match(GL);return e?e[0]:""}var WL=/^[^\/()?;=#]+/;function KL(t){let e=t.match(WL);return e?e[0]:""}var QL=/^[^=?&#]+/;function YL(t){let e=t.match(QL);return e?e[0]:""}var XL=/^[^&#]+/;function JL(t){let e=t.match(XL);return e?e[0]:""}var B0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[fe]=new xe(e,n)),r}parseSegment(){let e=P0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Po(sf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=KL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=P0(this.remaining);i&&(r=i,this.capture(r))}e[sf(n)]=sf(r)}parseQueryParam(e){let n=YL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=JL(this.remaining);s&&(r=s,this.capture(r))}let i=BA(n),o=BA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=P0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[fe]:new xe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function t1(t){return t.segments.length>0?new xe([],{[fe]:t}):t}function n1(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=n1(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new xe(t.segments,e);return ZL(n)}function ZL(t){if(t.numberOfChildren===1&&t.children[fe]){let e=t.children[fe];return new xe(t.segments.concat(e.segments),e.children)}return t}function Zs(t){return t instanceof bi}function eB(t,e,n=null,r=null){let i=r1(t);return i1(i,e,n,r)}function r1(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new xe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=t1(r);return e??i}function i1(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return N0(i,i,i,n,r);let o=tB(e);if(o.toRoot())return N0(i,i,new xe([],{}),n,r);let s=nB(o,i,t),a=s.processChildren?cu(s.segmentGroup,s.index,o.commands):s1(s.segmentGroup,s.index,o.commands);return N0(i,s.segmentGroup,a,n,r)}function af(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function hu(t){return typeof t=="object"&&t!=null&&t.outlets}function N0(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;t===e?s=n:s=o1(t,e,n);let a=t1(n1(s));return new bi(a,o,i)}function o1(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=o1(o,e,n)}),new xe(t.segments,r)}var cf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&af(r[0]))throw new te(4003,!1);let i=r.find(hu);if(i&&i!==KA(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function tB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new cf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cf(n,e,r)}var Ys=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function nB(t,e,n){if(t.isAbsolute)return new Ys(e,!0,0);if(!n)return new Ys(e,!1,NaN);if(n.parent===null)return new Ys(n,!0,0);let r=af(t.commands[0])?0:1,i=n.segments.length-1+r;return rB(n,i,t.numberOfDoubleDots)}function rB(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Ys(r,!1,i-o)}function iB(t){return hu(t[0])?t[0].outlets:{[fe]:t}}function s1(t,e,n){if(t??=new xe([],{}),t.segments.length===0&&t.hasChildren())return cu(t,e,n);let r=oB(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new xe(t.segments.slice(0,r.pathIndex),{});return o.children[fe]=new xe(t.segments.slice(r.pathIndex),t.children),cu(o,0,i)}else return r.match&&i.length===0?new xe(t.segments,{}):r.match&&!t.hasChildren()?j0(t,e,n):r.match?cu(t,0,i):j0(t,e,n)}function cu(t,e,n){if(n.length===0)return new xe(t.segments,{});{let r=iB(n),i={};if(Object.keys(r).some(o=>o!==fe)&&t.children[fe]&&t.numberOfChildren===1&&t.children[fe].segments.length===0){let o=cu(t.children[fe],e,n);return new xe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=s1(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(t.segments,i)}}function oB(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(hu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$A(c,l,s))return o;r+=2}else{if(!$A(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function j0(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(hu(o)){let c=sB(o.outlets);return new xe(r,c)}if(i===0&&af(n[0])){let c=t.segments[e];r.push(new Po(c.path,jA(n[0]))),i++;continue}let s=hu(o)?o.outlets[fe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&af(a)?(r.push(new Po(s,jA(a))),i+=2):(r.push(new Po(s,{})),i++)}return new xe(r,{})}function sB(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=j0(new xe([],{}),0,r))}),e}function jA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function $A(t,e,n){return t==n.path&&ur(e,n.parameters)}var uu="imperative",bt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(bt||{}),Tn=class{constructor(e,n){this.id=e,this.url=n}},ea=class extends Tn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=bt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lr=class extends Tn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(bn||{}),uf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(uf||{}),Ti=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ai=class extends Tn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=bt.NavigationSkipped}},fu=class extends Tn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lf=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$0=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},q0=class extends Tn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},H0=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},z0=class extends Tn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},G0=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},W0=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},K0=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Q0=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Y0=class{constructor(e){this.snapshot=e,this.type=bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},X0=class{constructor(e){this.snapshot=e,this.type=bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=bt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pu=class{},gu=class{constructor(e){this.url=e}};var J0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Eu,this.attachRef=null}},Eu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new J0,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Z0(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Z0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ev(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ev(e,this._root).map(n=>n.value)}};function Z0(t,e){if(t===e.value)return e;for(let n of e.children){let r=Z0(t,n);if(r)return r}return null}function ev(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ev(t,n);if(r.length)return r.unshift(e),r}return[]}var gn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ff=class extends hf{constructor(e,n){super(e),this.snapshot=n,lv(this,e)}toString(){return this.snapshot.toString()}};function a1(t){let e=aB(t),n=new At([new Po("",{})]),r=new At({}),i=new At({}),o=new At({}),s=new At(""),a=new qn(n,r,o,s,i,fe,t,e.root);return a.snapshot=e.root,new ff(new gn(a,[]),e)}function aB(t){let e={},n={},r={},i="",o=new mu([],e,r,i,n,fe,t,null,{});return new pf("",new gn(o,[]))}var qn=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[_u]))??re(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),t.params),data:W(W({},e.data),t.data),resolve:W(W(W(W({},t.data),e.data),i?.data),t._resolvedData)}:r={params:W({},t.params),data:W({},t.data),resolve:W(W({},t.data),t._resolvedData??{})},i&&u1(i)&&(r.resolve[_u]=i.title),r}var mu=class{get title(){return this.data?.[_u]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},pf=class extends hf{constructor(e,n){super(n),this.url=e,lv(this,n)}toString(){return c1(this._root)}};function lv(t,e){e.value._routerState=t,e.children.forEach(n=>lv(t,n))}function c1(t){let e=t.children.length>0?` { ${t.children.map(c1).join(", ")} } `:"";return`${t.value}${e}`}function U0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ur(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ur(e.params,n.params)||t.paramsSubject.next(n.params),kL(e.url,n.url)||t.urlSubject.next(n.url),ur(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tv(t,e){let n=ur(t.params,e.params)&&BL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||tv(t.parent,e.parent))}function u1(t){return typeof t.title=="string"||t.title===null}var dv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new ut,this.deactivateEvents=new ut,this.attachEvents=new ut,this.detachEvents=new ut,this.parentContexts=H(Eu),this.location=H(Hs),this.changeDetector=H(Lr),this.environmentInjector=H(Yt),this.inputBinder=H(_f,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new nv(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_i]});let t=e;return t})(),nv=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===qn?this.route:e===Eu?this.childContexts:this.parent.get(e,n)}},_f=new q(""),qA=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=xc([i.queryParams,i.params,i.data]).pipe(Re(([s,a,c],l)=>(c=W(W(W({},s),a),c),l===0?re(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=XT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();function cB(t,e,n){let r=yu(t,e._root,n?n._root:void 0);return new ff(r,e)}function yu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=uB(t,e,n);return new gn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yu(t,a)),s}}let r=lB(e.value),i=e.children.map(o=>yu(t,o));return new gn(r,i)}}function uB(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return yu(t,r,i);return yu(t,r)})}function lB(t){return new qn(new At(t.url),new At(t.params),new At(t.queryParams),new At(t.fragment),new At(t.data),t.outlet,t.component,t)}var l1="ngNavigationCancelingError";function d1(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Zs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=h1(!1,bn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function h1(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[l1]=!0,n.cancellationCode=e,n}function dB(t){return f1(t)&&Zs(t.url)}function f1(t){return!!t&&t[l1]}var hB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["ng-component"]],standalone:!0,features:[UT],decls:1,vars:0,template:function(i,o){i&1&&jn(0,"router-outlet")},dependencies:[dv],encapsulation:2});let t=e;return t})();function fB(t,e){return t.providers&&!t._injector&&(t._injector=Dh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function hv(t){let e=t.children&&t.children.map(hv),n=e?Ie(W({},t),{children:e}):W({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==fe&&(n.component=hB),n}function dr(t){return t.outlet||fe}function pB(t,e){let n=t.filter(r=>dr(r)===e);return n.push(...t.filter(r=>dr(r)!==e)),n}function Iu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var gB=(t,e,n,r)=>ee(i=>(new rv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),rv=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),U0(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Qs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Qs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new X0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Q0(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(U0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),U0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Iu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},gf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xs=class{constructor(e,n){this.component=e,this.route=n}};function mB(t,e,n){let r=t._root,i=e?e._root:null;return su(r,i,n,[r.value])}function yB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function na(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hb(t)?t:e.get(t):r}function su(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qs(e);return t.children.forEach(s=>{vB(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lu(a,n.getContext(s),i)),i}function vB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_B(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new gf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?su(t,e,a?a.children:null,r,i):su(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xs(a.outlet.component,s))}else s&&lu(e,a,i),i.canActivateChecks.push(new gf(r)),o.component?su(t,null,a?a.children:null,r,i):su(t,null,n,r,i);return i}function _B(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!No(t.url,e.url);case"pathParamsOrQueryParamsChange":return!No(t.url,e.url)||!ur(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tv(t,e)||!ur(t.queryParams,e.queryParams);case"paramsChange":default:return!tv(t,e)}}function lu(t,e,n){let r=Qs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lu(s,e.children.getContext(o),n):lu(s,null,n):lu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Xs(e.outlet.component,i)):n.canDeactivateChecks.push(new Xs(null,i)):n.canDeactivateChecks.push(new Xs(null,i))}function Du(t){return typeof t=="function"}function wB(t){return typeof t=="boolean"}function EB(t){return t&&Du(t.canLoad)}function IB(t){return t&&Du(t.canActivate)}function DB(t){return t&&Du(t.canActivateChild)}function CB(t){return t&&Du(t.canDeactivate)}function bB(t){return t&&Du(t.canMatch)}function p1(t){return t instanceof Fr||t?.name==="EmptyError"}var nf=Symbol("INITIAL_VALUE");function ta(){return Re(t=>xc(t.map(e=>e.pipe(Pr(1),fo(nf)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===nf)return nf;if(n===!1||n instanceof bi)return n}return!0}),_t(e=>e!==nf),Pr(1)))}function TB(t,e){return ct(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?re(Ie(W({},n),{guardsResult:!0})):AB(s,r,i,t).pipe(ct(a=>a&&wB(a)?SB(r,o,t,e):re(a)),ee(a=>Ie(W({},n),{guardsResult:a})))})}function AB(t,e,n,r){return pe(t).pipe(ct(i=>PB(i.component,i.route,n,e,r)),_n(i=>i!==!0,!0))}function SB(t,e,n,r){return pe(e).pipe(Rr(i=>Cs(MB(i.route.parent,r),xB(i.route,r),RB(t,i.path,n),FB(t,i.route,n))),_n(i=>i!==!0,!0))}function xB(t,e){return t!==null&&e&&e(new Y0(t)),re(!0)}function MB(t,e){return t!==null&&e&&e(new K0(t)),re(!0)}function FB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>vd(()=>{let s=Iu(e)??n,a=na(o,s),c=IB(a)?a.canActivate(e,t):ar(s,()=>a(e,t));return Si(c).pipe(_n())}));return re(i).pipe(ta())}function RB(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>yB(s)).filter(s=>s!==null).map(s=>vd(()=>{let a=s.guards.map(c=>{let l=Iu(s.node)??n,d=na(c,l),f=DB(d)?d.canActivateChild(r,t):ar(l,()=>d(r,t));return Si(f).pipe(_n())});return re(a).pipe(ta())}));return re(o).pipe(ta())}function PB(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=Iu(e)??i,l=na(a,c),d=CB(l)?l.canDeactivate(t,e,n,r):ar(c,()=>l(t,e,n,r));return Si(d).pipe(_n())});return re(s).pipe(ta())}function NB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let a=na(s,t),c=EB(a)?a.canLoad(e,n):ar(t,()=>a(e,n));return Si(c)});return re(o).pipe(ta(),g1(r))}function g1(t){return tm(Qe(e=>{if(Zs(e))throw d1(t,e)}),ee(e=>e===!0))}function UB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let a=na(s,t),c=bB(a)?a.canMatch(e,n):ar(t,()=>a(e,n));return Si(c)});return re(o).pipe(ta(),g1(r))}var vu=class{constructor(e){this.segmentGroup=e||null}},mf=class extends Error{constructor(e){super(),this.urlTree=e}};function Ks(t){return Ds(new vu(t))}function kB(t){return Ds(new te(4e3,!1))}function OB(t){return Ds(h1(!1,bn.GuardRejected))}var iv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[fe])return kB(e.redirectTo);i=i.children[fe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new mf(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new bi(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new xe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},ov={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VB(t,e,n,r,i){let o=fv(t,e,n);return o.matched?(r=fB(e,r),UB(r,e,n,i).pipe(ee(s=>s===!0?o:W({},ov)))):re(o)}function fv(t,e,n){if(e.path==="**")return LB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?W({},ov):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||UL)(n,t,e);if(!i)return W({},ov);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function LB(t){return{matched:!0,parameters:t.length>0?KA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function HA(t,e,n,r){return n.length>0&&$B(t,n,r)?{segmentGroup:new xe(e,jB(r,new xe(n,t.children))),slicedSegments:[]}:n.length===0&&qB(t,n,r)?{segmentGroup:new xe(t.segments,BB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new xe(t.segments,t.children),slicedSegments:n}}function BB(t,e,n,r){let i={};for(let o of n)if(wf(t,e,o)&&!r[dr(o)]){let s=new xe([],{});i[dr(o)]=s}return W(W({},r),i)}function jB(t,e){let n={};n[fe]=e;for(let r of t)if(r.path===""&&dr(r)!==fe){let i=new xe([],{});n[dr(r)]=i}return n}function $B(t,e,n){return n.some(r=>wf(t,e,r)&&dr(r)!==fe)}function qB(t,e,n){return n.some(r=>wf(t,e,r))}function wf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function HB(t,e,n,r){return dr(t)!==r&&(r===fe||!wf(e,n,t))?!1:fv(e,t,n).matched}function zB(t,e,n){return e.length===0&&!t.children[n]}var sv=class{};function GB(t,e,n,r,i,o,s="emptyOnly"){return new av(t,e,n,r,i,s,o).recognize()}var WB=31,av=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new iv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=HA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let r=new mu([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,{},fe,this.rootComponentType,null,{}),i=new gn(r,n),o=new pf("",i),s=eB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(ui(r=>{if(r instanceof mf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=uv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ee(o=>o instanceof gn?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return pe(i).pipe(Rr(o=>{let s=r.children[o],a=pB(n,o);return this.processSegmentGroup(e,a,s,o)}),ho((o,s)=>(o.push(...s),o)),li(null),fm(),ct(o=>{if(o===null)return Ks(r);let s=m1(o);return KB(s),re(s)}))}processSegment(e,n,r,i,o,s){return pe(n).pipe(Rr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(ui(c=>{if(c instanceof vu)return re(null);throw c}))),_n(a=>!!a),ui(a=>{if(p1(a))return zB(r,i,o)?re(new sv):Ks(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return HB(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ks(i):Ks(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=fv(n,i,o);if(!a)return Ks(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(ct(g=>this.processSegment(e,r,n,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=VB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Re(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Re(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new mu(d,g,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,YB(r),dr(r),r.component??r._loadedComponent??null,r,XB(r)),{segmentGroup:I,slicedSegments:A}=HA(n,d,f,c);if(A.length===0&&I.hasChildren())return this.processChildren(l,c,I).pipe(ee(P=>P===null?null:new gn(y,P)));if(c.length===0&&A.length===0)return re(new gn(y,[]));let C=dr(r)===o;return this.processSegment(l,c,I,A,C?fe:o,!0).pipe(ee(P=>new gn(y,P instanceof gn?[P]:[])))}))):Ks(n)))}getChildConfig(e,n,r){return n.children?re({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?re({routes:n._loadedRoutes,injector:n._loadedInjector}):NB(e,n,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,n).pipe(Qe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):OB(n))):re({routes:[],injector:e})}};function KB(t){t.sort((e,n)=>e.value.outlet===fe?-1:n.value.outlet===fe?1:e.value.outlet.localeCompare(n.value.outlet))}function QB(t){let e=t.value.routeConfig;return e&&e.path===""}function m1(t){let e=[],n=new Set;for(let r of t){if(!QB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=m1(r.children);e.push(new gn(r.value,i))}return e.filter(r=>!n.has(r))}function YB(t){return t.data||{}}function XB(t){return t.resolve||{}}function JB(t,e,n,r,i,o){return ct(s=>GB(t,e,n,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:c})=>Ie(W({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function ZB(t,e){return ct(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return re(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of y1(c))s.add(l);let a=0;return pe(s).pipe(Rr(c=>o.has(c)?ej(c,r,t,e):(c.data=uv(c,c.parent,t).resolve,re(void 0))),Qe(()=>a++),bs(1),ct(c=>a===s.size?re(n):on))})}function y1(t){let e=t.children.map(n=>y1(n)).flat();return[t,...e]}function ej(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!u1(i)&&(o[_u]=i.title),tj(o,t,e,r).pipe(ee(s=>(t._resolvedData=s,t.data=uv(t,t.parent,n).resolve,null)))}function tj(t,e,n,r){let i=V0(t);if(i.length===0)return re({});let o={};return pe(i).pipe(ct(s=>nj(t[s],e,n,r).pipe(_n(),Qe(a=>{o[s]=a}))),bs(1),dm(o),ui(s=>p1(s)?on:Ds(s)))}function nj(t,e,n,r){let i=Iu(e)??r,o=na(t,i),s=o.resolve?o.resolve(e,n):ar(i,()=>o(e,n));return Si(s)}function k0(t){return Re(e=>{let n=t(e);return n?pe(n).pipe(ee(()=>e)):re(e)})}var v1=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===fe);return i}getResolvedTitleForRoute(r){return r.data[_u]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(rj),providedIn:"root"});let t=e;return t})(),rj=(()=>{let e=class e extends v1{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(N(OA))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cu=new q("",{providedIn:"root",factory:()=>({})}),yf=new q(""),pv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Ph)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Si(r.loadComponent()).pipe(ee(_1),Qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),er(()=>{this.componentLoaders.delete(r)})),o=new _s(i,()=>new at).pipe(vs());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ij(i,this.compiler,r,this.onLoadEndListener).pipe(er(()=>{this.childrenLoaders.delete(i)})),a=new _s(s,()=>new at).pipe(vs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ij(t,e,n,r){return Si(t.loadChildren()).pipe(ee(_1),ct(i=>i instanceof jc||Array.isArray(i)?re(i):pe(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(yf,[],{optional:!0,self:!0}).flat()),{routes:s.map(hv),injector:o}}))}function oj(t){return t&&typeof t=="object"&&"default"in t}function _1(t){return oj(t)?t.default:t}var gv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(sj),providedIn:"root"});let t=e;return t})(),sj=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),w1=new q(""),E1=new q("");function aj(t,e,n){let r=t.get(E1),i=t.get(Bt);return t.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),cj(t))),{onViewTransitionCreated:c}=r;return c&&ar(t,()=>c({transition:a,from:e,to:n})),s})}function cj(t){return new Promise(e=>{Jy(e,{injector:t})})}var mv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=H(pv),this.environmentInjector=H(Yt),this.urlSerializer=H(wu),this.rootContexts=H(Eu),this.location=H(Gs),this.inputBindingEnabled=H(_f,{optional:!0})!==null,this.titleStrategy=H(v1),this.options=H(Cu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(gv),this.createViewTransition=H(w1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null;let r=o=>this.events.next(new G0(o)),i=o=>this.events.next(new W0(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ie(W(W({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new At({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:uu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(s=>s.id!==0),ee(s=>Ie(W({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Re(s=>{this.currentTransition=s;let a=!1,c=!1;return re(s).pipe(Qe(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Re(l=>{let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Ai(l.id,this.urlSerializer.serialize(l.rawUrl),g,uf.IgnoredSameUrlNavigation)),l.resolve(null),on}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return re(l).pipe(Re(g=>{let y=this.transitions?.getValue();return this.events.next(new ea(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?on:Promise.resolve(g)}),JB(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Qe(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ie(W({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new lf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:I,restoredState:A,extras:C}=l,P=new ea(g,this.urlSerializer.serialize(y),I,A);this.events.next(P);let B=a1(this.rootComponentType).snapshot;return this.currentTransition=s=Ie(W({},l),{targetSnapshot:B,urlAfterRedirects:y,extras:Ie(W({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,re(s)}else{let g="";return this.events.next(new Ai(l.id,this.urlSerializer.serialize(l.extractedUrl),g,uf.IgnoredByUrlHandlingStrategy)),l.resolve(null),on}}),Qe(l=>{let d=new $0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ee(l=>(this.currentTransition=s=Ie(W({},l),{guards:mB(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),TB(this.environmentInjector,l=>this.events.next(l)),Qe(l=>{if(s.guardsResult=l.guardsResult,Zs(l.guardsResult))throw d1(this.urlSerializer,l.guardsResult);let d=new q0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),_t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",bn.GuardRejected),!1)),k0(l=>{if(l.guards.canActivateChecks.length)return re(l).pipe(Qe(d=>{let f=new H0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Re(d=>{let f=!1;return re(d).pipe(ZB(this.paramsInheritanceStrategy,this.environmentInjector),Qe({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",bn.NoDataFromResolver)}}))}),Qe(d=>{let f=new z0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),k0(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Qe(y=>{f.component=y}),ee(()=>{})));for(let y of f.children)g.push(...d(y));return g};return xc(d(l.targetSnapshot.root)).pipe(li(null),Pr(1))}),k0(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?pe(f).pipe(ee(()=>s)):re(s)}),ee(l=>{let d=cB(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ie(W({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Qe(()=>{this.events.next(new pu)}),gB(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Pr(1),Qe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),gm(this.transitionAbortSubject.pipe(Qe(l=>{throw l}))),er(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",bn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ui(l=>{if(c=!0,f1(l))this.events.next(new Ti(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),dB(l)?this.events.next(new gu(l.url)):s.resolve(!1);else{this.events.next(new fu(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return on}))}))}cancelNavigationTransition(r,i,o){let s=new Ti(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uj(t){return t!==uu}var lj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(dj),providedIn:"root"});let t=e;return t})(),cv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},dj=(()=>{let e=class e extends cv{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qs(e)))(o||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),I1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>H(hj),providedIn:"root"});let t=e;return t})(),hj=(()=>{let e=class e extends I1{constructor(){super(...arguments),this.location=H(Gs),this.urlSerializer=H(wu),this.options=H(Cu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(gv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=a1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ea)this.stateMemento=this.createStateMemento();else if(r instanceof Ai)this.rawUrlTree=i.initialUrl;else if(r instanceof lf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof pu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ti&&(r.code===bn.GuardRejected||r.code===bn.NoDataFromResolver)?this.restoreHistory(i):r instanceof fu?this.restoreHistory(i,!0):r instanceof lr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=W(W({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=W(W({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qs(e)))(o||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),au=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(au||{});function D1(t,e){t.events.pipe(_t(n=>n instanceof lr||n instanceof Ti||n instanceof fu||n instanceof Ai),ee(n=>n instanceof lr||n instanceof Ai?au.COMPLETE:(n instanceof Ti?n.code===bn.Redirect||n.code===bn.SupersededByNewNavigation:!1)?au.REDIRECTING:au.FAILED),_t(n=>n!==au.REDIRECTING),Pr(1)).subscribe(()=>{e()})}function fj(t){throw t}var pj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=H(Sh),this.stateManager=H(I1),this.options=H(Cu,{optional:!0})||{},this.pendingTasks=H(Ao),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(mv),this.urlSerializer=H(wu),this.location=H(Gs),this.urlHandlingStrategy=H(gv),this._events=new at,this.errorHandler=this.options.errorHandler||fj,this.navigated=!1,this.routeReuseStrategy=H(lj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(yf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(_f,{optional:!0}),this.eventsSubscription=new et,this.isNgZoneEnabled=H(me)instanceof me&&me.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ti&&i.code!==bn.Redirect&&i.code!==bn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof lr)this.navigated=!0;else if(i instanceof gu){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||uj(o.source)};this.scheduleNavigation(a,uu,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}yj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=W({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(hv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=W(W({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=r1(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),g=this.currentUrlTree.root}return i1(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Zs(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,uu,null,i)}navigate(r,i={skipLocationChange:!1}){return mj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=W({},pj):i===!1?o=W({},gj):o=i,Zs(r))return LA(this.currentUrlTree,r,o);let s=this.parseUrl(r);return LA(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{c=g,l=y});let f=this.pendingTasks.add();return D1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new te(4008,!1)}function yj(t){return!(t instanceof pu)&&!(t instanceof gu)}var Ef=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new at,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:zb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(J(pt),J(qn),Vy("tabindex"),J(To),J(vi),J(zr))},e.\u0275dir=St({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&nt("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Yc("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Vt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ii],skipLocationChange:[Vt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ii],replaceUrl:[Vt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ii],routerLink:"routerLink"},standalone:!0,features:[e0,_i]});let t=e;return t})();var vf=class{};var vj=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_t(r=>r instanceof lr),Rr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Dh(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return pe(o).pipe(ci())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=re(null);let s=o.pipe(ct(a=>a===null?re(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return pe([s,a]).pipe(ci())}else return s})}};e.\u0275fac=function(i){return new(i||e)(N(pt),N(Ph),N(Yt),N(vf),N(pv))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),C1=new q(""),_j=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ea?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof lr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ai&&r.code===uf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof df&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new df(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){iT()},e.\u0275prov=K({token:e,factory:e.\u0275fac});let t=e;return t})();function wj(t){return t.routerState.root}function bu(t,e){return{\u0275kind:t,\u0275providers:e}}function Ej(){let t=H(Bn);return e=>{let n=t.get(xo);if(e!==n.components[0])return;let r=t.get(pt),i=t.get(b1);t.get(yv)===1&&r.initialNavigation(),t.get(T1,null,ge.Optional)?.setUpPreloading(),t.get(C1,null,ge.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var b1=new q("",{factory:()=>new at}),yv=new q("",{providedIn:"root",factory:()=>1});function Ij(){return bu(2,[{provide:yv,useValue:0},{provide:Fh,multi:!0,deps:[Bn],useFactory:e=>{let n=e.get(oA,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(pt),o=e.get(b1);D1(i,()=>{r(!0)}),e.get(mv).afterPreactivation=()=>(r(!0),o.closed?re(void 0):o),i.initialNavigation()}))}}])}function Dj(){return bu(3,[{provide:Fh,multi:!0,useFactory:()=>{let e=H(pt);return()=>{e.setUpLocationChangeListener()}}},{provide:yv,useValue:2}])}var T1=new q("");function Cj(t){return bu(0,[{provide:T1,useExisting:vj},{provide:vf,useExisting:t}])}function bj(){return bu(8,[qA,{provide:_f,useExisting:qA}])}function Tj(t){let e=[{provide:w1,useValue:aj},{provide:E1,useValue:W({skipNextTransition:!!t?.skipInitialTransition},t)}];return bu(9,e)}var zA=new q("ROUTER_FORROOT_GUARD"),Aj=[Gs,{provide:wu,useClass:du},pt,Eu,{provide:qn,useFactory:wj,deps:[pt]},pv,[]],Tu=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Aj,[],{provide:yf,multi:!0,useValue:r},{provide:zA,useFactory:Fj,deps:[[pt,new $s,new Py]]},{provide:Cu,useValue:i||{}},i?.useHash?xj():Mj(),Sj(),i?.preloadingStrategy?Cj(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Rj(i):[],i?.bindToComponentInputs?bj().\u0275providers:[],i?.enableViewTransitions?Tj().\u0275providers:[],Pj()]}}static forChild(r){return{ngModule:e,providers:[{provide:yf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(N(zA,8))},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({});let t=e;return t})();function Sj(){return{provide:C1,useFactory:()=>{let t=H(mA),e=H(me),n=H(Cu),r=H(mv),i=H(wu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new _j(i,r,t,e,n)}}}function xj(){return{provide:zr,useClass:aA}}function Mj(){return{provide:zr,useClass:v0}}function Fj(t){return"guarded"}function Rj(t){return[t.initialNavigation==="disabled"?Dj().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Ij().\u0275providers:[]]}var GA=new q("");function Pj(){return[{provide:GA,useFactory:Ej},{provide:Rh,multi:!0,useExisting:GA}]}var Nj="firebase",Uj="10.14.1";Rn(Nj,Uj,"app");var ra=new kr("ANGULARFIRE2_VERSION");var kj=(t,e)=>{let n=e?[e]:wD(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gr=class{constructor(){return kj(Oj)}},Oj="app-check";function vv(){}var If=class{zone;delegate;constructor(e,n=om){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},_v=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vv,{},vv,vv)),n.pipe(Qe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ia=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new If(Zone.current)),this.insideAngular=n.run(()=>new If(Zone.current,lo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(N(me))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function A1(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function wv(t){return t.pipe(dn(A1().outsideAngular))}function xt(t){return Vj(A1())(t)}function Vj(t){return function(n){return n=n.lift(new _v(t.ngZone)),n.pipe(Nn(t.outsideAngular),dn(t.insideAngular))}}var Lj=new Map,Bj={activated:!1,tokenObservers:[]},jj={initialized:!1,enabled:!1};function Hn(t){return Lj.get(t)||Object.assign({},Bj)}function N1(){return jj}var $j="https://content-firebaseappcheck.googleapis.com/v1";var qj="exchangeDebugToken",S1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},UK=24*60*60*1e3;var Dv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new $g,this.pending.promise.catch(n=>{}),yield Hj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $g,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Hj(t){return new Promise(e=>{setTimeout(e,t)})}var zj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mi=new _D("appCheck","AppCheck",zj);function U1(t){if(!Hn(t).activated)throw Mi.create("use-before-activation",{appName:t.name})}function k1(r,i){return M(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(y){throw Mi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Mi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Mi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function O1(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$j}/projects/${n}/apps/${r}:${qj}?key=${i}`,body:{debug_token:e}}}var Gj="firebase-app-check-database",Wj=1,Cv="firebase-app-check-store";var Df=null;function Kj(){return Df||(Df=new Promise((t,e)=>{try{let n=indexedDB.open(Gj,Wj);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Mi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Cv,{keyPath:"compositeKey"})}}}catch(n){e(Mi.create("storage-open",{originalErrorMessage:n?.message}))}}),Df)}function Qj(t,e){return Yj(Xj(t),e)}function Yj(t,e){return M(this,null,function*(){let r=(yield Kj()).transaction(Cv,"readwrite"),o=r.objectStore(Cv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Mi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Xj(t){return`${t.options.appId}-${t.name}`}var bv=new Gl("@firebase/app-check");function Iv(t,e){return Hl()?Qj(t,e).catch(n=>{bv.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function V1(){return N1().enabled}function L1(){return M(this,null,function*(){let t=N1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Jj={error:"UNKNOWN_ERROR"};function Zj(t){return vD.encodeString(JSON.stringify(t),!1)}function Tv(t,e=!1){return M(this,null,function*(){let n=t.app;U1(n);let r=Hn(n),i=r.token,o;if(i&&!Au(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Au(c)?i=c:yield Iv(n,void 0))}if(!e&&i&&Au(i))return{token:i.token};let s=!1;if(V1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=k1(O1(n,yield L1()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Iv(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Hn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?bv.warn(c.message):bv.error(c),o=c}let a;return i?o?Au(i)?a={token:i.token,internalError:o}:a=M1(o):(a={token:i.token},r.token=i,yield Iv(n,i)):a=M1(o),s&&r3(n,a),a})}function e3(t){return M(this,null,function*(){let e=t.app;U1(e);let{provider:n}=Hn(e);if(V1()){let r=yield L1(),{token:i}=yield k1(O1(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function t3(t,e,n,r){let{app:i}=t,o=Hn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Au(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),x1(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>x1(t))}function B1(t,e){let n=Hn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function x1(t){let{app:e}=t,n=Hn(e),r=n.tokenRefresher;r||(r=n3(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function n3(t){let{app:e}=t;return new Dv(()=>M(this,null,function*(){let n=Hn(e),r;if(n.token?r=yield Tv(t,!0):r=yield Tv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Hn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},S1.RETRIAL_MIN_WAIT,S1.RETRIAL_MAX_WAIT)}function r3(t,e){let n=Hn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Au(t){return t.expireTimeMillis-Date.now()>0}function M1(t){return{token:Zj(Jj),error:t}}var Av=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Hn(this.app);for(let n of e)B1(this.app,n.next);return Promise.resolve()}};function i3(t,e){return new Av(t,e)}function o3(t){return{getToken:e=>Tv(t,e),getLimitedUseToken:()=>e3(t),addTokenListener:e=>t3(t,"INTERNAL",e),removeTokenListener:e=>B1(t.app,e)}}var s3="@firebase/app-check",a3="0.8.8";var c3="app-check",F1="app-check-internal";function u3(){so(new Fn(c3,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return i3(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(F1).initialize()})),so(new Fn(F1,t=>{let e=t.getProvider("app-check").getImmediate();return o3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(s3,a3)}u3();var l3=["localhost","0.0.0.0","127.0.0.1"],WK=typeof window<"u"&&l3.includes(window.location.hostname);var d3="firebase",h3="10.14.1";Ot.registerVersion(d3,h3,"app-compat");var f3=["ngOnDestroy"],$1=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(f3.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Cf=class{constructor(e){return e}},Fi=new q("angularfire2.app.options"),Ri=new q("angularfire2.app.name");function Uo(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Ot.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ot.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;p3("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Cf(s)}var p3=(t,...e)=>{s0()&&typeof console<"u"&&console[t](...e)},g3={provide:Cf,useFactory:Uo,deps:[Fi,me,[new $s,Ri]]},q1=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Fi,useValue:n},{provide:Ri,useValue:r}]}}constructor(n){Ot.registerVersion("angularfire",ra.full,"core"),Ot.registerVersion("angularfire",ra.full,"app-compat"),Ot.registerVersion("angular",$T.full,n.toString())}static \u0275fac=function(r){return new(r||t)(N(Ct))};static \u0275mod=Ye({type:t});static \u0275inj=Xe({providers:[g3]})}return t})();function oa(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return m3(i,s)||(j1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${y3?" You may need to reload as Firebase is not HMR aware.":""}`),j1("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function m3(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var y3=typeof module<"u"&&!!module.hot,j1=(t,...e)=>{s0()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var xv=new q("angularfire2.auth.use-emulator"),Mv=new q("angularfire2.auth.settings"),Fv=new q("angularfire2.auth.tenant-id"),Rv=new q("angularfire2.auth.langugage-code"),Pv=new q("angularfire2.auth.use-device-language"),Nv=new q("angularfire.auth.persistence"),Uv=(t,e,n,r,i,o,s,a)=>oa(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),sa=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,d,f,g,y){let I=new at,A=re(void 0).pipe(dn(s.outsideAngular),Re(()=>o.runOutsideAngular(()=>import("./chunk-77IDRPS7.js"))),ee(()=>Uo(n,o,r)),ee(C=>Uv(C,o,a,l,d,f,c,g)),wd({bufferSize:1,refCount:!1}));if(Mo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=re(null);else{A.pipe(_n()).subscribe();let C=A.pipe(Re(U=>U.getRedirectResult().then(V=>V,()=>null)),xt,wd({bufferSize:1,refCount:!1})),P=A.pipe(Re(U=>new he(V=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(Y=>V.next(Y),Y=>V.error(Y),()=>V.complete()))})))),B=A.pipe(Re(U=>new he(V=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(Y=>V.next(Y),Y=>V.error(Y),()=>V.complete()))}))));this.authState=C.pipe(Ed(P),Nn(s.outsideAngular),dn(s.insideAngular)),this.user=C.pipe(Ed(B),Nn(s.outsideAngular),dn(s.insideAngular)),this.idToken=this.user.pipe(Re(U=>U?pe(U.getIdToken()):re(null))),this.idTokenResult=this.user.pipe(Re(U=>U?pe(U.getIdTokenResult()):re(null))),this.credential=um(C,I,this.authState.pipe(_t(U=>!U))).pipe(ee(U=>U?.user?U:null),Nn(s.outsideAngular),dn(s.insideAngular))}return $1(this,A,o,{spy:{apply:(C,P,B)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&B.then(U=>I.next(U))}}})}static \u0275fac=function(r){return new(r||t)(N(Fi),N(Ri,8),N(Ct),N(me),N(ia),N(xv,8),N(Mv,8),N(Fv,8),N(Rv,8),N(Pv,8),N(Nv,8),N(Gr,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();function v3(t,e){t&1&&(L(0,"div",9),Z(1,"Create"),j())}function _3(t,e){t&1&&(L(0,"div",10),Z(1,"Register"),j())}function w3(t,e){t&1&&(L(0,"div",11),Z(1,"Login"),j())}function E3(t,e){if(t&1&&(L(0,"div",12)(1,"span"),Z(2),j()()),t&2){let n=fn();oe(2),Jt("Hello, ",n.userEmail,"")}}function I3(t,e){t&1&&(L(0,"div")(1,"span"),Z(2,"Hello, Guest"),j()())}function D3(t,e){if(t&1){let n=bh();L(0,"div",13),nt("click",function(){Hc(n);let i=fn();return zc(i.logout())}),Z(1,"Sign Out"),j()}}var H1=(()=>{let e=class e{constructor(r,i){this.fireauth=r,this.router=i,this.userEmail=null,this.isLoggedIn=!1}ngOnInit(){this.fireauth.authState.subscribe(r=>{r?(this.userEmail=r.email,this.isLoggedIn=!0):(this.userEmail=null,this.isLoggedIn=!1)})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),localStorage.removeItem("currentUser"),localStorage.removeItem("userInfo"),alert("You are logged out"),this.router.navigate(["/"])},r=>{alert(r.message)})}};e.\u0275fac=function(i){return new(i||e)(J(sa),J(pt))},e.\u0275cmp=$e({type:e,selectors:[["app-navigation"]],decls:11,vars:6,consts:[["id","wrapper"],["routerLink","/",1,"nav-btn"],["routerLink","/catalog",1,"nav-btn"],["class","nav-btn","routerLink","/create",4,"ngIf"],["class","nav-btn","routerLink","/register",4,"ngIf"],["class","nav-btn","routerLink","/login",4,"ngIf"],["class","nav-btn","routerLink","/profile",4,"ngIf"],[4,"ngIf"],["class","nav-btn",3,"click",4,"ngIf"],["routerLink","/create",1,"nav-btn"],["routerLink","/register",1,"nav-btn"],["routerLink","/login",1,"nav-btn"],["routerLink","/profile",1,"nav-btn"],[1,"nav-btn",3,"click"]],template:function(i,o){i&1&&(L(0,"nav",0)(1,"div",1),Z(2,"Home"),j(),L(3,"div",2),Z(4,"Catalog"),j(),hn(5,v3,2,0,"div",3)(6,_3,2,0,"div",4)(7,w3,2,0,"div",5)(8,E3,3,1,"div",6)(9,I3,3,0,"div",7)(10,D3,2,0,"div",8),j()),i&2&&(oe(5),Je("ngIf",o.userEmail),oe(),Je("ngIf",!o.userEmail),oe(),Je("ngIf",!o.userEmail),oe(),Je("ngIf",o.userEmail),oe(),Je("ngIf",!o.userEmail),oe(),Je("ngIf",o.userEmail))},dependencies:[Di,Ef],styles:['@font-face{font-family:Emilys Candy;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/emilyscandy/v19/2EbgL-1mD1Rnb0OGKudbk0yJptZqb84.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Emilys Candy;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/emilyscandy/v19/2EbgL-1mD1Rnb0OGKudbk0yJqNZq.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalnia Glaze;font-style:normal;font-weight:100 700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/kalniaglaze/v1/wlpjgwHCBUNjrGrfu-hwowN1YyC-42Lu26VHf2LtEEIAhqSP.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalnia Glaze;font-style:normal;font-weight:100 700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/kalniaglaze/v1/wlpjgwHCBUNjrGrfu-hwowN1YyC-42Lu26VHf2LtEEwAhg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-kalniaglaze:none}#wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;font-size:55px;left:0;right:0;gap:30px;font-family:Emilys Candy,serif;font-weight:600;font-style:normal;color:#00008b;text-shadow:3px 3px white}#wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{scale:1.2;cursor:pointer}img[_ngcontent-%COMP%]{margin-top:16px;width:60px;height:60px}']});let t=e;return t})();var z1=(()=>{let e=class e{constructor(){this.title="my-first-app"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","wrapper"]],template:function(i,o){i&1&&(L(0,"div",0),jn(1,"app-navigation")(2,"router-outlet"),j())},dependencies:[dv,H1],styles:["#wrapper[_ngcontent-%COMP%]{margin:0;padding:0}"]});let t=e;return t})();var G1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-home"]],decls:9,vars:0,consts:[[1,"home"],[1,"home-container"],[1,"text"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),Z(4,"Welcome to FitBuddy"),jn(5,"br"),Z(6," Your Source for Premium Fitness Appliances"),j(),L(7,"p"),Z(8,"Browse our collection now and take the first step towards a healthier, fitter you. With premium fitness appliances from FitBuddy, you can turn your home gym dreams into reality. Let's make your fitness goals a reality together!"),j()()()())},styles:['.home-container[_ngcontent-%COMP%]{background-image:url("./media/Fitness_gym_image_16_9-KR3H2XIE.png");background-size:cover;background-position:center;background-repeat:no-repeat;width:100vw;height:100vh;text-align:center;display:flex;align-items:center;justify-content:center;flex-direction:column;font-family:Roboto Slab,serif;color:#f5f5f5;text-shadow:2px 2px black}.home-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50vw;font-size:18px}.text[_ngcontent-%COMP%]{background-color:#020406cc;padding:20px;border-radius:20px;box-shadow:3px 3px #000}']});let t=e;return t})();var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K1={};var Pi,Ov;(function(){var t;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(D,b,S){for(var w=Array(arguments.length-2),Ar=2;Ar<arguments.length;Ar++)w[Ar-2]=arguments[Ar];return v.prototype[b].apply(D,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var D=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)D[b]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(b=0;16>b;++b)D[b]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],b=E.g[2];var S=E.g[3],w=v+(S^_&(b^S))+D[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=S+(b^v&(_^b))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(_^S&(v^_))+D[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=_+(v^b&(S^v))+D[3]+3250441966&4294967295,_=b+(w<<22&4294967295|w>>>10),w=v+(S^_&(b^S))+D[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(b^v&(_^b))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(_^S&(v^_))+D[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=_+(v^b&(S^v))+D[7]+4249261313&4294967295,_=b+(w<<22&4294967295|w>>>10),w=v+(S^_&(b^S))+D[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(b^v&(_^b))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(_^S&(v^_))+D[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=_+(v^b&(S^v))+D[11]+2304563134&4294967295,_=b+(w<<22&4294967295|w>>>10),w=v+(S^_&(b^S))+D[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(b^v&(_^b))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(_^S&(v^_))+D[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=_+(v^b&(S^v))+D[15]+1236535329&4294967295,_=b+(w<<22&4294967295|w>>>10),w=v+(b^S&(_^b))+D[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^b&(v^_))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^_&(S^v))+D[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(b^S))+D[0]+3921069994&4294967295,_=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(_^b))+D[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^b&(v^_))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^_&(S^v))+D[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(b^S))+D[4]+3889429448&4294967295,_=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(_^b))+D[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^b&(v^_))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^_&(S^v))+D[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(b^S))+D[8]+1163531501&4294967295,_=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(_^b))+D[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^b&(v^_))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^_&(S^v))+D[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(b^S))+D[12]+2368359562&4294967295,_=b+(w<<20&4294967295|w>>>12),w=v+(_^b^S)+D[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^b)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^_)+D[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=_+(b^S^v)+D[14]+4259657740&4294967295,_=b+(w<<23&4294967295|w>>>9),w=v+(_^b^S)+D[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^b)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^_)+D[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=_+(b^S^v)+D[10]+3200236656&4294967295,_=b+(w<<23&4294967295|w>>>9),w=v+(_^b^S)+D[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^b)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^_)+D[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=_+(b^S^v)+D[6]+76029189&4294967295,_=b+(w<<23&4294967295|w>>>9),w=v+(_^b^S)+D[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^b)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^_)+D[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=_+(b^S^v)+D[2]+3299628645&4294967295,_=b+(w<<23&4294967295|w>>>9),w=v+(b^(_|~S))+D[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~b))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~_))+D[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=_+(S^(b|~v))+D[5]+4237533241&4294967295,_=b+(w<<21&4294967295|w>>>11),w=v+(b^(_|~S))+D[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~b))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~_))+D[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=_+(S^(b|~v))+D[1]+2240044497&4294967295,_=b+(w<<21&4294967295|w>>>11),w=v+(b^(_|~S))+D[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~b))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~_))+D[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=_+(S^(b|~v))+D[13]+1309151649&4294967295,_=b+(w<<21&4294967295|w>>>11),w=v+(b^(_|~S))+D[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~b))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~_))+D[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=_+(S^(b|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,D=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=_;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(D[b++]=E.charCodeAt(S++),b==this.blockSize){i(this,D),b=0;break}}else for(;S<v;)if(D[b++]=E[S++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var D=0;32>D;D+=8)E[_++]=this.g[v]>>>D&255;return E};function o(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function s(E,v){this.h=v;for(var _=[],D=!0,b=E.length-1;0<=b;b--){var S=E[b]|0;D&&S==v||(_[b]=S,D=!1)}this.g=_}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return C(l(-E));for(var v=[],_=1,D=0;E>=_;D++)v[D]=E/_|0,_*=4294967296;return new s(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return C(d(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),D=f,b=0;b<E.length;b+=8){var S=Math.min(8,E.length-b),w=parseInt(E.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(_),D=D.add(l(w)))}return D}var f=c(0),g=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var D=this.i(_);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,D="";;){var b=V(_,v).g;_=P(_,b.j(v));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=b,I(_))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=P(this,E),A(E)?-1:I(E)?0:1};function C(E){for(var v=E.g.length,_=[],D=0;D<v;D++)_[D]=~E.g[D];return new s(_,~E.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0,b=0;b<=v;b++){var S=D+(this.i(b)&65535)+(E.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);D=w>>>16,S&=65535,w&=65535,_[b]=w<<16|S}return new s(_,_[_.length-1]&-2147483648?-1:0)};function P(E,v){return E.add(C(v))}t.j=function(E){if(I(this)||I(E))return f;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],D=0;D<2*v;D++)_[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<E.g.length;b++){var S=this.i(D)>>>16,w=this.i(D)&65535,Ar=E.i(b)>>>16,sc=E.i(b)&65535;_[2*D+2*b]+=w*sc,B(_,2*D+2*b),_[2*D+2*b+1]+=S*sc,B(_,2*D+2*b+1),_[2*D+2*b+1]+=w*Ar,B(_,2*D+2*b+1),_[2*D+2*b+2]+=S*Ar,B(_,2*D+2*b+2)}for(D=0;D<v;D++)_[D]=_[2*D+1]<<16|_[2*D];for(D=v;D<2*v;D++)_[D]=0;return new s(_,0)};function B(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function U(E,v){this.g=E,this.h=v}function V(E,v){if(I(v))throw Error("division by zero");if(I(E))return new U(f,f);if(A(E))return v=V(C(E),v),new U(C(v.g),C(v.h));if(A(v))return v=V(E,C(v)),new U(C(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,D=v;0>=D.l(E);)_=Y(_),D=Y(D);var b=X(_,1),S=X(D,1);for(D=X(D,2),_=X(_,2);!I(D);){var w=S.add(D);0>=w.l(E)&&(b=b.add(_),S=w),D=X(D,1),_=X(_,1)}return v=P(E,b.j(v)),new U(b,v)}for(b=f;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(_)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(_),w=S.j(v);A(w)||0<w.l(E);)_-=D,S=l(_),w=S.j(v);I(S)&&(S=g),b=b.add(S),E=P(E,w)}return new U(b,E)}t.A=function(E){return V(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)&E.i(D);return new s(_,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)|E.i(D);return new s(_,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)^E.i(D);return new s(_,this.h^E.h)};function Y(E){for(var v=E.g.length+1,_=[],D=0;D<v;D++)_[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(_,E.h)}function X(E,v){var _=v>>5;v%=32;for(var D=E.g.length-_,b=[],S=0;S<D;S++)b[S]=0<v?E.i(S+_)>>>v|E.i(S+_+1)<<32-v:E.i(S+_);return new s(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ov=K1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Pi=K1.Integer=s}).apply(typeof W1<"u"?W1:typeof self<"u"?self:typeof window<"u"?window:{});var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wr={};var Vv,b3,aa,Lv,Su,Tf,Bv,jv,$v;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bf=="object"&&bf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var T=u[m];if(!(T in p))break e;p=p[T]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,m=!1,T={next:function(){if(!m&&p<u.length){var F=p++;return{value:h(F,u[F]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),u.apply(h,T)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,T,F){for(var $=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)$[Fe-2]=arguments[Fe];return h.prototype[T].apply(m,$)}}function A(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function C(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let T=u.length||0,F=m.length||0;u.length=T+F;for(let $=0;$<F;$++)u[T+$]=m[$]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var Y=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function X(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function E(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)u[p]=m[p];for(let F=0;F<_.length;F++)p=_[F],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=mg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Ar{constructor(){this.h=this.g=null}add(h,p){let m=sc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var sc=new P(()=>new WR,u=>u.reset());class WR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ac,cc=!1,mg=new Ar,pI=()=>{let u=a.Promise.resolve(void 0);ac=()=>{u.then(KR)}};var KR=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){S(p)}var h=sc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}cc=!1};function ii(){this.s=this.s,this.C=this.C}ii.prototype.s=!1,ii.prototype.ma=function(){this.s||(this.s=!0,this.N())},ii.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var QR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function uc(u,h){if(Pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Y){e:{try{V(h.nodeName);var T=!0;break e}catch{}T=!1}T||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:YR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&uc.aa.h.call(this)}}I(uc,Pt);var YR={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),XR=0;function JR(u,h,p,m,T){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=T,this.key=++XR,this.da=this.fa=!1}function bl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tl(u){this.src=u,this.g={},this.h=0}Tl.prototype.add=function(u,h,p,m,T){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var $=vg(u,h,m,T);return-1<$?(h=u[$],p||(h.fa=!1)):(h=new JR(h,this.src,F,!!m,T),h.fa=p,u.push(h)),h};function yg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],T=Array.prototype.indexOf.call(m,h,void 0),F;(F=0<=T)&&Array.prototype.splice.call(m,T,1),F&&(bl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function vg(u,h,p,m){for(var T=0;T<u.length;++T){var F=u[T];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==m)return T}return-1}var _g="closure_lm_"+(1e6*Math.random()|0),wg={};function gI(u,h,p,m,T){if(m&&m.once)return yI(u,h,p,m,T);if(Array.isArray(h)){for(var F=0;F<h.length;F++)gI(u,h[F],p,m,T);return null}return p=Cg(p),u&&u[lc]?u.K(h,p,l(m)?!!m.capture:!!m,T):mI(u,h,p,!1,m,T)}function mI(u,h,p,m,T,F){if(!h)throw Error("Invalid event type");var $=l(T)?!!T.capture:!!T,Fe=Ig(u);if(Fe||(u[_g]=Fe=new Tl(u)),p=Fe.add(h,p,m,$,F),p.proxy)return p;if(m=ZR(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)QR||(T=$),T===void 0&&(T=!1),u.addEventListener(h.toString(),m,T);else if(u.attachEvent)u.attachEvent(_I(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ZR(){function u(p){return h.call(u.src,u.listener,p)}let h=eP;return u}function yI(u,h,p,m,T){if(Array.isArray(h)){for(var F=0;F<h.length;F++)yI(u,h[F],p,m,T);return null}return p=Cg(p),u&&u[lc]?u.L(h,p,l(m)?!!m.capture:!!m,T):mI(u,h,p,!0,m,T)}function vI(u,h,p,m,T){if(Array.isArray(h))for(var F=0;F<h.length;F++)vI(u,h[F],p,m,T);else m=l(m)?!!m.capture:!!m,p=Cg(p),u&&u[lc]?(u=u.i,h=String(h).toString(),h in u.g&&(F=u.g[h],p=vg(F,p,m,T),-1<p&&(bl(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete u.g[h],u.h--)))):u&&(u=Ig(u))&&(h=u.g[h.toString()],u=-1,h&&(u=vg(h,p,m,T)),(p=-1<u?h[u]:null)&&Eg(p))}function Eg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[lc])yg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(_I(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Ig(h))?(yg(p,u),p.h==0&&(p.src=null,h[_g]=null)):bl(u)}}}function _I(u){return u in wg?wg[u]:wg[u]="on"+u}function eP(u,h){if(u.da)u=!0;else{h=new uc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Eg(u),u=p.call(m,h)}return u}function Ig(u){return u=u[_g],u instanceof Tl?u:null}var Dg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cg(u){return typeof u=="function"?u:(u[Dg]||(u[Dg]=function(h){return u.handleEvent(h)}),u[Dg])}function Nt(){ii.call(this),this.i=new Tl(this),this.M=this,this.F=null}I(Nt,ii),Nt.prototype[lc]=!0,Nt.prototype.removeEventListener=function(u,h,p,m){vI(this,u,h,p,m)};function Ht(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Pt(h,u);else if(h instanceof Pt)h.target=h.target||u;else{var T=h;h=new Pt(m,u),D(h,T)}if(T=!0,p)for(var F=p.length-1;0<=F;F--){var $=h.g=p[F];T=Al($,m,!0,h)&&T}if($=h.g=u,T=Al($,m,!0,h)&&T,T=Al($,m,!1,h)&&T,p)for(F=0;F<p.length;F++)$=h.g=p[F],T=Al($,m,!1,h)&&T}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)bl(p[m]);delete u.g[h],u.h--}}this.F=null},Nt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Nt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Al(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var T=!0,F=0;F<h.length;++F){var $=h[F];if($&&!$.da&&$.capture==p){var Fe=$.listener,Tt=$.ha||$.src;$.fa&&yg(u.i,$),T=Fe.call(Tt,m)!==!1&&T}}return T&&!m.defaultPrevented}function wI(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function EI(u){u.g=wI(()=>{u.g=null,u.i&&(u.i=!1,EI(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class tP extends ii{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:EI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dc(u){ii.call(this),this.h=u,this.g={}}I(dc,ii);var II=[];function DI(u){X(u.g,function(h,p){this.g.hasOwnProperty(p)&&Eg(h)},u),u.g={}}dc.prototype.N=function(){dc.aa.N.call(this),DI(this)},dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bg=a.JSON.stringify,nP=a.JSON.parse,rP=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Tg(){}Tg.prototype.h=null;function CI(u){return u.h||(u.h=u.i())}function bI(){}var hc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ag(){Pt.call(this,"d")}I(Ag,Pt);function Sg(){Pt.call(this,"c")}I(Sg,Pt);var no={},TI=null;function Sl(){return TI=TI||new Nt}no.La="serverreachability";function AI(u){Pt.call(this,no.La,u)}I(AI,Pt);function fc(u){let h=Sl();Ht(h,new AI(h))}no.STAT_EVENT="statevent";function SI(u,h){Pt.call(this,no.STAT_EVENT,u),this.stat=h}I(SI,Pt);function zt(u){let h=Sl();Ht(h,new SI(h,u))}no.Ma="timingevent";function xI(u,h){Pt.call(this,no.Ma,u),this.size=h}I(xI,Pt);function pc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function gc(){this.g=!0}gc.prototype.xa=function(){this.g=!1};function iP(u,h,p,m,T,F){u.info(function(){if(u.g)if(F)for(var $="",Fe=F.split("&"),Tt=0;Tt<Fe.length;Tt++){var Ce=Fe[Tt].split("=");if(1<Ce.length){var Ut=Ce[0];Ce=Ce[1];var kt=Ut.split("_");$=2<=kt.length&&kt[1]=="type"?$+(Ut+"="+Ce+"&"):$+(Ut+"=redacted&")}}else $=null;else $=F;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+h+`
`+p+`
`+$})}function oP(u,h,p,m,T,F,$){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+h+`
`+p+`
`+F+" "+$})}function ls(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+aP(u,p)+(m?" "+m:"")})}function sP(u,h){u.info(function(){return"TIMEOUT: "+h})}gc.prototype.info=function(){};function aP(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(var $=1;$<T.length;$++)T[$]=""}}}}return bg(p)}catch{return h}}var xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},MI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xg;function Ml(){}I(Ml,Tg),Ml.prototype.g=function(){return new XMLHttpRequest},Ml.prototype.i=function(){return{}},xg=new Ml;function oi(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new FI}function FI(){this.i=null,this.g="",this.h=!1}var RI={},Mg={};function Fg(u,h,p){u.L=1,u.v=Nl(Sr(h)),u.m=p,u.P=!0,PI(u,null)}function PI(u,h){u.F=Date.now(),Fl(u),u.A=Sr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),WI(p.i,"t",m),u.C=0,p=u.j.J,u.h=new FI,u.g=dD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new tP(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var T="readystatechange";Array.isArray(T)||(T&&(II[0]=T.toString()),T=II);for(var F=0;F<T.length;F++){var $=gI(p,T[F],m||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),fc(),iP(u.i,u.u,u.A,u.l,u.R,u.m)}oi.prototype.ca=function(u){u=u.target;let h=this.M;h&&xr(u)==3?h.j():this.Y(u)},oi.prototype.Y=function(u){try{if(u==this.g)e:{let kt=xr(this.g);var h=this.g.Ba();let fs=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||eD(this.g)))){this.J||kt!=4||h==7||(h==8||0>=fs?fc(3):fc(2)),Rg(this);var p=this.g.Z();this.X=p;t:if(NI(this)){var m=eD(this.g);u="";var T=m.length,F=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ro(this),mc(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<T;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(F&&h==T-1)});m.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,oP(this.i,this.u,this.A,this.l,this.R,kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Tt=this.g;if((Fe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Fe)){var Ce=Fe;break t}}Ce=null}if(p=Ce)ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pg(this,p);else{this.o=!1,this.s=3,zt(12),ro(this),mc(this);break e}}if(this.P){p=!0;let Mn;for(;!this.J&&this.C<$.length;)if(Mn=cP(this,$),Mn==Mg){kt==4&&(this.s=4,zt(14),p=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==RI){this.s=4,zt(15),ls(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else ls(this.i,this.l,Mn,null),Pg(this,Mn);if(NI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||$.length!=0||this.h.h||(this.s=1,zt(16),p=!1),this.o=this.o&&p,!p)ls(this.i,this.l,$,"[Invalid Chunked Response]"),ro(this),mc(this);else if(0<$.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Lg(Ut),Ut.M=!0,zt(11))}}else ls(this.i,this.l,$,null),Pg(this,$);kt==4&&ro(this),this.o&&!this.J&&(kt==4?aD(this.j,this):(this.o=!1,Fl(this)))}else bP(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),ro(this),mc(this)}}}catch{}finally{}};function NI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function cP(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Mg:(p=Number(h.substring(p,m)),isNaN(p)?RI:(m+=1,m+p>h.length?Mg:(h=h.slice(m,m+p),u.C=m+p,h)))}oi.prototype.cancel=function(){this.J=!0,ro(this)};function Fl(u){u.S=Date.now()+u.I,UI(u,u.I)}function UI(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pc(g(u.ba,u),h)}function Rg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}oi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(sP(this.i,this.A),this.L!=2&&(fc(),zt(17)),ro(this),this.s=2,mc(this)):UI(this,this.S-u)};function mc(u){u.j.G==0||u.J||aD(u.j,u)}function ro(u){Rg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,DI(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Pg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Ng(p.h,u))){if(!u.K&&Ng(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Ll(p),Ol(p);else break e;Vg(p),zt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=pc(g(p.Za,p),6e3));if(1>=VI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else oo(p,11)}else if((u.K||p.g==u)&&Ll(p),!B(h))for(T=p.Da.g.parse(h),h=0;h<T.length;h++){let Ce=T[h];if(p.T=Ce[0],Ce=Ce[1],p.G==2)if(Ce[0]=="c"){p.K=Ce[1],p.ia=Ce[2];let Ut=Ce[3];Ut!=null&&(p.la=Ut,p.j.info("VER="+p.la));let kt=Ce[4];kt!=null&&(p.Aa=kt,p.j.info("SVER="+p.Aa));let fs=Ce[5];fs!=null&&typeof fs=="number"&&0<fs&&(m=1.5*fs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Mn=u.g;if(Mn){let jl=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var F=m.h;F.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ug(F,F.h),F.h=null))}if(m.D){let Bg=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bg&&(m.ya=Bg,Le(m.I,m.D,Bg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var $=u;if(m.qa=lD(m,m.J?m.ia:null,m.W),$.K){LI(m.h,$);var Fe=$,Tt=m.L;Tt&&(Fe.I=Tt),Fe.B&&(Rg(Fe),Fl(Fe)),m.g=$}else oD(m);0<p.i.length&&Vl(p)}else Ce[0]!="stop"&&Ce[0]!="close"||oo(p,7);else p.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?oo(p,7):Og(p):Ce[0]!="noop"&&p.l&&p.l.ta(Ce),p.v=0)}}fc(4)}catch{}}var uP=class{constructor(u,h){this.g=u,this.map=h}};function kI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function VI(u){return u.h?1:u.g?u.g.size:0}function Ng(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Ug(u,h){u.g?u.g.add(h):u.h=h}function LI(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}kI.prototype.cancel=function(){if(this.i=BI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function BI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return A(u.i)}function lP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function dP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function jI(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=dP(u),m=lP(u),T=m.length,F=0;F<T;F++)h.call(void 0,m[F],p&&p[F],u)}var $I=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hP(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),T=null;if(0<=m){var F=u[p].substring(0,m);T=u[p].substring(m+1)}else F=u[p];h(F,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function io(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof io){this.h=u.h,Rl(this,u.j),this.o=u.o,this.g=u.g,Pl(this,u.s),this.l=u.l;var h=u.i,p=new _c;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),qI(this,p),this.m=u.m}else u&&(h=String(u).match($I))?(this.h=!1,Rl(this,h[1]||"",!0),this.o=yc(h[2]||""),this.g=yc(h[3]||"",!0),Pl(this,h[4]),this.l=yc(h[5]||"",!0),qI(this,h[6]||"",!0),this.m=yc(h[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}io.prototype.toString=function(){var u=[],h=this.j;h&&u.push(vc(h,HI,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(vc(h,HI,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(vc(p,p.charAt(0)=="/"?gP:pP,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",vc(p,yP)),u.join("")};function Sr(u){return new io(u)}function Rl(u,h,p){u.j=p?yc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Pl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function qI(u,h,p){h instanceof _c?(u.i=h,vP(u.i,u.h)):(p||(h=vc(h,mP)),u.i=new _c(h,u.h))}function Le(u,h,p){u.i.set(h,p)}function Nl(u){return Le(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function yc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,fP),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var HI=/[#\/\?@]/g,pP=/[#\?:]/g,gP=/[#\?]/g,mP=/[#\?@]/g,yP=/#/g;function _c(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function si(u){u.g||(u.g=new Map,u.h=0,u.i&&hP(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=_c.prototype,t.add=function(u,h){si(this),this.i=null,u=ds(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function zI(u,h){si(u),h=ds(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function GI(u,h){return si(u),h=ds(u,h),u.g.has(h)}t.forEach=function(u,h){si(this),this.g.forEach(function(p,m){p.forEach(function(T){u.call(h,T,m,this)},this)},this)},t.na=function(){si(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let T=u[m];for(let F=0;F<T.length;F++)p.push(h[m])}return p},t.V=function(u){si(this);let h=[];if(typeof u=="string")GI(this,u)&&(h=h.concat(this.g.get(ds(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return si(this),this.i=null,u=ds(this,u),GI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function WI(u,h,p){zI(u,h),0<p.length&&(u.i=null,u.g.set(ds(u,h),A(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let F=encodeURIComponent(String(m)),$=this.V(m);for(m=0;m<$.length;m++){var T=F;$[m]!==""&&(T+="="+encodeURIComponent(String($[m]))),u.push(T)}}return this.i=u.join("&")};function ds(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function vP(u,h){h&&!u.j&&(si(u),u.i=null,u.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(zI(this,m),WI(this,T,p))},u)),u.j=h}function _P(u,h){let p=new gc;if(a.Image){let m=new Image;m.onload=y(ai,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(ai,p,"TestLoadImage: error",!1,h,m),m.onabort=y(ai,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(ai,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function wP(u,h){let p=new gc,m=new AbortController,T=setTimeout(()=>{m.abort(),ai(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(F=>{clearTimeout(T),F.ok?ai(p,"TestPingServer: ok",!0,h):ai(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(T),ai(p,"TestPingServer: error",!1,h)})}function ai(u,h,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function EP(){this.g=new rP}function IP(u,h,p){let m=p||"";try{jI(u,function(T,F){let $=T;l(T)&&($=bg(T)),h.push(m+F+"="+encodeURIComponent($))})}catch(T){throw h.push(m+"type="+encodeURIComponent("_badmap")),T}}function wc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(wc,Tg),wc.prototype.g=function(){return new Ul(this.l,this.j)},wc.prototype.i=function(u){return function(){return u}}({});function Ul(u,h){Nt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ul,Nt),t=Ul.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ic(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ec(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;KI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function KI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ec(this):Ic(this),this.readyState==3&&KI(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ec(this))},t.Qa=function(u){this.g&&(this.response=u,Ec(this))},t.ga=function(){this.g&&Ec(this)};function Ec(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ic(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function QI(u){let h="";return X(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function kg(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=QI(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Le(u,h,p))}function Ke(u){Nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ke,Nt);var DP=/^https?$/i,CP=["POST","PUT"];t=Ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xg.g(),this.v=this.o?CI(this.o):CI(xg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(F){YI(this,F);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let F of m.keys())p.set(F,m.get(F));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),T=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CP,h,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,$]of p)this.g.setRequestHeader(F,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ZI(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){YI(this,F)}};function YI(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,XI(u),kl(u)}function XI(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?JI(this):this.bb())},t.bb=function(){JI(this)};function JI(u){if(u.h&&typeof s<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)wI(u.Ea,0,u);else if(Ht(u,"readystatechange"),xr(u)==4){u.h=!1;try{let $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=$===0){var T=String(u.D).match($I)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!DP.test(T?T.toLowerCase():"")}p=m}if(p)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var F=2<xr(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",XI(u)}}finally{kl(u)}}}}function kl(u,h){if(u.g){ZI(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ht(u,"ready");try{p.onreadystatechange=m}catch{}}}function ZI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),nP(h)}};function eD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bP(u){let h={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(B(u[m]))continue;var p=b(u[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let F=h[T]||[];h[T]=F,F.push(p)}E(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function tD(u){this.Aa=0,this.i=[],this.j=new gc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dc("baseRetryDelayMs",5e3,u),this.cb=Dc("retryDelaySeedMs",1e4,u),this.Wa=Dc("forwardChannelMaxRetries",2,u),this.wa=Dc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new kI(u&&u.concurrentRequestLimit),this.Da=new EP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tD.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){zt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=lD(this,null,this.W),Vl(this)};function Og(u){if(nD(u),u.G==3){var h=u.U++,p=Sr(u.I);if(Le(p,"SID",u.K),Le(p,"RID",h),Le(p,"TYPE","terminate"),Cc(u,p),h=new oi(u,u.j,h),h.L=2,h.v=Nl(Sr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=dD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Fl(h)}uD(u)}function Ol(u){u.g&&(Lg(u),u.g.cancel(),u.g=null)}function nD(u){Ol(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ll(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Vl(u){if(!OI(u.h)&&!u.s){u.s=!0;var h=u.Ga;ac||pI(),cc||(ac(),cc=!0),mg.add(h,u),u.B=0}}function TP(u,h){return VI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pc(g(u.Ga,u,h),cD(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let T=new oi(this,this.j,u),F=this.o;if(this.S&&(F?(F=v(F),D(F,this.S)):F=this.S),this.m!==null||this.O||(T.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=iD(this,T,h),p=Sr(this.I),Le(p,"RID",u),Le(p,"CVER",22),this.D&&Le(p,"X-HTTP-Session-Id",this.D),Cc(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(QI(F)))+"&"+h:this.m&&kg(p,this.m,F)),Ug(this.h,T),this.Ua&&Le(p,"TYPE","init"),this.P?(Le(p,"$req",h),Le(p,"SID","null"),T.T=!0,Fg(T,p,null)):Fg(T,p,h),this.G=2}}else this.G==3&&(u?rD(this,u):this.i.length==0||OI(this.h)||rD(this))};function rD(u,h){var p;h?p=h.l:p=u.U++;let m=Sr(u.I);Le(m,"SID",u.K),Le(m,"RID",p),Le(m,"AID",u.T),Cc(u,m),u.m&&u.o&&kg(m,u.m,u.o),p=new oi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=iD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ug(u.h,p),Fg(p,m,h)}function Cc(u,h){u.H&&X(u.H,function(p,m){Le(h,m,p)}),u.l&&jI({},function(p,m){Le(h,m,p)})}function iD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var T=u.i;let F=-1;for(;;){let $=["count="+p];F==-1?0<p?(F=T[0].g,$.push("ofs="+F)):F=0:$.push("ofs="+F);let Fe=!0;for(let Tt=0;Tt<p;Tt++){let Ce=T[Tt].g,Ut=T[Tt].map;if(Ce-=F,0>Ce)F=Math.max(0,T[Tt].g-100),Fe=!1;else try{IP(Ut,$,"req"+Ce+"_")}catch{m&&m(Ut)}}if(Fe){m=$.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function oD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;ac||pI(),cc||(ac(),cc=!0),mg.add(h,u),u.v=0}}function Vg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pc(g(u.Fa,u),cD(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,sD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pc(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Ol(this),sD(this))};function Lg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function sD(u){u.g=new oi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Sr(u.qa);Le(h,"RID","rpc"),Le(h,"SID",u.K),Le(h,"AID",u.T),Le(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Le(h,"TO",u.ja),Le(h,"TYPE","xmlhttp"),Cc(u,h),u.m&&u.o&&kg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Nl(Sr(h)),p.m=null,p.P=!0,PI(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Ol(this),Vg(this),zt(19))};function Ll(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function aD(u,h){var p=null;if(u.g==h){Ll(u),Lg(u),u.g=null;var m=2}else if(Ng(u.h,h))p=h.D,LI(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var T=u.B;m=Sl(),Ht(m,new xI(m,p)),Vl(u)}else oD(u);else if(T=h.s,T==3||T==0&&0<h.X||!(m==1&&TP(u,h)||m==2&&Vg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),T){case 1:oo(u,5);break;case 4:oo(u,10);break;case 3:oo(u,6);break;default:oo(u,2)}}}function cD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function oo(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let T=!m;m=new io(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rl(m,"https"),Nl(m),T?_P(m.toString(),p):wP(m.toString(),p)}else zt(2);u.G=0,u.l&&u.l.sa(h),uD(u),nD(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function uD(u){if(u.G=0,u.ka=[],u.l){let h=BI(u.h);(h.length!=0||u.i.length!=0)&&(C(u.ka,h),C(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function lD(u,h,p){var m=p instanceof io?Sr(p):new io(p);if(m.g!="")h&&(m.g=h+"."+m.g),Pl(m,m.s);else{var T=a.location;m=T.protocol,h=h?h+"."+T.hostname:T.hostname,T=+T.port;var F=new io(null);m&&Rl(F,m),h&&(F.g=h),T&&Pl(F,T),p&&(F.l=p),m=F}return p=u.D,h=u.ya,p&&h&&Le(m,p,h),Le(m,"VER",u.la),Cc(u,m),m}function dD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ke(new wc({eb:p})):new Ke(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hD(){}t=hD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bl(){}Bl.prototype.g=function(u,h){return new ln(u,h)};function ln(u,h){Nt.call(this),this.g=new tD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!B(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new hs(this)}I(ln,Nt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Og(this.g)},ln.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=bg(u),u=p);h.i.push(new uP(h.Ya++,u)),h.G==3&&Vl(h)},ln.prototype.N=function(){this.g.l=null,delete this.j,Og(this.g),delete this.g,ln.aa.N.call(this)};function fD(u){Ag.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(fD,Ag);function pD(){Sg.call(this),this.status=1}I(pD,Sg);function hs(u){this.g=u}I(hs,hD),hs.prototype.ua=function(){Ht(this.g,"a")},hs.prototype.ta=function(u){Ht(this.g,new fD(u))},hs.prototype.sa=function(u){Ht(this.g,new pD)},hs.prototype.ra=function(){Ht(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,$v=Wr.createWebChannelTransport=function(){return new Bl},jv=Wr.getStatEventTarget=function(){return Sl()},Bv=Wr.Event=no,Tf=Wr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,Su=Wr.ErrorCode=xl,MI.COMPLETE="complete",Lv=Wr.EventType=MI,bI.EventType=hc,hc.OPEN="a",hc.CLOSE="b",hc.ERROR="c",hc.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,aa=Wr.WebChannel=bI,b3=Wr.FetchXmlHttpFactory=wc,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Vv=Wr.XhrIo=Ke}).apply(typeof bf<"u"?bf:typeof self<"u"?self:typeof window<"u"?window:{});var Q1="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var Va="10.14.0";var Bi=new Gl("@firebase/firestore");function ha(){return Bi.logLevel}function JS(t){Bi.setLogLevel(t)}function O(t,...e){if(Bi.logLevel<=Jn.DEBUG){let n=e.map(Ww);Bi.debug(`Firestore (${Va}): ${t}`,...n)}}function rt(t,...e){if(Bi.logLevel<=Jn.ERROR){let n=e.map(Ww);Bi.error(`Firestore (${Va}): ${t}`,...n)}}function zn(t,...e){if(Bi.logLevel<=Jn.WARN){let n=e.map(Ww);Bi.warn(`Firestore (${Va}): ${t}`,...n)}}function Ww(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: `+t;throw rt(e),new Error(e)}function ne(t,e){t||Q()}function ZS(t,e){t||Q()}function z(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends zl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var It=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},Qv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Yv=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ne(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new It;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new It,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>M(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new It)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new kf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new yt(e)}},Xv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Jv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},e_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ne(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new Zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function A3(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=A3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function Ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function ex(t){return t+"\0"}var ze=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ze(0,0))}static max(){return new t(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ee=class t extends Vf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=class t extends Vf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ee.fromString(e))}static fromName(e){return new t(Ee.fromString(e).popFirst(5))}static empty(){return new t(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ee(e.slice()))}};var Ia=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function t_(t){return t.fields.find(e=>e.kind===2)}function Oo(t){return t.fields.filter(e=>e.kind!==2)}Ia.UNKNOWN_ID=-1;var va=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Bu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Sn.min())}};function tx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Sn(i,G.empty(),e)}function nx(t){return new Sn(t.readTime,t.key,-1)}var Sn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),G.empty(),-1)}static max(){return new t(ie.max(),G.empty(),-1)}};function Kw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var rx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yi(t){return M(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==rx)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Bf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new It,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new qo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Qw(r.target.error);this.V.reject(new qo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new qo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new r_(n)}},ji=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(bc())===12.2&&rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Vo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hl())return!1;if(t.v())return!0;let e=bc(),n=t.S(e),r=0<n&&n<10,i=ix(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new qo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return M(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Bf.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function ix(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var n_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vo(this.B.delete())}},qo=class extends k{constructor(e,n){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Xi(t){return t.name==="IndexedDbTransactionError"}var r_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Vo(this.store.add(e))}get(e){return Vo(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Vo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Vo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new x((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new x((r,i)=>{n.onerror=o=>{let s=Qw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new n_(a),l=n(a.primaryKey,a.value,c);if(l instanceof x){let d=l.catch(f=>(c.done(),x.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Vo(t){return new x((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Qw(r.target.error);n(i)}})}var Y1=!1;function Qw(t){let e=ji.S(bc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Y1||(Y1=!0,setTimeout(()=>{throw r},0)),r}}return t}var i_=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Xi(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Yi(n)}yield this.X(6e4)}))}},o_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return x.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=nx(o);Kw(s,r)>0&&(r=s)}),new Sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var mn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function al(t){return t==null}function ju(t){return t===0&&1/t==-1/0}function ox(t){return typeof t=="number"&&Number.isInteger(t)&&!ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function en(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=X1(e)),e=x3(t.get(n),e);return X1(e)}function x3(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function X1(t){return t+""}function hr(t){let e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),Ee.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&Q(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Q()}o=s+2}return new Ee(r)}var J1=["userId","batchId"];function Ff(t,e){return[t,en(e)]}function sx(t,e,n){return[t,en(e),n]}var M3={},F3=["prefixPath","collectionGroup","readTime","documentId"],R3=["prefixPath","collectionGroup","documentId"],P3=["collectionGroup","readTime","prefixPath","documentId"],N3=["canonicalId","targetId"],U3=["targetId","path"],k3=["path","targetId"],O3=["collectionId","parent"],V3=["indexId","uid"],L3=["uid","sequenceNumber"],B3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],j3=["indexId","uid","orderedDocumentKey"],$3=["userId","collectionPath","documentId"],q3=["userId","collectionPath","largestBatchId"],H3=["userId","collectionGroup","largestBatchId"],ax=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z3=[...ax,"documentOverlays"],cx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ux=cx,Yw=[...ux,"indexConfiguration","indexState","indexEntries"],G3=Yw,W3=[...Yw,"globals"];var $u=class extends Lf{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Dt(t,e){let n=z(t);return ji.F(n._e,e)}function Z1(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}},ya=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,o){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ke=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},jf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ca(t){return t.hasNext()?t.getNext():void 0}var yn=class t{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new t([])}unionWith(e){let n=new ke(it.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var $f=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function dx(){return typeof atob<"u"}var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $f("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var K3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(ne(!!t),typeof t=="string"){let e=0,n=K3.exec(t);if(ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $i(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function Pp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xw(t){let e=t.mapValue.fields.__previous_value__;return Pp(e)?Xw(e):e}function qu(t){let e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var s_=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},qi=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Vi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rf={nullValue:"NULL_VALUE"};function Ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:hx(t)?9007199254740991:Np(t)?10:11:Q()}function yr(t,e){if(t===e)return!0;let n=Ho(t);if(n!==Ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yr(i.timestampValue),a=Yr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return $i(i.bytesValue).isEqual($i(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?ju(s)===ju(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ea(t.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Z1(s)!==Z1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!yr(s[c],a[c])))return!1;return!0}(t,e);default:return Q()}}function Hu(t,e){return(t.values||[]).find(n=>yr(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;let n=Ho(t),r=Ho(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=qe(o.integerValue||o.doubleValue),c=qe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return eS(t.timestampValue,e.timestampValue);case 4:return eS(qu(t),qu(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(o,s){let a=$i(o),c=$i(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ce(a[l],c[l]);if(d!==0)return d}return ce(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(qe(o.latitude),qe(s.latitude));return a!==0?a:ce(qe(o.longitude),qe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,A=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:tS(y,I)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vi.mapValue&&s===Vi.mapValue)return 0;if(o===Vi.mapValue)return 1;if(s===Vi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ce(c[f],d[f]);if(g!==0)return g;let y=Hi(a[c[f]],l[d[f]]);if(y!==0)return y}return ce(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Q()}}function eS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Yr(t),r=Yr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function tS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Hi(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Da(t){return a_(t)}function a_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=a_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${a_(n.fields[s])}`;return i+"}"}(t.mapValue):Q()}function zo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function c_(t){return!!t&&"integerValue"in t}function zu(t){return!!t&&"arrayValue"in t}function nS(t){return!!t&&"nullValue"in t}function rS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function Np(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Uu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fx={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Q3(t){return"nullValue"in t?Rf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?zo(qi.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Np(t)?fx:{mapValue:{}}:Q()}function Y3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?zo(qi.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?fx:"mapValue"in t?Np(t)?{mapValue:{}}:Vi:Q()}function iS(t,e){let n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function oS(t,e){let n=Hi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var $t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Uu(this.value))}};function px(t){let e=[];return ts(t.fields,(n,r)=>{let i=new it([n]);if(Pf(r)){let o=px(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new yn(e)}var vt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),$t.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vr=class{constructor(e,n){this.position=e,this.inclusive=n}};function sS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=Hi(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yr(t.position[n],e.position[n]))return!1;return!0}var Go=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function X3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var qf=class{},_e=class t extends qf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d_(e,n,r):n==="array-contains"?new p_(e,r):n==="in"?new Hf(e,r):n==="not-in"?new g_(e,r):n==="array-contains-any"?new m_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h_(e,r):new f_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hi(n,this.value)):n!==null&&Ho(this.value)===Ho(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Me=class t extends qf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ca(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ca(t){return t.op==="and"}function u_(t){return t.op==="or"}function Jw(t){return gx(t)&&Ca(t)}function gx(t){for(let e of t.filters)if(e instanceof Me)return!1;return!0}function l_(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(Jw(t))return t.filters.map(e=>l_(e)).join(",");{let e=t.filters.map(n=>l_(n)).join(",");return`${t.op}(${e})`}}function mx(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&yr(r.value,i.value)}(t,e):t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&mx(s,i.filters[a]),!0):!1}(t,e):void Q()}function yx(t,e){let n=t.filters.concat(e);return Me.create(n,t.op)}function vx(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`}(t):t instanceof Me?function(n){return n.op.toString()+" {"+n.getFilters().map(vx).join(" ,")+"}"}(t):"Filter"}var d_=class extends _e{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},h_=class extends _e{constructor(e,n){super(e,"in",n),this.keys=_x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},f_=class extends _e{constructor(e,n){super(e,"not-in",n),this.keys=_x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function _x(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var p_=class extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return zu(n)&&Hu(n.arrayValue,this.value)}},Hf=class extends _e{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Hu(this.value.arrayValue,n)}},g_=class extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Hu(this.value.arrayValue,n)}},m_=class extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!zu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}};var y_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function v_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new y_(t,e,n,r,i,o,s)}function Wo(t){let e=z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>l_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Da(r)).join(",")),e.ue=n}return e.ue}function cl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!X3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aS(t.startAt,e.startAt)&&aS(t.endAt,e.endAt)}function zf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Gf(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function cS(t,e,n){let r=Rf,i=!0;for(let o of Gf(t,e)){let s=Rf,a=!0;switch(o.op){case"<":case"<=":s=Q3(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Rf}iS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];iS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function uS(t,e,n){let r=Vi,i=!0;for(let o of Gf(t,e)){let s=Vi,a=!0;switch(o.op){case">=":case">":s=Y3(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Vi}oS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];oS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Gn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function wx(t,e,n,r,i,o,s,a){return new Gn(t,e,n,r,i,o,s,a)}function La(t){return new Gn(t)}function lS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zw(t){return t.collectionGroup!==null}function _a(t){let e=z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ke(it.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Go(o,r))}),n.has(it.keyField().canonicalString())||e.ce.push(new Go(it.keyField(),r))}return e.ce}function tn(t){let e=z(t);return e.le||(e.le=J3(e,_a(t))),e.le}function J3(t,e){if(t.limitType==="F")return v_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Go(i.field,o)});let n=t.endAt?new vr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vr(t.startAt.position,t.startAt.inclusive):null;return v_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function __(t,e){let n=t.filters.concat([e]);return new Gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wf(t,e,n){return new Gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ul(t,e){return cl(tn(t),tn(e))&&t.limitType===e.limitType}function Ex(t){return`${Wo(tn(t))}|lt:${t.limitType}`}function fa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>vx(i)).join(", ")}]`),al(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function ll(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of _a(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=sS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,_a(r),i)||r.endAt&&!function(s,a,c){let l=sS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,_a(r),i))}(t,e)}function Ix(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dx(t){return(e,n)=>{let r=!1;for(let i of _a(t)){let o=Z3(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Z3(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Hi(c,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var _r=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}};var e4=new je(G.comparator);function un(){return e4}var Cx=new je(G.comparator);function Pu(...t){let e=Cx;for(let n of t)e=e.insert(n.key,n);return e}function bx(t){let e=Cx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fr(){return ku()}function Tx(){return ku()}function ku(){return new _r(t=>t.toString(),(t,e)=>t.isEqual(e))}var t4=new je(G.comparator),n4=new ke(G.comparator);function de(...t){let e=n4;for(let n of t)e=e.add(n);return e}var r4=new ke(ce);function eE(){return r4}function tE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function Ax(t){return{integerValue:""+t}}function Sx(t,e){return ox(e)?Ax(e):tE(t,e)}var ba=class{constructor(){this._=void 0}};function i4(t,e,n){return t instanceof zi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Pp(o)&&(o=Xw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Xr?Mx(t,e):t instanceof Jr?Fx(t,e):function(i,o){let s=xx(i,o),a=dS(s)+dS(i.Pe);return c_(s)&&c_(i.Pe)?Ax(a):tE(i.serializer,a)}(t,e)}function o4(t,e,n){return t instanceof Xr?Mx(t,e):t instanceof Jr?Fx(t,e):n}function xx(t,e){return t instanceof Gi?function(r){return c_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var zi=class extends ba{},Xr=class extends ba{constructor(e){super(),this.elements=e}};function Mx(t,e){let n=Rx(e);for(let r of t.elements)n.some(i=>yr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Jr=class extends ba{constructor(e){super(),this.elements=e}};function Fx(t,e){let n=Rx(e);for(let r of t.elements)n=n.filter(i=>!yr(i,r));return{arrayValue:{values:n}}}var Gi=class extends ba{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function dS(t){return qe(t.integerValue||t.doubleValue)}function Rx(t){return zu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ko=class{constructor(e,n){this.field=e,this.transform=n}};function s4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xr&&i instanceof Xr||r instanceof Jr&&i instanceof Jr?Ea(r.elements,i.elements,yr):r instanceof Gi&&i instanceof Gi?yr(r.Pe,i.Pe):r instanceof zi&&i instanceof zi}(t.transform,e.transform)}var w_=class{constructor(e,n){this.version=e,this.transformResults=n}},Ze=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ta=class{};function Px(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ki(t.key,Ze.none()):new Wi(t.key,t.data,Ze.none());{let n=t.data,r=$t.empty(),i=new ke(it.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Wn(t.key,r,new yn(i.toArray()),Ze.none())}}function a4(t,e,n){t instanceof Wi?function(i,o,s){let a=i.value.clone(),c=fS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Wn?function(i,o,s){if(!Nf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Nx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ou(t,e,n,r){return t instanceof Wi?function(o,s,a,c){if(!Nf(o.precondition,s))return a;let l=o.value.clone(),d=pS(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wn?function(o,s,a,c){if(!Nf(o.precondition,s))return a;let l=pS(o.fieldTransforms,c,s),d=s.data;return d.setAll(Nx(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return Nf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function c4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=xx(r.transform,i||null);o!=null&&(n===null&&(n=$t.empty()),n.set(r.field,o))}return n||null}function hS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ea(r,i,(o,s)=>s4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Wi=class extends Ta{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wn=class extends Ta{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Nx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function fS(t,e,n){let r=new Map;ne(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,o4(s,a,n[i]))}return r}function pS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,i4(o,s,e))}return r}var Ki=class extends Ta{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gu=class extends Ta{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&a4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Tx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=Px(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,r)=>hS(n,r))&&Ea(this.baseMutations,e.baseMutations,(n,r)=>hS(n,r))}},E_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length);let i=function(){return t4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Ku=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var I_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var gt,we;function Ux(t){switch(t){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function kx(t){if(t===void 0)return rt("GRPC error has no .code"),R.UNKNOWN;switch(t){case gt.OK:return R.OK;case gt.CANCELLED:return R.CANCELLED;case gt.UNKNOWN:return R.UNKNOWN;case gt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case gt.INTERNAL:return R.INTERNAL;case gt.UNAVAILABLE:return R.UNAVAILABLE;case gt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case gt.NOT_FOUND:return R.NOT_FOUND;case gt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case gt.ABORTED:return R.ABORTED;case gt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case gt.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(we=gt||(gt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var gS=null;function Ox(){return new TextEncoder}var u4=new Pi([4294967295,4294967295],0);function mS(t){let e=Ox().encode(t),n=new Ov;return n.update(e),new Uint8Array(n.digest())}function yS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pi([n,r],0),new Pi([i,o],0)]}var D_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Pi.fromNumber(r)));return i.compare(u4)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=mS(e),[r,i]=yS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=mS(e),[r,i]=yS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$o=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new je(ce),un(),de())}},Yu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var wa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Kf=class{constructor(e,n){this.targetId=e,this.me=n}},Qf=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Yf=class{constructor(){this.fe=0,this.ge=_S(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Yu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=_S()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},C_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=vS(),this.Qe=new je(ce)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(zf(o))if(r===0){let s=new G(o.path);this.Ue(n,s,vt.newNoDocument(s,ie.min()))}else ne(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}gS?.et(function(d,f,g,y,I){var A,C,P,B,U,V;let Y={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},X=f.unchangedNames;return X&&(Y.bloomFilter={applied:I===0,hashCount:(A=X?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(B=(P=(C=X?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&B!==void 0?B:0,padding:(V=(U=X?.bits)===null||U===void 0?void 0:U.padding)!==null&&V!==void 0?V:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Y}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=$i(r).toUint8Array()}catch(c){if(c instanceof $f)return zn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new D_(s,i,o)}catch(c){return zn(c instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&zf(a.target)){let c=new G(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,vt.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Qu(e,n,this.Qe,this.ke,r);return this.ke=un(),this.qe=vS(),this.Qe=new je(ce),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ke(ce),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function vS(){return new je(G.comparator)}function _S(){return new je(G.comparator)}var l4={asc:"ASCENDING",desc:"DESCENDING"},d4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h4={and:"AND",or:"OR"},b_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function T_(t,e){return t.useProto3Json||al(e)?e:{value:e}}function Aa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f4(t,e){return Aa(t,e.toTimestamp())}function ot(t){return ne(!!t),ie.fromTimestamp(function(n){let r=Yr(n);return new ze(r.seconds,r.nanos)}(t))}function nE(t,e){return A_(t,e).canonicalString()}function A_(t,e){let n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Lx(t){let e=Ee.fromString(t);return ne(Qx(e)),e}function Xu(t,e){return nE(t.databaseId,e.path)}function gr(t,e){let n=Lx(e);if(n.get(1)!==t.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G($x(n))}function Bx(t,e){return nE(t.databaseId,e)}function jx(t){let e=Lx(t);return e.length===4?Ee.emptyPath():$x(e)}function S_(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $x(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wS(t,e,n){return{name:Xu(t,e),fields:n.value.mapValue.fields}}function qx(t,e,n){let r=gr(t,e.name),i=ot(e.updateTime),o=e.createTime?ot(e.createTime):ie.min(),s=new $t({mapValue:{fields:e.fields}}),a=vt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function p4(t,e){return"found"in e?function(r,i){ne(!!i.found),i.found.name,i.found.updateTime;let o=gr(r,i.found.name),s=ot(i.found.updateTime),a=i.found.createTime?ot(i.found.createTime):ie.min(),c=new $t({mapValue:{fields:i.found.fields}});return vt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){ne(!!i.missing),ne(!!i.readTime);let o=gr(r,i.missing),s=ot(i.readTime);return vt.newNoDocument(o,s)}(t,e):Q()}function g4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(ne(d===void 0||typeof d=="string"),st.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),st.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:kx(l.code);return new k(d,l.message||"")}(s);n=new Qf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gr(t,r.document.name),o=ot(r.document.updateTime),s=r.document.createTime?ot(r.document.createTime):ie.min(),a=new $t({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new wa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gr(t,r.document),o=r.readTime?ot(r.readTime):ie.min(),s=vt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new wa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gr(t,r.document),o=r.removedTargetIds||[];n=new wa([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new I_(i,o),a=r.targetId;n=new Kf(a,s)}}return n}function Ju(t,e){let n;if(e instanceof Wi)n={update:wS(t,e.key,e.value)};else if(e instanceof Ki)n={delete:Xu(t,e.key)};else if(e instanceof Wn)n={update:wS(t,e.key,e.data),updateMask:E4(e.fieldMask)};else{if(!(e instanceof Gu))return Q();n={verify:Xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof zi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:f4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(t,e.precondition)),n}function x_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ze.updateTime(ot(o.updateTime)):o.exists!==void 0?Ze.exists(o.exists):Ze.none()}(e.currentDocument):Ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),c=new zi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Xr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Jr(d)}else"increment"in a?c=new Gi(s,a.increment):Q();let l=it.fromServerFormat(a.fieldPath);return new Ko(l,c)}(t,i)):[];if(e.update){e.update.name;let i=gr(t,e.update.name),o=new $t({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new yn(l.map(d=>it.fromServerFormat(d)))}(e.updateMask);return new Wn(i,o,s,n,r)}return new Wi(i,o,n,r)}if(e.delete){let i=gr(t,e.delete);return new Ki(i,n)}if(e.verify){let i=gr(t,e.verify);return new Gu(i,n)}return Q()}function m4(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?ot(i.updateTime):ot(o);return s.isEqual(ie.min())&&(s=ot(o)),new w_(s,i.transformResults||[])}(n,e))):[]}function Hx(t,e){return{documents:[Bx(t,e.path)]}}function zx(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bx(t,i);let o=function(l){if(l.length!==0)return Kx(Me.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:pa(g.field),direction:v4(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=T_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Gx(t){let e=jx(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ne(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let g=Wx(f);return g instanceof Me&&Jw(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(g=>function(I){return new Go(ga(I.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,al(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new vr(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new vr(y,g)}(n.endAt)),wx(e,i,s,o,a,"F",c,l)}function y4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ga(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ga(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(n.unaryFilter.field);return _e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(n.unaryFilter.field);return _e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(ga(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Me.create(n.compositeFilter.filters.map(r=>Wx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function v4(t){return l4[t]}function _4(t){return d4[t]}function w4(t){return h4[t]}function pa(t){return{fieldPath:t.canonicalString()}}function ga(t){return it.fromServerFormat(t.fieldPath)}function Kx(t){return t instanceof _e?function(n){if(n.op==="=="){if(rS(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NAN"}};if(nS(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rS(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NAN"}};if(nS(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(n.field),op:_4(n.op),value:n.value}}}(t):t instanceof Me?function(n){let r=n.getFilters().map(i=>Kx(i));return r.length===1?r[0]:{compositeFilter:{op:w4(n.op),filters:r}}}(t):Q()}function E4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Sa=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xf=class{constructor(e){this.ct=e}};function I4(t,e){let n;if(e.document)n=qx(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=G.fromSegments(e.noDocument.path),i=Yo(e.noDocument.readTime);n=vt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{let r=G.fromSegments(e.unknownDocument.path),i=Yo(e.unknownDocument.version);n=vt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new ze(i[0],i[1]);return ie.fromTimestamp(o)}(e.readTime)),n}function ES(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Xu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Aa(o,s.version.toTimestamp()),createTime:Aa(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:n.path.toArray(),version:Qo(e.version)}}return r}function Jf(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yo(t){let e=new ze(t.seconds,t.nanoseconds);return ie.fromTimestamp(e)}function Lo(t,e){let n=(e.baseMutations||[]).map(o=>x_(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>x_(t.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new Wu(e.batchId,i,n,r)}function Nu(t){let e=Yo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yo(t.lastLimboFreeSnapshotVersion):ie.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return ne(o.documents.length===1),tn(La(jx(o.documents[0])))}(t.query):function(o){return tn(Gx(o))}(t.query),new Sa(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,st.fromBase64String(t.resumeToken))}function Yx(t,e){let n=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion),i;i=zf(e.target)?Hx(t.ct,e.target):zx(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function rE(t){let e=Gx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}function qv(t,e){return new Ku(e.largestBatchId,x_(t.ct,e.overlayMutation))}function IS(t,e){let n=e.path.lastSegment();return[t,en(e.path.popLast()),n]}function DS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Qo(r.readTime),documentKey:en(r.documentKey.path),largestBatchId:r.largestBatchId}}var M_=class{getBundleMetadata(e,n){return CS(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Yo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return CS(e).put(function(i){return{bundleId:i.id,createTime:Qo(ot(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return bS(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:rE(o.bundledQuery),readTime:Yo(o.readTime)}}(r)})}saveNamedQuery(e,n){return bS(e).put(function(i){return{name:i.name,readTime:Qo(ot(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function CS(t){return Dt(t,"bundles")}function bS(t){return Dt(t,"namedQueries")}var Zf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return xu(e).get(IS(this.userId,n)).next(r=>r?qv(this.serializer,r):null)}getOverlays(e,n){let r=fr();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Ku(n,s);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(en(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(xu(e).j("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,n,r){let i=fr(),o=en(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return xu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=qv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=fr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return xu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=qv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return xu(e).put(function(i,o,s){let[a,c,l]=IS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ju(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function xu(t){return Dt(t,"documentOverlays")}var F_=class{Pt(e){return Dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?st.fromUint8Array(r):st.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Kr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ju(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Yr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt($i(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?hx(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Np(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(qe(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Kr.vt=new Kr;function D4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function TS(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=D4(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var R_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=TS(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=TS(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},P_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},N_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Bo=class{constructor(){this.jt=new R_,this.Ht=new P_(this.jt),this.Jt=new N_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var jo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ni(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=AS(t.arrayValue,e.arrayValue),n!==0?n:(n=AS(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function AS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var ep=class{constructor(e){this.Xt=new ke((n,r)=>it.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;let n=t_(e);if(n!==void 0&&!this.sn(n))return!1;let r=Oo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ke(it.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new va(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new va(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new va(r.field,r.dir==="asc"?0:1)));return new Ia(Ia.UNKNOWN_ID,this.collectionId,n,Bu.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Xx(t){var e,n;if(ne(t instanceof _e||t instanceof Me),t instanceof _e){if(t instanceof Hf){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>_e.create(t.field,"==",o)))||[];return Me.create(i,"or")}return t}let r=t.filters.map(i=>Xx(i));return Me.create(r,t.op)}function C4(t){if(t.getFilters().length===0)return[];let e=O_(Xx(t));return ne(Jx(e)),U_(e)||k_(e)?[e]:e.getFilters()}function U_(t){return t instanceof _e}function k_(t){return t instanceof Me&&Jw(t)}function Jx(t){return U_(t)||k_(t)||function(n){if(n instanceof Me&&u_(n)){for(let r of n.getFilters())if(!U_(r)&&!k_(r))return!1;return!0}return!1}(t)}function O_(t){if(ne(t instanceof _e||t instanceof Me),t instanceof _e)return t;if(t.filters.length===1)return O_(t.filters[0]);let e=t.filters.map(r=>O_(r)),n=Me.create(e,t.op);return n=tp(n),Jx(n)?n:(ne(n instanceof Me),ne(Ca(n)),ne(n.filters.length>1),n.filters.reduce((r,i)=>iE(r,i)))}function iE(t,e){let n;return ne(t instanceof _e||t instanceof Me),ne(e instanceof _e||e instanceof Me),n=t instanceof _e?e instanceof _e?function(i,o){return Me.create([i,o],"and")}(t,e):SS(t,e):e instanceof _e?SS(e,t):function(i,o){if(ne(i.filters.length>0&&o.filters.length>0),Ca(i)&&Ca(o))return yx(i,o.getFilters());let s=u_(i)?i:o,a=u_(i)?o:i,c=s.filters.map(l=>iE(l,a));return Me.create(c,"or")}(t,e),tp(n)}function SS(t,e){if(Ca(e))return yx(e,t.getFilters());{let n=e.filters.map(r=>iE(t,r));return Me.create(n,"or")}}function tp(t){if(ne(t instanceof _e||t instanceof Me),t instanceof _e)return t;let e=t.getFilters();if(e.length===1)return tp(e[0]);if(gx(t))return t;let n=e.map(i=>tp(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Me&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Me.create(r,t.op)}var V_=class{constructor(){this.un=new Zu}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Sn.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Zu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ke(Ee.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(Ee.comparator)).toArray()}};var Af=new Uint8Array(0),L_=class{constructor(e,n){this.databaseId=n,this.cn=new Zu,this.ln=new _r(r=>Wo(r),(r,i)=>cl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:r,parent:en(i)};return xS(e).put(o)}return x.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[ex(n),""],!1,!0);return xS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(hr(s.parent))}return r})}addFieldIndex(e,n){let r=Mu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=la(e);return o.next(a=>{s.put(DS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Mu(e),i=la(e),o=ua(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Mu(e),r=ua(e),i=la(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return x.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new ep(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ua(e),i=!0,o=new Map;return x.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return x.forEach(o,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(c)} to execute ${Wo(n)}`);let d=function(U,V){let Y=t_(V);if(Y===void 0)return null;for(let X of Gf(U,Y.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,c),f=function(U,V){let Y=new Map;for(let X of Oo(V))for(let E of Gf(U,X.fieldPath))switch(E.op){case"==":case"in":Y.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Y.set(X.fieldPath.canonicalString(),E.value),Array.from(Y.values())}return null}(l,c),g=function(U,V){let Y=[],X=!0;for(let E of Oo(V)){let v=E.kind===0?cS(U,E.fieldPath,U.startAt):uS(U,E.fieldPath,U.startAt);Y.push(v.value),X&&(X=v.inclusive)}return new vr(Y,X)}(l,c),y=function(U,V){let Y=[],X=!0;for(let E of Oo(V)){let v=E.kind===0?uS(U,E.fieldPath,U.endAt):cS(U,E.fieldPath,U.endAt);Y.push(v.value),X&&(X=v.inclusive)}return new vr(Y,X)}(l,c),I=this.In(c,l,g),A=this.In(c,l,y),C=this.Tn(c,l,f),P=this.En(c.indexId,d,I,g.inclusive,A,y.inclusive,C);return x.forEach(P,B=>r.G(B,n.limit).next(U=>{U.forEach(V=>{let Y=G.fromSegments(V.documentKey);s.has(Y)||(s=s.add(Y),a.push(Y))})}))}).next(()=>a)}return x.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=C4(Me.create(e.filters,"and")).map(r=>v_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){let g=n?this.dn(n[f/l]):Af,y=this.An(e,g,r[f%l],i),I=this.Rn(e,g,o[f%l],s),A=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(y,I,A))}return d}An(e,n,r,i){let o=new jo(e,G.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){let o=new jo(e,G.empty(),n,r);return i?o.Zt():o}Pn(e,n){let r=new ep(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.hn(n);return x.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new ke(it.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Bo;for(let i of Oo(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Kr.vt.It(o,s)}return r.zt()}dn(e){let n=new Bo;return Kr.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Bo;return Kr.vt.It(zo(this.databaseId,n),r.Yt(function(o){let s=Oo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Bo);let o=0;for(let s of Oo(e)){let a=r[o++];for(let c of i)if(this.fn(n,s.fieldPath)&&zu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Kr.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Bo;c.seed(a.zt()),Kr.vt.It(s,c.Yt(n.kind)),o.push(c)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Mu(e),i=la(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new Bu(f.sequenceNumber,new Sn(Yo(f.readTime),new G(hr(f.documentKey)),f.largestBatchId)):Bu.empty(),y=d.fields.map(([I,A])=>new va(it.fromServerFormat(I),A));return new Ia(d.indexId,d.collectionGroup,y,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ce(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Mu(e),o=la(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,c=>o.put(DS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return x.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(o,c);return l.isEqual(d)?x.resolve():this.bn(e,o,c,l,d)}))))})}Dn(e,n,r,i){return ua(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ua(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=ua(e),o=new ke(Ni);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new jo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new ke(Ni),i=this.Vn(n,e);if(i==null)return r;let o=t_(n);if(o!=null){let s=e.data.field(o.fieldPath);if(zu(s))for(let a of s.arrayValue.values||[])r=r.add(new jo(n.indexId,e.key,this.dn(a),i))}else r=r.add(new jo(n.indexId,e.key,Af,i));return r}bn(e,n,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,d,f,g){let y=c.getIterator(),I=l.getIterator(),A=ca(y),C=ca(I);for(;A||C;){let P=!1,B=!1;if(A&&C){let U=d(A,C);U<0?B=!0:U>0&&(P=!0)}else A!=null?B=!0:P=!0;P?(f(C),C=ca(I)):B?(g(A),A=ca(y)):(A=ca(y),C=ca(I))}}(i,o,Ni,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),x.waitFor(s)}yn(e){let n=1;return la(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ni(s,a)).filter((s,a,c)=>!a||Ni(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ni(s,e),c=Ni(s,n);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Af,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Af,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,n){return Ni(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(MS)}getMinOffset(e,n){return x.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Q())).next(MS)}};function xS(t){return Dt(t,"collectionParents")}function ua(t){return Dt(t,"indexEntries")}function Mu(t){return Dt(t,"indexConfiguration")}function la(t){return Dt(t,"indexState")}function MS(t){ne(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Kw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,n)}var FS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},An=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Zx(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{ne(a===1)}));let l=[];for(let d of n.mutations){let f=sx(e,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return x.waitFor(o).next(()=>l)}function np(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q();e=t.noDocument}return JSON.stringify(e).length}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(41943040,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);var rp=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ne(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ui(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=ma(e),s=Ui(e);return s.add({}).next(a=>{ne(typeof a=="number");let c=new Wu(a,n,r,i),l=function(y,I,A){let C=A.baseMutations.map(B=>Ju(y.ct,B)),P=A.mutations.map(B=>Ju(y.ct,B));return{userId:I,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,c),d=[],f=new ke((g,y)=>ce(g.canonicalString(),y.canonicalString()));for(let g of i){let y=sx(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,M3))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),x.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return Ui(e).get(n).next(r=>r?(ne(r.userId===this.userId),Lo(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?x.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ui(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(ne(a.batchId>=r),o=Lo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ui(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ui(e).U("userMutationsIndex",n).next(r=>r.map(i=>Lo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Ff(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return ma(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,g=hr(d);if(l===this.userId&&n.path.isEqual(g))return Ui(e).get(f).next(y=>{if(!y)throw Q();ne(y.userId===this.userId),o.push(Lo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(ce),i=[];return n.forEach(o=>{let s=Ff(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ma(e).J({range:a},(l,d,f)=>{let[g,y,I]=l,A=hr(y);g===this.userId&&o.path.isEqual(A)?r=r.add(I):f.done()});i.push(c)}),x.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Ff(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ke(ce);return ma(e).J({range:s},(c,l,d)=>{let[f,g,y]=c,I=hr(g);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Ui(e).get(o).next(s=>{if(s===null)throw Q();ne(s.userId===this.userId),r.push(Lo(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Zx(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ma(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=hr(o[1]);i.push(c)}else a.done()}).next(()=>{ne(i.length===0)})})}containsKey(e,n){return eM(e,this.userId,n)}Nn(e){return tM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function eM(t,e,n){let r=Ff(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ma(t).J({range:o,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Ui(t){return Dt(t,"mutations")}function ma(t){return Dt(t,"documentMutations")}function tM(t){return Dt(t,"mutationQueues")}var xa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var B_=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new xa(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ie.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>da(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return da(e).J((s,a)=>{let c=Nu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,n){return da(e).J((r,i)=>{let o=Nu(i);n(o)})}qn(e){return RS(e).get("targetGlobalKey").next(n=>(ne(n!==null),n))}Qn(e,n){return RS(e).put("targetGlobalKey",n)}Kn(e,n){return da(e).put(Yx(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Wo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return da(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Nu(a);cl(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=ki(e);return n.forEach(s=>{let a=en(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,n,r){let i=ki(e);return x.forEach(n,o=>{let s=en(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=ki(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ki(e),o=de();return i.J({range:r,H:!0},(s,a,c)=>{let l=hr(s[1]),d=new G(l);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=en(n.path),i=IDBKeyRange.bound([r],[ex(r)],!1,!0),o=0;return ki(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return da(e).get(n).next(r=>r?Nu(r):null)}};function da(t){return Dt(t,"targets")}function RS(t){return Dt(t,"targetGlobal")}function ki(t){return Dt(t,"targetDocuments")}function PS([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var j_=class{constructor(e){this.Un=e,this.buffer=new ke(PS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();PS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},$_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xi(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Yi(n)}yield this.Hn(3e5)}))}},q_=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(mn.oe);let r=new j_(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(FS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ha()<=Jn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function b4(t,e){return new q_(t,e)}var H_=class{constructor(e,n){this.db=e,this.garbageCollector=b4(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Sf(e,r)}removeReference(e,n,r){return Sf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Sf(e,n)}nr(e,n){return function(i,o){let s=!1;return tM(i).Y(a=>eM(i,a,o).next(c=>(c&&(s=!0),x.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ie.min()),ki(e).delete(function(f){return[0,en(f.path)]}(s))))});i.push(c)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Sf(e,n)}tr(e,n){let r=ki(e),i,o=mn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==mn.oe&&n(new G(hr(i)),o),o=l,i=c):o=mn.oe}).next(()=>{o!==mn.oe&&n(new G(hr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Sf(t,e){return ki(t).put(function(r,i){return{targetId:0,path:en(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var ip=class{constructor(){this.changes=new _r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var z_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ko(e).put(r)}removeEntry(e,n,r){return ko(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Jf(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=vt.newInvalidDocument(n);return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:vt.newInvalidDocument(n)};return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(n))},(i,o)=>{r={document:this.ir(n,o),size:np(o)}}).next(()=>r)}getEntries(e,n){let r=un();return this._r(e,n,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=un(),i=new je(G.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,np(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return x.resolve();let i=new ke(kS);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Fu(i.first()),Fu(i.last())),s=i.getIterator(),a=s.getNext();return ko(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=G.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&kS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(Fu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Jf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ko(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=un();for(let f of l){let g=this.ir(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(ll(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=un(),s=US(n,r),a=US(n,Sn.max());return ko(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.ir(G.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new G_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return NS(e).get("remoteDocumentGlobalKey").next(n=>(ne(!!n),n))}rr(e,n){return NS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=I4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return vt.newInvalidDocument(e)}};function nM(t){return new z_(t)}var G_=class extends ip{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new _r(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ke((o,s)=>ce(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=ES(this.cr.serializer,s);i=i.add(o.path.popLast());let l=np(c);r+=l-a.size,n.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=ES(this.cr.serializer,s.convertToNoDocument(ie.min()));n.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function NS(t){return Dt(t,"remoteDocumentGlobal")}function ko(t){return Dt(t,"remoteDocumentsV14")}function Fu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function US(t,e){let n=e.documentKey.path.toArray();return[t,Jf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ce(n[o],r[o]),i)return i;return i=ce(n.length,r.length),i||(i=ce(n[n.length-2],r[r.length-2]),i||ce(n[n.length-1],r[r.length-1]))}var W_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var op=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ou(r.mutation,i,yn.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=fr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Pu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=un(),s=ku(),a=function(){return ku()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Wn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Ou(d.mutation,l,d.mutation.getFieldMask(),ze.now())):s.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new W_(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ku(),i=new je((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||yn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=Tx();d.forEach(g=>{if(!o.has(g)){let y=Px(n.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(fr()),a=-1,c=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,de())).next(d=>({batchId:a,changes:bx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Pu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Pu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=function(f,g){return new Gn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,vt.newInvalidDocument(d)))});let a=Pu();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Ou(d.mutation,l,yn.empty(),ze.now()),ll(n,l)&&(a=a.insert(c,l))}),a})}};var K_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:rE(i.bundledQuery),readTime:ot(i.readTime)}}(n)),x.resolve()}};var Q_=class{constructor(){this.overlays=new je(G.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=fr();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=fr(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new je((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=fr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=fr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ku(n,r));let o=this.Ir.get(n);o===void 0&&(o=de(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var Y_=class{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var el=class{constructor(){this.Tr=new ke(mt.Er),this.dr=new ke(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new G(new Ee([])),r=new mt(n,e),i=new mt(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new Ee([])),r=new mt(n,e),i=new mt(n,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},mt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}};var X_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ke(mt.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Wu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new mt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(ce);return n.forEach(i=>{let o=new mt(i,0),s=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new mt(new G(o),0),a=new ke(ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let o=new mt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var J_=class{constructor(e){this.Mr=e,this.docs=function(){return new je(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():vt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=un(),s=n.path,a=new G(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Kw(nx(d),r)<=0||(i.has(d.key)||ll(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z_(this)}getSize(e){return x.resolve(this.size)}},Z_=class extends ip{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var ew=class{constructor(e){this.persistence=e,this.Nr=new _r(n=>Wo(n),cl),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new el,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var sp=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mn(0),this.Kr=!1,this.Kr=!0,this.$r=new Y_,this.referenceDelegate=e(this),this.Ur=new ew(this),this.indexManager=new V_,this.remoteDocumentCache=function(i){return new J_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Xf(n),this.Gr=new K_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new X_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new tw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},tw=class extends Lf{constructor(e){super(),this.currentSequenceNumber=e}},ap=class t{constructor(e){this.persistence=e,this.Jr=new el,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var nw=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Bf("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J1,{unique:!0}),c.createObjectStore("documentMutations")}(e),OS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),OS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J1,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return x.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:$3});l.createIndex("collectionPathOverlayIndex",q3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",H3,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:F3});l.createIndex("documentKeyIndex",R3),l.createIndex("collectionGroupIndex",P3)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:V3}).createIndex("sequenceNumberIndex",L3,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:B3}).createIndex("documentKeyIndex",j3,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=np(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>x.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>x.forEach(a,c=>{ne(c.userId===o.userId);let l=Lo(this.serializer,c);return Zx(e,o.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ee(s),l=function(f){return[0,en(f)]}(c);o.push(n.get(l).next(d=>d?x.resolve():(f=>n.put({targetId:0,path:en(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>x.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:O3});let r=n.store("collectionParents"),i=new Zu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:en(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ee(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=hr(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let o=Nu(i),s=Yx(this.serializer,o);return n.put(s)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new G(Ee.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):Q()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=nM(this.serializer),o=new sp(ap.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Lo(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),x.forEach(a,(c,l)=>{let d=new yt(l),f=Zf.lt(this.serializer,d),g=o.getIndexManager(d),y=rp.lt(d,this.serializer,g,o.referenceDelegate);return new op(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new $u(n,mn.oe),c).next()})})}};function OS(t){t.createObjectStore("targetDocuments",{keyPath:U3}).createIndex("documentTargetsIndex",k3,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N3,{unique:!0}),t.createObjectStore("targetGlobal")}var Hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rw=class t{constructor(e,n,r,i,o,s,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H_(this,i),this.Ai=n+"main",this.serializer=new Xf(c),this.Ri=new ji(this.Ai,this.hi,new nw(this.serializer)),this.$r=new F_,this.Ur=new B_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nM(this.serializer),this.Gr=new M_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Hv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new mn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>M(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>M(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Xi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ru(e).get("owner").next(n=>x.resolve(this.vi(n)))}Ci(e){return xf(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Dt(n,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return x.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?x.resolve(!0):Ru(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Hv);return!1}}return!(!this.networkEnabled||!this.inForeground)||xf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new $u(e,mn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>xf(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return rp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Zf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===17?W3:c===16?G3:c===15?Yw:c===14?ux:c===13?cx:c===12?z3:c===11?ax:void Q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new $u(a,this.Qr?this.Qr.next():mn.oe),n==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,rx);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ru(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,Hv)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put("owner",n)}static D(){return ji.D()}bi(e){let n=Ru(e);return n.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;qg()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){rt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ru(t){return Dt(t,"owner")}function xf(t){return Dt(t,"clientMetadata")}function oE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var iw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ow=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qg()?8:ix(bc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ow;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ha()<=Jn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(ha()<=Jn.DEBUG&&O("QueryEngine","Query:",fa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ha()<=Jn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):x.resolve())}Yi(e,n){if(lS(n))return x.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Wf(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,s,c.readTime)?this.Yi(e,Wf(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return lS(n)||i.isEqual(ie.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?x.resolve(null):(ha()<=Jn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fa(n)),this.rs(e,s,n,tx(i,-1)).next(a=>a))})}ts(e,n){let r=new ke(Dx(e));return n.forEach((i,o)=>{ll(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return ha()<=Jn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",fa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Sn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sw=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new je(ce),this._s=new _r(o=>Wo(o),cl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new op(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function rM(t,e,n,r){return new sw(t,e,n,r)}function iM(t,e){return M(this,null,function*(){let n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=de();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function T4(t,e){let n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(c,I)).next(A=>{let C=l.docVersions.get(I);ne(C!==null),A.version.compareTo(C)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function oM(t){let e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function A4(t,e){let n=z(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(st.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(A,C,P){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(o,y))});let c=un(),l=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(sM(o,s,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ie.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.os=i,o))}function sM(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=un();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function S4(t,e){let n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ma(t,e){let n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Sa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Fa(t,e,n){return M(this,null,function*(){let r=z(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function up(t,e,n){let r=z(t),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=z(c),g=f._s.get(d);return g!==void 0?x.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:de())).next(a=>(uM(r,Ix(e),a),{documents:a,Ts:o})))}function aM(t,e){let n=z(t),r=z(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function cM(t,e){let n=z(t),r=n.us.get(e)||ie.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,tx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uM(n,e,i),i))}function uM(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}function x4(t,e,n,r){return M(this,null,function*(){let i=z(t),o=de(),s=un();for(let l of n){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Ma(i,function(d){return tn(La(Ee.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>sM(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function M4(r,i){return M(this,arguments,function*(t,e,n=de()){let o=yield Ma(t,tn(rE(e.bundledQuery))),s=z(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ot(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(st.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function VS(t,e){return`firestore_clients_${t}_${e}`}function LS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function zv(t,e){return`firestore_targets_${t}_${e}`}var lp=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new t(e,r.state,i):(rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},dp=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=eE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=ox(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},aw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(rt("SharedClientState",`Failed to parse online state: ${e}`),null)}},tl=class{constructor(){this.activeTargetIds=eE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Lu=class{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new je(ce),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=VS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new tl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(VS(this.persistenceKey,r));if(i){let o=dp.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(zv(this.persistenceKey,e));if(i){let o=Vu.Rs(e,i);o&&(r=o.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zv(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(o){let s=mn.oe;if(o!=null)try{let a=JSON.parse(o);ne(typeof a=="number"),s=a}catch(a){rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==mn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new lp(this.currentUser,e,n,r),o=LS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let n=LS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=zv(this.persistenceKey,e),o=new Vu(e,n,r);this.setItem(i,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return dp.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return lp.Rs(new yt(o),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return Vu.Rs(i,n)}Ls(e){return aw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=eE();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},hp=class{constructor(){this.so=new tl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cw=class{_o(e){}shutdown(){}};var fp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mf=null;function Gv(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}var F4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var jt="WebChannelConnection",lw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=Gv(),c=this.xo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,c,l,i).then(d=>(O("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw zn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=F4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Gv();return new Promise((s,a)=>{let c=new Vv;c.setWithCredentials(!0),c.listenOnce(Lv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Su.NO_ERROR:let d=c.getResponseJson();O(jt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Su.TIMEOUT:O(jt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:let f=c.getStatus();if(O(jt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let I=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(P)>=0?P:R.UNKNOWN}(y.status);a(new k(I,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{O(jt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(jt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Gv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$v(),a=jv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=o.join("");O(jt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,y=!1,I=new uw({Io:C=>{y?O(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(O(jt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(jt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),A=(C,P,B)=>{C.listen(P,U=>{try{B(U)}catch(V){setTimeout(()=>{throw V},0)}})};return A(f,aa.EventType.OPEN,()=>{y||(O(jt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),A(f,aa.EventType.CLOSE,()=>{y||(y=!0,O(jt,`RPC '${e}' stream ${i} transport closed`),I.So())}),A(f,aa.EventType.ERROR,C=>{y||(y=!0,zn(jt,`RPC '${e}' stream ${i} transport errored:`,C),I.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(f,aa.EventType.MESSAGE,C=>{var P;if(!y){let B=C.data[0];ne(!!B);let U=B,V=U.error||((P=U[0])===null||P===void 0?void 0:P.error);if(V){O(jt,`RPC '${e}' stream ${i} received error:`,V);let Y=V.status,X=function(_){let D=gt[_];if(D!==void 0)return kx(D)}(Y),E=V.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+Y+" with message "+V.message),y=!0,I.So(new k(X,E)),f.close()}else O(jt,`RPC '${e}' stream ${i} received:`,B),I.bo(B)}}),A(a,Bv.STAT_EVENT,C=>{C.stat===Tf.PROXY?O(jt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Tf.NOPROXY&&O(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function lM(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}function dl(t){return new b_(t,!0)}var nl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var pp=class{constructor(e,n,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nl(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(rt(n.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dw=class extends pp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=g4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?ot(s.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=S_(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=zf(c)?{documents:Hx(o,c)}:{query:zx(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Vx(o,s.resumeToken);let l=T_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Aa(o,s.snapshotVersion.toTimestamp());let l=T_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=y4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=S_(this.serializer),n.removeTarget=e,this.a_(n)}},hw=class extends pp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=m4(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=S_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ju(this.serializer,r))};this.a_(n)}};var fw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,A_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,A_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},pw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rt(n),this.D_=!1):O("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var gw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){Ji(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return M(this,null,function*(){let l=z(c);l.L_.add(4),yield Ba(l),l.q_.set("Unknown"),l.L_.delete(4),yield hl(l)})}(this))}))}),this.q_=new pw(r,i)}};function hl(t){return M(this,null,function*(){if(Ji(t))for(let e of t.B_)yield e(!0)})}function Ba(t){return M(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Up(t,e){let n=z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cE(n)?aE(n):$a(n).r_()&&sE(n,e))}function Ra(t,e){let n=z(t),r=$a(n);n.N_.delete(e),r.r_()&&dM(n,e),n.N_.size===0&&(r.r_()?r.o_():Ji(n)&&n.q_.set("Unknown"))}function sE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$a(t).A_(e)}function dM(t,e){t.Q_.xe(e),$a(t).R_(e)}function aE(t){t.Q_=new C_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$a(t).start(),t.q_.v_()}function cE(t){return Ji(t)&&!$a(t).n_()&&t.N_.size>0}function Ji(t){return z(t).L_.size===0}function hM(t){t.Q_=void 0}function R4(t){return M(this,null,function*(){t.q_.set("Online")})}function P4(t){return M(this,null,function*(){t.N_.forEach((e,n)=>{sE(t,e)})})}function N4(t,e){return M(this,null,function*(){hM(t),cE(t)?(t.q_.M_(e),aE(t)):t.q_.set("Unknown")})}function U4(t,e,n){return M(this,null,function*(){if(t.q_.set("Online"),e instanceof Qf&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gp(t,r)}else if(e instanceof wa?t.Q_.Ke(e):e instanceof Kf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{let r=yield oM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(st.EMPTY_BYTE_STRING,d.snapshotVersion)),dM(o,c);let f=new Sa(d.target,c,l,d.sequenceNumber);sE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield gp(t,r)}})}function gp(t,e,n){return M(this,null,function*(){if(!Xi(e))throw e;t.L_.add(1),yield Ba(t),t.q_.set("Offline"),n||(n=()=>oM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield hl(t)}))})}function fM(t,e){return e().catch(n=>gp(t,n,e))}function ja(t){return M(this,null,function*(){let e=z(t),n=Qi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;k4(e);)try{let i=yield S4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,O4(e,i)}catch(i){yield gp(e,i)}pM(e)&&gM(e)})}function k4(t){return Ji(t)&&t.O_.length<10}function O4(t,e){t.O_.push(e);let n=Qi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function pM(t){return Ji(t)&&!Qi(t).n_()&&t.O_.length>0}function gM(t){Qi(t).start()}function V4(t){return M(this,null,function*(){Qi(t).p_()})}function L4(t){return M(this,null,function*(){let e=Qi(t);for(let n of t.O_)e.m_(n.mutations)})}function B4(t,e,n){return M(this,null,function*(){let r=t.O_.shift(),i=E_.from(r,e,n);yield fM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ja(t)})}function j4(t,e){return M(this,null,function*(){e&&Qi(t).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return Ux(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Qi(r).s_(),yield fM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ja(r)}})}(t,e)),pM(t)&&gM(t)})}function BS(t,e){return M(this,null,function*(){let n=z(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Ji(n);n.L_.add(3),yield Ba(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield hl(n)})}function mw(t,e){return M(this,null,function*(){let n=z(t);e?(n.L_.delete(2),yield hl(n)):e||(n.L_.add(2),yield Ba(n),n.q_.set("Unknown"))})}function $a(t){return t.K_||(t.K_=function(n,r,i){let o=z(n);return o.w_(),new dw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:R4.bind(null,t),Ro:P4.bind(null,t),mo:N4.bind(null,t),d_:U4.bind(null,t)}),t.B_.push(e=>M(this,null,function*(){e?(t.K_.s_(),cE(t)?aE(t):t.q_.set("Unknown")):(yield t.K_.stop(),hM(t))}))),t.K_}function Qi(t){return t.U_||(t.U_=function(n,r,i){let o=z(n);return o.w_(),new hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:V4.bind(null,t),mo:j4.bind(null,t),f_:L4.bind(null,t),g_:B4.bind(null,t)}),t.B_.push(e=>M(this,null,function*(){e?(t.U_.s_(),yield ja(t)):(yield t.U_.stop(),t.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var yw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qa(t,e){if(rt("AsyncQueue",`${e}: ${t}`),Xi(t))return new k(R.UNAVAILABLE,`${e}: ${t}`);throw t}var mp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Pu(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var yp=class{constructor(){this.W_=new je(G.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Pa=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,mp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var vw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},_w=class{constructor(){this.queries=jS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=z(n),o=i.queries;i.queries=jS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function jS(){return new _r(t=>Ex(t),ul)}function uE(t,e){return M(this,null,function*(){let n=z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new vw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=qa(s,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&dE(n)})}function lE(t,e){return M(this,null,function*(){let n=z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function $4(t,e){let n=z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&dE(n)}function q4(t,e,n){let r=z(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function dE(t){t.Y_.forEach(e=>{e.next()})}var ww,$S;($S=ww||(ww={})).ea="default",$S.Cache="cache";var rl=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ww.Cache}};var Ew=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var vp=class{constructor(e){this.serializer=e}Es(e){return gr(this.serializer,e)}ds(e){return e.metadata.exists?qx(this.serializer,e.document,!1):vt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ot(e)}},Iw=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=Ee.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new vp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||de()).add(o);n.set(s,a)}}return n}complete(){return M(this,null,function*(){let e=yield x4(this.localStore,new vp(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield M4(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function mM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var _p=class{constructor(e){this.key=e}},wp=class{constructor(e){this.key=e}},Ep=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=Dx(e),this.Ra=new mp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new yp,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=ll(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),C=!1;g&&y?g.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),C=!0):this.ga(g,y)||(r.track({type:2,doc:y}),C=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),C=!0):g&&!y&&(r.track({type:1,doc:g}),C=!0,(c||l)&&(a=!0)),C&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,I){let A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return A(y)-A(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Pa(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _p(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Dw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Cw=class{constructor(e){this.key=e,this.va=!1}},bw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new _r(a=>Ex(a),ul),this.Ma=new Map,this.xa=new Set,this.Oa=new je(G.comparator),this.Na=new Map,this.La=new el,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function H4(t,e,n=!0){return M(this,null,function*(){let r=kp(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield yM(r,e,n,!0),i})}function z4(t,e){return M(this,null,function*(){let n=kp(t);yield yM(n,e,!0,!1)})}function yM(t,e,n,r){return M(this,null,function*(){let i=yield Ma(t.localStore,tn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield hE(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Up(t.remoteStore,i),a})}function hE(t,e,n,r,i){return M(this,null,function*(){t.Ka=(f,g,y)=>function(A,C,P,B){return M(this,null,function*(){let U=C.view.ma(P);U.ns&&(U=yield up(A.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,U)));let V=B&&B.targetChanges.get(C.targetId),Y=B&&B.targetMismatches.get(C.targetId)!=null,X=C.view.applyChanges(U,A.isPrimaryClient,V,Y);return Tw(A,C.targetId,X.wa),X.snapshot})}(t,f,g,y);let o=yield up(t.localStore,e,!0),s=new Ep(e,o.Ts),a=s.ma(o.documents),c=Yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);Tw(t,n,l.wa);let d=new Dw(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function G4(t,e,n){return M(this,null,function*(){let r=z(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ul(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ra(r.remoteStore,i.targetId),Na(r,i.targetId)}).catch(Yi))):(Na(r,i.targetId),yield Fa(r.localStore,i.targetId,!0))})}function W4(t,e){return M(this,null,function*(){let n=z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ra(n.remoteStore,r.targetId))})}function K4(t,e,n){return M(this,null,function*(){let r=mE(t);try{let i=yield function(s,a){let c=z(s),l=ze.now(),d=a.reduce((y,I)=>y.add(I.key),de()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=un(),A=de();return c.cs.getEntries(y,d).next(C=>{I=C,I.forEach((P,B)=>{B.isValidDocument()||(A=A.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(C=>{f=C;let P=[];for(let B of a){let U=c4(B,f.get(B.key).overlayedDocument);U!=null&&P.push(new Wn(B.key,U,px(U.value.mapValue),Ze.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(y,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:bx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new je(ce)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield ti(r,i.changes),yield ja(r.remoteStore)}catch(i){let o=qa(i,"Failed to persist write");n.reject(o)}})}function vM(t,e){return M(this,null,function*(){let n=z(t);try{let r=yield A4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ne(s.va):i.removedDocuments.size>0&&(ne(s.va),s.va=!1))}),yield ti(n,r,e)}catch(r){yield Yi(r)}})}function qS(t,e,n){let r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=z(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&dE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Q4(t,e,n){return M(this,null,function*(){let r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new je(G.comparator);s=s.insert(o,vt.newNoDocument(o,ie.min()));let a=de().add(o),c=new Qu(ie.min(),new Map,new je(ce),s,a);yield vM(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),gE(r)}else yield Fa(r.localStore,e,!1).then(()=>Na(r,e,n)).catch(Yi)})}function Y4(t,e){return M(this,null,function*(){let n=z(t),r=e.batch.batchId;try{let i=yield T4(n.localStore,e);pE(n,r,null),fE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ti(n,i)}catch(i){yield Yi(i)}})}function X4(t,e,n){return M(this,null,function*(){let r=z(t);try{let i=yield function(s,a){let c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ne(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);pE(r,e,n),fE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ti(r,i)}catch(i){yield Yi(i)}})}function J4(t,e){return M(this,null,function*(){let n=z(t);Ji(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=z(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=qa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function fE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function pE(t,e,n){let r=z(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Na(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||_M(t,r)})}function _M(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Ra(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gE(t))}function Tw(t,e,n){for(let r of n)r instanceof _p?(t.La.addReference(r.key,e),Z4(t,r)):r instanceof wp?(O("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_M(t,r.key)):Q()}function Z4(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(O("SyncEngine","New document in limbo: "+n),t.xa.add(r),gE(t))}function gE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new Cw(n)),t.Oa=t.Oa.insert(n,r),Up(t.remoteStore,new Sa(tn(La(n.path)),r,"TargetPurposeLimboResolution",mn.oe))}}function ti(t,e,n){return M(this,null,function*(){let r=z(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=iw.Wi(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return M(this,null,function*(){let d=z(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Xi(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,A)}}})}(r.localStore,o))})}function e9(t,e){return M(this,null,function*(){let n=z(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield iM(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ti(n,r.hs)}})}function t9(t,e){let n=z(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function n9(t,e){return M(this,null,function*(){let n=z(t),r=yield up(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Tw(n,e.targetId,i.wa),i})}function r9(t,e){return M(this,null,function*(){let n=z(t);return cM(n.localStore,e).then(r=>ti(n,r))})}function i9(t,e,n,r){return M(this,null,function*(){let i=z(t),o=yield function(a,c){let l=z(a),d=z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):x.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ja(i.remoteStore):n==="acknowledged"||n==="rejected"?(pE(i,e,r||null),fE(i,e),function(a,c){z(z(a).mutationQueue).On(c)}(i.localStore,e)):Q(),yield ti(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function o9(t,e){return M(this,null,function*(){let n=z(t);if(kp(n),mE(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield HS(n,r.toArray());n.Qa=!0,yield mw(n.remoteStore,!0);for(let o of i)Up(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Na(n,s),Fa(n.localStore,s,!0))),Ra(n.remoteStore,s)}),yield i,yield HS(n,r),function(s){let a=z(s);a.Na.forEach((c,l)=>{Ra(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new je(G.comparator)}(n),n.Qa=!1,yield mw(n.remoteStore,!1)}})}function HS(t,e,n){return M(this,null,function*(){let r=z(t),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield Ma(r.localStore,tn(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield n9(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield aM(r.localStore,s);a=yield Ma(r.localStore,l),yield hE(r,wM(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function wM(t){return wx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function s9(t){return function(n){return z(z(n).persistence).Qi()}(z(t).localStore)}function a9(t,e,n,r){return M(this,null,function*(){let i=z(t);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield cM(i.localStore,Ix(o[0])),a=Qu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",st.EMPTY_BYTE_STRING);yield ti(i,s,a);break}case"rejected":yield Fa(i.localStore,e,!0),Na(i,e,r);break;default:Q()}})}function c9(t,e,n){return M(this,null,function*(){let r=kp(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield aM(r.localStore,i),s=yield Ma(r.localStore,o);yield hE(r,wM(o),s.targetId,!1,s.resumeToken),Up(r.remoteStore,s)}for(let i of n)r.Ma.has(i)&&(yield Fa(r.localStore,i,!1).then(()=>{Ra(r.remoteStore,i),Na(r,i)}).catch(Yi))}})}function kp(t){let e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q4.bind(null,e),e.Ca.d_=$4.bind(null,e.eventManager),e.Ca.$a=q4.bind(null,e.eventManager),e}function mE(t){let e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X4.bind(null,e),e}function u9(t,e,n){let r=z(t);(function(o,s,a){return M(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,I){let A=z(y),C=ot(I.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.Gr.getBundleMetadata(P,I.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(mM(c));let l=new Iw(c,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield ti(o,f.Ia,void 0),yield function(y,I){let A=z(y);return A.persistence.runTransaction("Save bundle","readwrite",C=>A.Gr.saveBundleMetadata(C,I))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return zn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Aw=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return M(this,null,function*(){this.serializer=dl(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return rM(this.persistence,new cp,n.initialUser,this.serializer)}Ga(n){return new sp(ap.Zr,this.serializer)}Wa(n){return new hp}terminate(){return M(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var Ip=class t extends Aw{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield jg(t.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield mE(this.Ja.syncEngine),yield ja(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return rM(this.persistence,new cp,e.initialUser,this.serializer)}ja(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new $_(r,e.asyncQueue,n)}Ha(e,n){let r=new o_(n,this.persistence);return new i_(e.asyncQueue,r)}Ga(e){let n=oE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new rw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,lM(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new hp}},Sw=class t extends Ip{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield jg(t.prototype,this,"initialize").call(this,e);let n=this.Ja.syncEngine;this.sharedClientState instanceof Lu&&(this.sharedClientState.syncEngine={no:i9.bind(null,n),ro:a9.bind(null,n),io:c9.bind(null,n),Qi:s9.bind(null,n),eo:r9.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield o9(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let n=lM();if(!Lu.D(n))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=oE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},yE=(()=>{class t{initialize(n,r){return M(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),yield mw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new _w}()}createDatastore(n){let r=dl(n.databaseInfo.databaseId),i=function(s){return new lw(s)}(n.databaseInfo);return function(s,a,c,l){return new fw(s,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,c){return new gw(i,o,s,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>qS(this.syncEngine,r,0),function(){return fp.D()?new fp:new cw}())}createSyncEngine(n,r){return function(o,s,a,c,l,d,f){let g=new bw(o,s,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var n,r;yield function(o){return M(this,null,function*(){let s=z(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ba(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();function zS(t,e=10240){let n=0;return{read(){return M(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ua=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var xw=class{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new It,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);let i=yield this.iu(r);return new Ew(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Mw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return M(this,null,function*(){let s=z(i),a={documents:o.map(f=>Xu(s.serializer,f))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=p4(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());ne(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ki(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=G.fromPath(r);this.mutations.push(new Gu(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=z(r),s={writes:i.map(a=>Ju(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q();n=ie.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ie.min())?Ze.exists(!1):Ze.updateTime(n):Ze.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ie.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ze.updateTime(n)}return Ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Fw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new nl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Mw(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let n=this.updateFunction(e);return!al(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Ux(n)}return!1}};var Rw=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=qa(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wv(t,e){return M(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield iM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function GS(t,e){return M(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield vE(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>BS(e.remoteStore,i)),t._onlineComponents=e})}function vE(t){return M(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zn("Error using user provided cache. Falling back to memory cache: "+n),yield Wv(t,new Aw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Wv(t,new Aw);return t._offlineComponents})}function Op(t){return M(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield GS(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield GS(t,new yE))),t._onlineComponents})}function EM(t){return vE(t).then(e=>e.persistence)}function _E(t){return vE(t).then(e=>e.localStore)}function IM(t){return Op(t).then(e=>e.remoteStore)}function wE(t){return Op(t).then(e=>e.syncEngine)}function l9(t){return Op(t).then(e=>e.datastore)}function ka(t){return M(this,null,function*(){let e=yield Op(t),n=e.eventManager;return n.onListen=H4.bind(null,e.syncEngine),n.onUnlisten=G4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W4.bind(null,e.syncEngine),n})}function d9(t){return t.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield EM(t),n=yield IM(t);return e.setNetworkEnabled(!0),function(i){let o=z(i);return o.L_.delete(0),hl(o)}(n)}))}function h9(t){return t.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield EM(t),n=yield IM(t);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=z(i);o.L_.add(0),yield Ba(o),o.q_.set("Offline")})}(n)}))}function f9(t,e){let n=new It;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,d){let f=z(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=qa(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield _E(t),e,n)})),n.promise}function DM(t,e,n={}){let r=new It;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let d=new Ua({next:g=>{d.Za(),s.enqueueAndForget(()=>lE(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new rl(La(a.path),d,{includeMetadataChanges:!0,_a:!0});return uE(o,f)}(yield ka(t),t.asyncQueue,e,n,r)})),r.promise}function p9(t,e){let n=new It;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield up(i,o,!0),c=new Ep(o,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=qa(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield _E(t),e,n)})),n.promise}function CM(t,e,n={}){let r=new It;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let d=new Ua({next:g=>{d.Za(),s.enqueueAndForget(()=>lE(o,f)),g.fromCache&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new rl(a,d,{includeMetadataChanges:!0,_a:!0});return uE(o,f)}(yield ka(t),t.asyncQueue,e,n,r)})),r.promise}function g9(t,e){let n=new Ua(e);return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){z(i).Y_.add(o),o.next()}(yield ka(t),n)})),()=>{n.Za(),t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){z(i).Y_.delete(o)}(yield ka(t),n)}))}}function m9(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?Ox().encode(s):s,function(d,f){return new xw(d,f)}(function(d,f){if(d instanceof Uint8Array)return zS(d,f);if(d instanceof ArrayBuffer)return zS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,dl(e));t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){u9(yield wE(t),i,r)}))}function y9(t,e){return t.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=z(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield _E(t),e)}))}function bM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var WS=new Map;function EE(t,e,n){if(!n)throw new k(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IE(t,e,n,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KS(t){if(!G.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QS(t){if(G.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function De(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Vp(t);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TM(t,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Dp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kv;switch(r.type){case"firstParty":return new Jv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=WS.get(n);r&&(O("ComponentProvider","Removing Datastore"),WS.delete(n),r.terminate())}(this),Promise.resolve()}};function AM(t,e,n,r={}){var i;let o=(t=De(t,Xo))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=ql(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}t._authCredentials=new Qv(new kf(a,c))}}var Mt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ve=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},mr=class t extends Mt{constructor(e,n,r){super(e,n,La(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function DE(t,e,...n){if(t=be(t),EE("collection","path",e),t instanceof Xo){let r=Ee.fromString(e,...n);return QS(r),new mr(t,null,r)}{if(!(t instanceof Ve||t instanceof mr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return QS(r),new mr(t.firestore,null,r)}}function SM(t,e){if(t=De(t,Xo),EE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mt(t,null,function(r){return new Gn(Ee.emptyPath(),r)}(e))}function fl(t,e,...n){if(t=be(t),arguments.length===1&&(e=Of.newId()),EE("doc","path",e),t instanceof Xo){let r=Ee.fromString(e,...n);return KS(r),new Ve(t,null,new G(r))}{if(!(t instanceof Ve||t instanceof mr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return KS(r),new Ve(t.firestore,t instanceof mr?t.converter:null,new G(r))}}function CE(t,e){return t=be(t),e=be(e),(t instanceof Ve||t instanceof mr)&&(e instanceof Ve||e instanceof mr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bE(t,e){return t=be(t),e=be(e),t instanceof Mt&&e instanceof Mt&&t.firestore===e.firestore&&ul(t._query,e._query)&&t.converter===e.converter}var Cp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nl(this,"async_queue_retry"),this.Vu=()=>{let r=Uf();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new It;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=yw.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function Pw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Nw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new It,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var xM=-1,Ge=class extends Xo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cp(e),this._firestoreClient=void 0,yield e}})}};function Ft(t){if(t._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MM(t),t._firestoreClient}function MM(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,d){return new s_(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bM(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Rw(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}function FM(t,e){zn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings();return PM(t,yE.provider,{build:r=>new Ip(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function RM(t){return M(this,null,function*(){zn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=t._freezeSettings();PM(t,yE.provider,{build:n=>new Sw(n,e.cacheSizeBytes)})})}function PM(t,e,n){if((t=De(t,Ge))._firestoreClient||t._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},MM(t)}function NM(t){if(t._initialized&&!t._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new It;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!ji.D())return Promise.resolve();let i=r+"main";yield ji.delete(i)})}(oE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function UM(t){return function(n){let r=new It;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return J4(yield wE(n),r)})),r.promise}(Ft(t=De(t,Ge)))}function kM(t){return d9(Ft(t=De(t,Ge)))}function OM(t){return h9(Ft(t=De(t,Ge)))}function VM(t,e){let n=Ft(t=De(t,Ge)),r=new Nw;return m9(n,t._databaseId,e,r),r}function LM(t,e){return y9(Ft(t=De(t,Ge)),e).then(n=>n?new Mt(t,null,n.query):null)}var wr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Kn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zr=class{constructor(e){this._methodName=e}};var Jo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var il=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var v9=/^__.*__$/,Uw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wi(e,this.data,n,this.fieldTransforms)}},bp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function BM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Tp=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ap(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BM(this.Cu)&&v9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},kw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dl(e)}Qu(e,n,r,i=!1){return new Tp({Cu:e,methodName:n,qu:r,path:it.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ns(t){let e=t._freezeSettings(),n=dl(t._databaseId);return new kw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lp(t,e,n,r,i,o={}){let s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);SE("Data must be an object, but it was:",s,r);let a=qM(r,s),c,l;if(o.merge)c=new yn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=jw(e,f,n);if(!s.contains(g))throw new k(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zM(d,g)||d.push(g)}c=new yn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new Uw(new $t(a),c,l)}var ol=class t extends Zr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function jM(t,e,n){return new Tp({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Ow=class t extends Zr{_toFieldTransform(e){return new Ko(e.path,new zi)}isEqual(e){return e instanceof t}},Vw=class t extends Zr{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){let n=jM(this,e,!0),r=this.Ku.map(o=>rs(o,n)),i=new Xr(r);return new Ko(e.path,i)}isEqual(e){return e instanceof t&&Hg(this.Ku,e.Ku)}},Lw=class t extends Zr{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){let n=jM(this,e,!0),r=this.Ku.map(o=>rs(o,n)),i=new Jr(r);return new Ko(e.path,i)}isEqual(e){return e instanceof t&&Hg(this.Ku,e.Ku)}},Bw=class t extends Zr{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){let n=new Gi(e.serializer,Sx(e.serializer,this.$u));return new Ko(e.path,n)}isEqual(e){return e instanceof t&&this.$u===e.$u}};function TE(t,e,n,r){let i=t.Qu(1,e,n);SE("Data must be an object, but it was:",i,r);let o=[],s=$t.empty();ts(r,(c,l)=>{let d=xE(e,c,n);l=be(l);let f=i.Nu(d);if(l instanceof ol)o.push(d);else{let g=rs(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new yn(o);return new bp(s,a,i.fieldTransforms)}function AE(t,e,n,r,i,o){let s=t.Qu(1,e,n),a=[jw(e,r,n)],c=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(jw(e,o[g])),c.push(o[g+1]);let l=[],d=$t.empty();for(let g=a.length-1;g>=0;--g)if(!zM(l,a[g])){let y=a[g],I=c[g];I=be(I);let A=s.Nu(y);if(I instanceof ol)l.push(y);else{let C=rs(I,A);C!=null&&(l.push(y),d.set(y,C))}}let f=new yn(l);return new bp(d,f,s.fieldTransforms)}function $M(t,e,n,r=!1){return rs(n,t.Qu(r?4:3,e))}function rs(t,e){if(HM(t=be(t)))return SE("Unsupported field value:",e,t),qM(t,e);if(t instanceof Zr)return function(r,i){if(!BM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=rs(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:Aa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Aa(i.serializer,o)}}if(r instanceof Jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wr)return{bytesValue:Vx(i.serializer,r._byteString)};if(r instanceof Ve){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof il)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return tE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vp(r)}`)}(t,e)}function qM(t,e){let n={};return lx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,i)=>{let o=rs(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function HM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Jo||t instanceof wr||t instanceof Ve||t instanceof Zr||t instanceof il)}function SE(t,e,n){if(!HM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Vp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jw(t,e,n){if((e=be(e))instanceof Kn)return e._internalPath;if(typeof e=="string")return xE(t,e);throw Ap("Field path arguments must be of type string or ",t,!1,void 0,n)}var _9=new RegExp("[~\\*/\\[\\]]");function xE(t,e,n){if(e.search(_9)>=0)throw Ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kn(...e.split("."))._internalPath}catch{throw Ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ap(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(R.INVALID_ARGUMENT,a+t+c)}function zM(t,e){return t.some(n=>n.isEqual(e))}var Zo=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $w(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Bp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},$w=class extends Zo{data(){return super.data()}};function Bp(t,e){return typeof e=="string"?xE(t,e):e instanceof Kn?e._internalPath:e._delegate._internalPath}function GM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sl=class{},es=class extends sl{};function ni(t,e,...n){let r=[];e instanceof sl&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof qw).length,a=o.filter(c=>c instanceof Sp).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Sp=class t extends es{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return nF(e._query,n),new Mt(e.firestore,e.converter,__(e._query,n))}_parse(e){let n=ns(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XS(f,d);let y=[];for(let I of f)y.push(YS(c,o,I));g={arrayValue:{values:y}}}else g=YS(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XS(f,d),g=$M(a,s,f,d==="in"||d==="not-in");return _e.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function WM(t,e,n){let r=e,i=Bp("where",t);return Sp._create(i,r,n)}var qw=class t extends sl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Me.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)nF(s,c),s=__(s,c)}(e._query,n),new Mt(e.firestore,e.converter,__(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Hw=class t extends es{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(o,s)}(e._query,this._field,this._direction);return new Mt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Gn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function KM(t,e="asc"){let n=e,r=Bp("orderBy",t);return Hw._create(r,n)}var xp=class t extends es{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Mt(e.firestore,e.converter,Wf(e._query,this._limit,this._limitType))}};function QM(t){return TM("limit",t),xp._create("limit",t,"F")}function YM(t){return TM("limitToLast",t),xp._create("limitToLast",t,"L")}var Mp=class t extends es{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=tF(e,this.type,this._docOrFields,this._inclusive);return new Mt(e.firestore,e.converter,function(i,o){return new Gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function XM(...t){return Mp._create("startAt",t,!0)}function JM(...t){return Mp._create("startAfter",t,!1)}var Fp=class t extends es{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=tF(e,this.type,this._docOrFields,this._inclusive);return new Mt(e.firestore,e.converter,function(i,o){return new Gn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function ZM(...t){return Fp._create("endBefore",t,!1)}function eF(...t){return Fp._create("endAt",t,!0)}function tF(t,e,n,r){if(n[0]=be(n[0]),n[0]instanceof Zo)return function(o,s,a,c,l){if(!c)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of _a(o))if(f.field.isKeyField())d.push(zo(s,c.key));else{let g=c.data.field(f.field);if(Pp(g))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new vr(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ns(t.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<d.length;I++){let A=d[I];if(g[I].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Zw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let C=s.path.child(Ee.fromString(A));if(!G.isDocumentKey(C))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new G(C);y.push(zo(a,P))}else{let C=$M(c,l,A);y.push(C)}}return new vr(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function YS(t,e,n){if(typeof(n=be(n))=="string"){if(n==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&n.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ee.fromString(n));if(!G.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zo(t,new G(r))}if(n instanceof Ve)return zo(t,n._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vp(n)}.`)}function XS(t,e){if(!Array.isArray(t)||t.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nF(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Oa=class{convertValue(e,n="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ts(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new il(o)}convertGeoPoint(e){return new Jo(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Xw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){let n=Yr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ee.fromString(e);ne(Qx(r));let i=new qi(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||rt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function jp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var zw=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}};var Qr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xn=class extends Zo{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Li(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Bp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Li=class extends xn{data(e={}){return super.data(e)}},Qn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Li(this._firestore,this._userDataWriter,r.key,r,new Qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Li(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Li(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:w9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function w9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function ME(t,e){return t instanceof xn&&e instanceof xn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qn&&e instanceof Qn&&t._firestore===e._firestore&&bE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function rF(t){t=De(t,Ve);let e=De(t.firestore,Ge);return DM(Ft(e),t._key).then(n=>NE(e,t,n))}var ei=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}};function iF(t){t=De(t,Ve);let e=De(t.firestore,Ge),n=Ft(e),r=new ei(e);return f9(n,t._key).then(i=>new xn(e,r,t._key,i,new Qr(i!==null&&i.hasLocalMutations,!0),t.converter))}function oF(t){t=De(t,Ve);let e=De(t.firestore,Ge);return DM(Ft(e),t._key,{source:"server"}).then(n=>NE(e,t,n))}function sF(t){t=De(t,Mt);let e=De(t.firestore,Ge),n=Ft(e),r=new ei(e);return GM(t._query),CM(n,t._query).then(i=>new Qn(e,r,t,i))}function aF(t){t=De(t,Mt);let e=De(t.firestore,Ge),n=Ft(e),r=new ei(e);return p9(n,t._query).then(i=>new Qn(e,r,t,i))}function cF(t){t=De(t,Mt);let e=De(t.firestore,Ge),n=Ft(e),r=new ei(e);return CM(n,t._query,{source:"server"}).then(i=>new Qn(e,r,t,i))}function FE(t,e,n){t=De(t,Ve);let r=De(t.firestore,Ge),i=jp(t.converter,e,n);return Ha(r,[Lp(ns(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ze.none())])}function RE(t,e,n,...r){t=De(t,Ve);let i=De(t.firestore,Ge),o=ns(i),s;return s=typeof(e=be(e))=="string"||e instanceof Kn?AE(o,"updateDoc",t._key,e,n,r):TE(o,"updateDoc",t._key,e),Ha(i,[s.toMutation(t._key,Ze.exists(!0))])}function uF(t){return Ha(De(t.firestore,Ge),[new Ki(t._key,Ze.none())])}function lF(t,e){let n=De(t.firestore,Ge),r=fl(t),i=jp(t.converter,e);return Ha(n,[Lp(ns(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function PE(t,...e){var n,r,i;t=be(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Pw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Pw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof Ve)l=De(t.firestore,Ge),d=La(t._key.path),c={next:f=>{e[s]&&e[s](NE(l,t,f))},error:e[s+1],complete:e[s+2]};else{let f=De(t,Mt);l=De(f.firestore,Ge),d=f._query;let g=new ei(l);c={next:y=>{e[s]&&e[s](new Qn(l,g,f,y))},error:e[s+1],complete:e[s+2]},GM(t._query)}return function(g,y,I,A){let C=new Ua(A),P=new rl(y,C,I);return g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return uE(yield ka(g),P)})),()=>{C.Za(),g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return lE(yield ka(g),P)}))}}(Ft(l),d,a,c)}function dF(t,e){return g9(Ft(t=De(t,Ge)),Pw(e)?e:{next:e})}function Ha(t,e){return function(r,i){let o=new It;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return K4(yield wE(r),i,o)})),o.promise}(Ft(t),e)}function NE(t,e,n){let r=n.docs.get(e._key),i=new ei(t);return new xn(t,i,e._key,r,new Qr(n.hasPendingWrites,n.fromCache),e.converter)}var E9={maxAttempts:5};var Rp=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ns(e)}set(e,n,r){this._verifyNotCommitted();let i=Oi(e,this._firestore),o=jp(i.converter,n,r),s=Lp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ze.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Oi(e,this._firestore),s;return s=typeof(n=be(n))=="string"||n instanceof Kn?AE(this._dataReader,"WriteBatch.update",o._key,n,r,i):TE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Oi(e,this._firestore);return this._mutations=this._mutations.concat(new Ki(n._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oi(t,e){if((t=be(t)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Gw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ns(n)}get(n){let r=Oi(n,this._firestore),i=new zw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Q();let s=o[0];if(s.isFoundDocument())return new Zo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Zo(this._firestore,i,r._key,null,r.converter);throw Q()})}set(n,r,i){let o=Oi(n,this._firestore),s=jp(o.converter,r,i),a=Lp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Oi(n,this._firestore),a;return a=typeof(r=be(r))=="string"||r instanceof Kn?AE(this._dataReader,"Transaction.update",s._key,r,i,o):TE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Oi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Oi(e,this._firestore),r=new ei(this._firestore);return super.get(e).then(i=>new xn(this._firestore,r,n._key,i._document,new Qr(!1,!1),n.converter))}};function hF(t,e,n){t=De(t,Ge);let r=Object.assign(Object.assign({},E9),n);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new It;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield l9(o);new Fw(o.asyncQueue,l,a,s,c).au()})),c.promise}(Ft(t),i=>e(new Gw(t,i)),r)}function fF(){return new ol("deleteField")}function pF(){return new Ow("serverTimestamp")}function gF(...t){return new Vw("arrayUnion",t)}function mF(...t){return new Lw("arrayRemove",t)}function yF(t){return new Bw("increment",t)}(function(e,n=!0){(function(i){Va=i})(Wl),so(new Fn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ge(new Yv(r.getProvider("auth-internal")),new e_(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Rn(Q1,"4.7.3",e),Rn(Q1,"4.7.3","esm2017")})();var I9="@firebase/firestore-compat",D9="0.3.38";function BE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function vF(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function _F(){if(!dx())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $p=class t{constructor(e){this._delegate=e}static fromBase64String(e){return _F(),new t(wr.fromBase64String(e))}static fromUint8Array(e){return vF(),new t(wr.fromUint8Array(e))}toBase64(){return _F(),this._delegate.toBase64()}toUint8Array(){return vF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function UE(t){return C9(t,["next","error","complete"])}function C9(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var kE=class{enableIndexedDbPersistence(e,n){return FM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return RM(e._delegate)}clearIndexedDbPersistence(e){return NM(e._delegate)}},qp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){AM(this._delegate,e,n,r)}enableNetwork(){return kM(this._delegate)}disableNetwork(){return OM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return UM(this._delegate)}onSnapshotsInSync(e){return dF(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wa(this,DE(this._delegate,e))}catch(n){throw nn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Er(this,fl(this._delegate,e))}catch(n){throw nn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,SM(this._delegate,e))}catch(n){throw nn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return hF(this._delegate,n=>e(new Hp(this,n)))}batch(){return Ft(this._delegate),new zp(new Rp(this._delegate,e=>Ha(this._delegate,e)))}loadBundle(e){return VM(this._delegate,e)}namedQuery(e){return LM(this._delegate,e).then(n=>n?new as(this,n):null)}},za=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(new wr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Er.forKey(n,this.firestore,null)}};function b9(t){JS(t)}var Hp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new za(e)}get(e){let n=is(e);return this._delegate.get(n).then(r=>new os(this._firestore,new xn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=is(e);return r?(BE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=is(e);return this._delegate.delete(n),this}},zp=class{constructor(e){this._delegate=e}set(e,n,r){let i=is(e);return r?(BE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=is(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ga=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Li(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ss(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new za(e),n),i.set(n,o)),o}};Ga.INSTANCES=new WeakMap;var Er=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}static forPath(e,n,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ve(n._delegate,r,new G(e)))}static forKey(e,n,r){return new t(n,new Ve(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wa(this.firestore,DE(this._delegate,e))}catch(n){throw nn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=be(e),e instanceof Ve?CE(this._delegate,e):!1}set(e,n){n=BE("DocumentReference.set",n);try{return n?FE(this._delegate,e,n):FE(this._delegate,e)}catch(r){throw nn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?RE(this._delegate,e):RE(this._delegate,e,n,...r)}catch(i){throw nn(i,"updateDoc()","DocumentReference.update()")}}delete(){return uF(this._delegate)}onSnapshot(...e){let n=wF(e),r=EF(e,i=>new os(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return PE(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=iF(this._delegate):e?.source==="server"?n=oF(this._delegate):n=rF(this._delegate),n.then(r=>new os(this.firestore,new xn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function nn(t,e,n){return t.message=t.message.replace(e,n),t}function wF(t){for(let e of t)if(typeof e=="object"&&!UE(e))return e;return{}}function EF(t,e){var n,r;let i;return UE(t[0])?i=t[0]:UE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var os=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ME(this._delegate,e._delegate)}},ss=class extends os{data(e){let n=this._delegate.data(e);return this._delegate._converter||ZS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},as=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}where(e,n,r){try{return new t(this.firestore,ni(this._delegate,WM(e,n,r)))}catch(i){throw nn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ni(this._delegate,KM(e,n)))}catch(r){throw nn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ni(this._delegate,QM(e)))}catch(n){throw nn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ni(this._delegate,YM(e)))}catch(n){throw nn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ni(this._delegate,XM(...e)))}catch(n){throw nn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ni(this._delegate,JM(...e)))}catch(n){throw nn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ni(this._delegate,ZM(...e)))}catch(n){throw nn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ni(this._delegate,eF(...e)))}catch(n){throw nn(n,"endAt()","Query.endAt()")}}isEqual(e){return bE(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=aF(this._delegate):e?.source==="server"?n=cF(this._delegate):n=sF(this._delegate),n.then(r=>new pl(this.firestore,new Qn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=wF(e),r=EF(e,i=>new pl(this.firestore,new Qn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return PE(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},OE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ss(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},pl=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ss(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new OE(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ss(this._firestore,r))})}isEqual(e){return ME(this._delegate,e._delegate)}},Wa=class t extends as{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Er(this.firestore,e):null}doc(e){try{return e===void 0?new Er(this.firestore,fl(this._delegate)):new Er(this.firestore,fl(this._delegate,e))}catch(n){throw nn(n,"doc()","CollectionReference.doc()")}}add(e){return lF(this._delegate,e).then(n=>new Er(this.firestore,n))}isEqual(e){return CE(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function is(t){return De(t,Ve)}var VE=class t{constructor(...e){this._delegate=new Kn(...e)}static documentId(){return new t(it.keyField().canonicalString())}isEqual(e){return e=be(e),e instanceof Kn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var LE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=pF();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=fF();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=gF(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=mF(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=yF(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var T9={Firestore:qp,GeoPoint:Jo,Timestamp:ze,Blob:$p,Transaction:Hp,WriteBatch:zp,DocumentReference:Er,DocumentSnapshot:os,Query:as,QueryDocumentSnapshot:ss,QuerySnapshot:pl,CollectionReference:Wa,FieldPath:VE,FieldValue:LE,setLogLevel:b9,CACHE_SIZE_UNLIMITED:xM};function A9(t,e){t.INTERNAL.registerComponent(new Fn("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},T9)))}function S9(t){A9(t,(e,n)=>new qp(e,n,new kE)),t.registerVersion(I9,D9)}S9(Ot);function x9(t,e=lo){return new he(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function IF(t,e){return x9(t,e)}function M9(t,e){return IF(t,e).pipe(fo(void 0),Mc(),ee(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function qE(t,e){return IF(t,e).pipe(ee(n=>({payload:n,type:"query"})))}var Gp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=bF(r,n);return new Kp(i,o,this.afs)}snapshotChanges(){return M9(this.ref,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:n})=>e.idField?Ie(W({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return pe(this.ref.get(e)).pipe(xt)}};function Wp(t,e){return qE(t,e).pipe(fo(void 0),Mc(),ee(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function DF(t,e,n){return Wp(t,n).pipe(ho((r,i)=>F9(r,i.map(o=>o.payload),e),[]),hm(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function F9(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=R9(t,r))}),t}function jE(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function R9(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return jE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return jE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jE(t,e.oldIndex,1);break}return t}function CF(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Kp=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Wp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(fo(void 0),Mc(),_t(([r,i])=>i.length>0||!r),ee(([,r])=>r),xt)}auditTrail(e){return this.stateChanges(e).pipe(ho((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=CF(e);return DF(this.query,n,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return qE(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.payload.docs.map(r=>e.idField?Ie(W({},r.data()),{[e.idField]:r.id}):r.data())),xt)}get(e){return pe(this.query.get(e)).pipe(xt)}add(e){return this.ref.add(e)}doc(e){return new Gp(this.ref.doc(e),this.afs)}},$E=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Wp(this.query,this.afs.schedulers.outsideAngular).pipe(xt):Wp(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.filter(r=>e.indexOf(r.type)>-1)),_t(n=>n.length>0),xt)}auditTrail(e){return this.stateChanges(e).pipe(ho((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=CF(e);return DF(this.query,n,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return qE(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),xt)}get(e){return pe(this.query.get(e)).pipe(xt)}},P9=new q("angularfire2.enableFirestorePersistence"),N9=new q("angularfire2.firestore.persistenceSettings"),U9=new q("angularfire2.firestore.settings"),k9=new q("angularfire2.firestore.use-emulator");function bF(t,e=n=>n){return{query:e(t),ref:t}}var Ka=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,d,f,g,y,I,A,C,P,B){this.schedulers=c;let U=Uo(n,a,r),V=d;f&&Uv(U,a,g,I,A,C,y,P),[this.firestore,this.persistenceEnabled$]=oa(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{let Y=a.runOutsideAngular(()=>U.firestore());if(o&&Y.settings(o),V&&Y.useEmulator(...V),i&&!Mo(s)){let X=()=>{try{return pe(Y.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),re(!1)}};return[Y,a.runOutsideAngular(X)]}else return[Y,re(!1)]},[o,V,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=bF(i,r),a=this.schedulers.ngZone.run(()=>o);return new Kp(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new $E(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Gp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(N(Fi),N(Ri,8),N(P9,8),N(U9,8),N(Ct),N(me),N(ia),N(N9,8),N(k9,8),N(sa,8),N(xv,8),N(Mv,8),N(Fv,8),N(Rv,8),N(Pv,8),N(Nv,8),N(Gr,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Zi=(()=>{let e=class e{constructor(r,i,o){this.fireauth=r,this.router=i,this.firestore=o}login(r,i){this.fireauth.signInWithEmailAndPassword(r,i).then(o=>{let s=o.user?.uid;localStorage.setItem("token","true"),localStorage.setItem("currentUser",r),s&&this.firestore.collection("users").doc(s).get().toPromise().then(a=>{if(a&&a.exists){let c=a.data();localStorage.setItem("userInfo",JSON.stringify(c)),console.log("User info retrieved and saved to localStorage:",c)}else console.log("No user data found in Firestore for the current user.")}).catch(a=>{console.error("Error retrieving user data:",a)}),this.router.navigate(["/"])}).catch(o=>{alert(o.message),this.router.navigate(["/login"])})}register(r,i,o,s){this.fireauth.createUserWithEmailAndPassword(r,i).then(a=>{alert("Registration Successful");let c=a.user?.uid;if(c){let d={name:o,birth:s,email:r};this.firestore.collection("users").doc(c).set(d).then(()=>{console.log("User data saved to Firestore")}).catch(f=>{console.error("Error saving user data to Firestore:",f)})}let l={name:o,birth:s,email:r};localStorage.setItem("userInfo",JSON.stringify(l)),localStorage.setItem("currentUser",r),console.log("User info saved in localStorage:",localStorage.getItem("userInfo")),this.router.navigate(["/"])}).catch(a=>{alert(a.message),this.router.navigate(["/register"])})}getCurrentUser(){return localStorage.getItem("currentUser")}isLoggedIn(){return!!localStorage.getItem("user")}getUserInfo(){return this.fireauth.authState.pipe(ee(r=>{if(r){let i=localStorage.getItem("currentUser"),o=localStorage.getItem("userInfo");if(o){let s=JSON.parse(o);if(s.email===i)return Ie(W({},s),{uid:r.uid,email:r.email||"",birthday:s.birth,name:s.name})}return{uid:r.uid,email:r.email||""}}return null}))}};e.\u0275fac=function(i){return new(i||e)(N(sa),N(pt),N(Ka))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var NF=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(J(To),J(vi))},e.\u0275dir=St({type:e});let t=e;return t})(),O9=(()=>{let e=class e extends NF{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qs(e)))(o||e)}})(),e.\u0275dir=St({type:e,features:[Br]});let t=e;return t})(),UF=new q("");var V9={provide:UF,useExisting:bo(()=>Ir),multi:!0};function L9(){let t=cr()?cr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var B9=new q(""),Ir=(()=>{let e=class e extends NF{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!L9())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(J(To),J(vi),J(B9,8))},e.\u0275dir=St({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&nt("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Xc([V9]),Br]});let t=e;return t})();function j9(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var GE=new q(""),kF=new q("");function $9(t){return j9(t.value)?{required:!0}:null}function TF(t){return null}function OF(t){return t!=null}function VF(t){return Ei(t)?pe(t):t}function LF(t){let e={};return t.forEach(n=>{e=n!=null?W(W({},e),n):e}),Object.keys(e).length===0?null:e}function BF(t,e){return e.map(n=>n(t))}function q9(t){return!t.validate}function jF(t){return t.map(e=>q9(e)?e:n=>e.validate(n))}function H9(t){if(!t)return null;let e=t.filter(OF);return e.length==0?null:function(n){return LF(BF(n,e))}}function WE(t){return t!=null?H9(jF(t)):null}function z9(t){if(!t)return null;let e=t.filter(OF);return e.length==0?null:function(n){let r=BF(n,e).map(VF);return cm(r).pipe(ee(LF))}}function KE(t){return t!=null?z9(jF(t)):null}function AF(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function G9(t){return t._rawValidators}function W9(t){return t._rawAsyncValidators}function zE(t){return t?Array.isArray(t)?t:[t]:[]}function Xp(t,e){return Array.isArray(t)?t.includes(e):t===e}function SF(t,e){let n=zE(e);return zE(t).forEach(i=>{Xp(n,i)||n.push(i)}),n}function xF(t,e){return zE(e).filter(n=>!Xp(t,n))}var Jp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ya=class extends Jp{get formDirective(){return null}get path(){return null}},vl=class extends Jp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},K9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},EY=Ie(W({},K9),{"[class.ng-submitted]":"isSubmitted"}),eo=(()=>{let e=class e extends Zp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(J(vl,2))},e.\u0275dir=St({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Ch("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Br]});let t=e;return t})(),Dr=(()=>{let e=class e extends Zp{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(J(Ya,10))},e.\u0275dir=St({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Ch("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Br]});let t=e;return t})();var gl="VALID",Yp="INVALID",Qa="PENDING",ml="DISABLED";function $F(t){return(ng(t)?t.validators:t)||null}function Q9(t){return Array.isArray(t)?WE(t):t||null}function qF(t,e){return(ng(e)?e.asyncValidators:t)||null}function Y9(t){return Array.isArray(t)?KE(t):t||null}function ng(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function X9(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[n])throw new te(1001,"")}function J9(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new te(1002,"")})}var eg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gl}get invalid(){return this.status===Yp}get pending(){return this.status==Qa}get disabled(){return this.status===ml}get enabled(){return this.status!==ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xF(e,this._rawAsyncValidators))}hasValidator(e){return Xp(this._rawValidators,e)}hasAsyncValidator(e){return Xp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qa,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ml,this.errors=null,this._forEachChild(r=>{r.disable(Ie(W({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(W({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=gl,this._forEachChild(r=>{r.enable(Ie(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ie(W({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gl||this.status===Qa)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ml:gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qa,this._hasOwnPendingAsyncValidator=!0;let n=VF(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ut,this.statusChanges=new ut}_calculateStatus(){return this._allControlsDisabled()?ml:this.errors?Yp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qa)?Qa:this._anyControlsHaveStatus(Yp)?Yp:gl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ng(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Q9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y9(this._rawAsyncValidators)}},tg=class extends eg{constructor(e,n,r){super($F(n),qF(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){J9(this,!0,e),Object.keys(e).forEach(r=>{X9(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var rg=new q("CallSetDisabledState",{providedIn:"root",factory:()=>ig}),ig="always";function Z9(t,e){return[...e.path,t]}function HF(t,e,n=ig){zF(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),t$(t,e),r$(t,e),n$(t,e),e$(t,e)}function MF(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function e$(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function zF(t,e){let n=G9(t);e.validator!==null?t.setValidators(AF(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=W9(t);e.asyncValidator!==null?t.setAsyncValidators(AF(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();MF(e._rawValidators,i),MF(e._rawAsyncValidators,i)}function t$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&GF(t,e)})}function n$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&GF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function GF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function r$(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function i$(t,e){t==null,zF(t,e)}function o$(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function s$(t){return Object.getPrototypeOf(t.constructor)===O9}function a$(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function c$(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Ir?n=o:s$(o)?r=o:i=o}),i||r||n||null}var u$={provide:Ya,useExisting:bo(()=>Yn)},yl=Promise.resolve(),Yn=(()=>{let e=class e extends Ya{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ut,this.form=new tg({},WE(r),KE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){yl.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),HF(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){yl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){yl.then(()=>{let i=this._findContainer(r.path),o=new tg({});i$(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){yl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){yl.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,a$(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(J(GE,10),J(kF,10),J(rg,8))},e.\u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&nt("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Vt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xc([u$]),Br]});let t=e;return t})();function FF(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function RF(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var l$=class extends eg{constructor(e=null,n,r){super($F(n),qF(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ng(n)&&(n.nonNullable||n.initialValueIsDefault)&&(RF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){RF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var d$={provide:vl,useExisting:bo(()=>ri)},PF=Promise.resolve(),ri=(()=>{let e=class e extends vl{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new l$,this._registered=!1,this.name="",this.update=new ut,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=c$(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),o$(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){PF.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Ii(i);PF.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Z9(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(J(Ya,9),J(GE,10),J(kF,10),J(UF,10),J(Lr,8),J(rg,8))},e.\u0275dir=St({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Vt.None,"disabled","isDisabled"],model:[Vt.None,"ngModel","model"],options:[Vt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xc([d$]),Br,_i]});let t=e;return t})(),Cr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var h$=new q("");var f$=(()=>{let e=class e{constructor(){this._validator=TF}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):TF,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=St({type:e,features:[_i]});let t=e;return t})();var p$={provide:GE,useExisting:bo(()=>QE),multi:!0};var QE=(()=>{let e=class e extends f${constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ii,this.createValidator=r=>$9}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=qs(e)))(o||e)}})(),e.\u0275dir=St({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Yc("required",o._enabled?"":null)},inputs:{required:"required"},features:[Xc([p$]),Br]});let t=e;return t})();var WF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({});let t=e;return t})();var KF=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:rg,useValue:r.callSetDisabledState??ig}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({imports:[WF]});let t=e;return t})(),QF=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:h$,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:rg,useValue:r.callSetDisabledState??ig}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({imports:[WF]});let t=e;return t})();var YF=(()=>{let e=class e{constructor(r){this.auth=r,this.email="",this.password=""}login(){if(this.email==""){alert("Please enter email");return}if(this.password==""){alert("Please enter password");return}this.auth.login(this.email,this.password),this.email="",this.password=""}};e.\u0275fac=function(i){return new(i||e)(J(Zi))},e.\u0275cmp=$e({type:e,selectors:[["app-login"]],decls:16,vars:2,consts:[["id","login-page"],[1,"loginForm"],[1,"text"],[1,"form-group"],["type","email","placeholder","Email","name","email",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password",3,"ngModel","ngModelChange"],["type","button",1,"btnlogin",3,"click"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"h1"),Z(5,"Login"),j(),L(6,"div",3)(7,"label"),Z(8,"Email:"),j(),L(9,"input",4),ht("ngModelChange",function(a){return Et(o.email,a)||(o.email=a),a}),j()(),L(10,"div",3)(11,"label"),Z(12,"Password:"),j(),L(13,"input",5),ht("ngModelChange",function(a){return Et(o.password,a)||(o.password=a),a}),j()(),L(14,"button",6),nt("click",function(){return o.login()}),Z(15,"Login"),j()()()()()),i&2&&(oe(9),dt("ngModel",o.email),oe(4),dt("ngModel",o.password))},dependencies:[Cr,Ir,eo,Dr,ri,Yn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:300px;padding:0 40px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9e1;margin-top:30px;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:323px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;padding:7px;margin-bottom:23px}#login-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2FDALL%C2%B7E_2024_04_05_11_31_31_Create_a_realistic_image_of_a_gym_equipment.png?alt=media&token=baf875e4-56fa-437e-add4-cca409aedf8d);background-size:cover;background-position:center;background-repeat:no-repeat}.text[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}']});let t=e;return t})();var XF=(()=>{let e=class e{constructor(r){this.auth=r,this.name="",this.email="",this.birth="",this.password="",this.confirmPassword=""}register(){if(this.name==""){alert("Please enter name");return}if(this.email==""){alert("Please enter email");return}if(this.birth==""){alert("Please enter birth");return}if(this.password==""){alert("Please enter password");return}if(this.password!==this.confirmPassword){alert("Passwords do not match");return}this.auth.register(this.email,this.password,this.name,this.birth),this.email="",this.password="",this.confirmPassword="",this.name="",this.birth=""}};e.\u0275fac=function(i){return new(i||e)(J(Zi))},e.\u0275cmp=$e({type:e,selectors:[["app-register"]],decls:28,vars:5,consts:[["id","register-page"],[1,"registerForm"],[1,"text"],[1,"form-group"],["type","text","id","name","placeholder","Name","name","name",3,"ngModel","ngModelChange"],["type","email","placeholder","Email","name","email",3,"ngModel","ngModelChange"],["type","date","id","birth","placeholder","Birth","name","birth",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password",3,"ngModel","ngModelChange"],["type","password","placeholder","Confirm Password","name","confirm-pass",3,"ngModel","ngModelChange"],["type","button",1,"btnregister",3,"click"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"h1"),Z(5,"Register"),j(),L(6,"div",3)(7,"label"),Z(8,"Name:"),j(),L(9,"input",4),ht("ngModelChange",function(a){return Et(o.name,a)||(o.name=a),a}),j()(),L(10,"div",3)(11,"label"),Z(12,"Email:"),j(),L(13,"input",5),ht("ngModelChange",function(a){return Et(o.email,a)||(o.email=a),a}),j()(),L(14,"div",3)(15,"label"),Z(16,"Birth:"),j(),L(17,"input",6),ht("ngModelChange",function(a){return Et(o.birth,a)||(o.birth=a),a}),j()(),L(18,"div",3)(19,"label"),Z(20,"Password:"),j(),L(21,"input",7),ht("ngModelChange",function(a){return Et(o.password,a)||(o.password=a),a}),j()(),L(22,"div",3)(23,"label"),Z(24,"Confirm Password:"),j(),L(25,"input",8),ht("ngModelChange",function(a){return Et(o.confirmPassword,a)||(o.confirmPassword=a),a}),j()(),L(26,"button",9),nt("click",function(){return o.register()}),Z(27," Create Account "),j()()()()()),i&2&&(oe(9),dt("ngModel",o.name),oe(4),dt("ngModel",o.email),oe(4),dt("ngModel",o.birth),oe(4),dt("ngModel",o.password),oe(4),dt("ngModel",o.confirmPassword))},dependencies:[Cr,Ir,eo,Dr,ri,Yn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:350px;border:1px solid #ccc;padding:0 70px;margin-top:20px;border-radius:20px;background-color:#f9f9f9cd;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:520px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:23px}#register-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url("./media/Fitness_gym_interior_sunset_16_9-EWKIRD7F.png");background-size:cover;background-position:center;background-repeat:no-repeat}.text[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}#birth[_ngcontent-%COMP%], #name[_ngcontent-%COMP%]{width:182px}']});let t=e;return t})();var g$=t=>["/details",t];function m$(t,e){if(t&1&&(L(0,"div",2),jn(1,"img",3),L(2,"h3"),Z(3),j(),L(4,"h3"),Z(5),j(),L(6,"h3"),Z(7),j(),L(8,"button",4),Z(9,"Details"),j()()),t&2){let n=e.$implicit;oe(),t0("alt",n.name),Je("src",n.photo,Qc),oe(2),So(n.name),oe(2),Jt("Weight: ",n.weight,"kg"),oe(2),Jt("Price: $",n.price,""),oe(),Je("routerLink",kT(6,g$,n.id))}}var JF=(()=>{let e=class e{constructor(r){this.afs=r}ngOnInit(){this.items$=this.afs.collection("Upload").snapshotChanges().pipe(ee(r=>r.map(i=>{let o=i.payload.doc.data(),s=i.payload.doc.id;return Ie(W({},o),{id:s})})))}};e.\u0275fac=function(i){return new(i||e)(J(Ka))},e.\u0275cmp=$e({type:e,selectors:[["app-catalog"]],decls:3,vars:3,consts:[[1,"catalog"],["class","catalog-item",4,"ngFor","ngForOf"],[1,"catalog-item"],[3,"src","alt"],[1,"details-button",3,"routerLink"]],template:function(i,o){i&1&&(L(0,"div",0),hn(1,m$,10,8,"div",1),Ah(2,"async"),j()),i&2&&(oe(),Je("ngForOf",LT(2,1,o.items$)))},dependencies:[dA,Ef,fA],styles:[".catalog[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;background:#4e4e5d;background:linear-gradient(90deg,#4e4e5df2 35%,#121c1fd2);flex-wrap:nowrap;height:100vh;width:100vw;gap:30px;overflow-x:auto;padding-top:23px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#576f86;border-radius:6px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#576f86}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1;border-radius:6px}.catalog-item[_ngcontent-%COMP%]{box-shadow:6px 6px 20px #1a2a39,-6px -6px 20px #000001c7;background-color:#576f86;display:flex;justify-content:center;align-items:center;flex-direction:column;width:400px;text-align:center;border:1px solid #3e3a3f;margin:0;padding:20px;border-radius:12px}.catalog-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:323px;height:323px;border-radius:13px}.catalog-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:bolder;margin-top:8px}.catalog-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;padding:10px}.details-button[_ngcontent-%COMP%]{width:100px;height:auto;cursor:pointer;border:none;border-radius:10px;display:inline;align-items:center;text-align:center;background-color:#9da6d7;transition:.5s;color:#000;font-size:18px;font-weight:700;text-decoration:none;padding-bottom:10px;padding-top:10px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62;margin-top:10px}.details-button[_ngcontent-%COMP%]:hover{box-shadow:none}"]});let t=e;return t})();var Xa=(()=>{let e=class e{constructor(r){this.afs=r}addItem(r){return r.id=this.afs.createId(),this.afs.collection("/Upload").doc(r.id).set(r)}editItem(r){return this.afs.collection("/Upload").doc(r.id).update(r)}getAllItems(){return this.afs.collection("/Upload").snapshotChanges()}deleteItem(r){return this.afs.collection("/Upload").doc(r).delete().then(()=>{console.log("Item deleted successfully:",r)}).catch(i=>{throw console.error("Error deleting item:",i),i})}getItemById(r){return this.afs.collection("/Upload").doc(r).valueChanges()}updateItem(r){return this.afs.collection("/Upload").doc(r.id).update(r)}};e.\u0275fac=function(i){return new(i||e)(N(Ka))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aR="firebasestorage.googleapis.com",cR="storageBucket",y$=2*60*1e3,v$=10*60*1e3,_$=1e3;var We=class t extends zl{constructor(e,n,r=0){super(XE(e),`Firebase Storage: ${n} (${XE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return XE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},He=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(He||{});function XE(t){return"storage/"+t}function oI(){let t="An unknown error occurred, please check the error payload for server response.";return new We(He.UNKNOWN,t)}function w$(t){return new We(He.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function E$(t){return new We(He.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function I$(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(He.UNAUTHENTICATED,t)}function D$(){return new We(He.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C$(t){return new We(He.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uR(){return new We(He.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lR(){return new We(He.CANCELED,"User canceled the upload/download.")}function b$(t){return new We(He.INVALID_URL,"Invalid URL '"+t+"'.")}function T$(t){return new We(He.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function A$(){return new We(He.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cR+"' property when initializing the app?")}function dR(){return new We(He.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function S$(){return new We(He.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function x$(){return new We(He.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function M$(t){return new We(He.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cs(t){return new We(He.INVALID_ARGUMENT,t)}function hR(){return new We(He.APP_DELETED,"The Firebase app was deleted.")}function sI(t){return new We(He.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function El(t,e){return new We(He.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wl(t){throw new We(He.INTERNAL_ERROR,"Internal error: "+t)}var rn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw T$(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(V){V.path_=decodeURIComponent(V.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},A=n===aR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",P=new RegExp(`^https?://${A}/${i}/${C}`,"i"),U=[{regex:a,indices:c,postModify:o},{regex:y,indices:I,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let V=0;V<U.length;V++){let Y=U[V],X=Y.regex.exec(e);if(X){let E=X[Y.indices.bucket],v=X[Y.indices.path];v||(v=""),r=new t(E,v),Y.postModify(r);break}}if(r==null)throw b$(e);return r}},ZE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function F$(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function d(...C){l||(l=!0,e.apply(null,C))}function f(C){i=setTimeout(()=>{i=null,t(y,c())},C)}function g(){o&&clearTimeout(o)}function y(C,...P){if(l){g();return}if(C){g(),d.call(null,C,...P);return}if(c()||s){g(),d.call(null,C,...P);return}r<64&&(r*=2);let U;a===1?(a=2,U=0):U=(r+Math.random())*1e3,f(U)}let I=!1;function A(C){I||(I=!0,g(),!l&&(i!==null?(C||(a=2),clearTimeout(i),f(0)):C||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,A(!0)},n),A}function R$(t){t(!1)}function P$(t){return t!==void 0}function N$(t){return typeof t=="function"}function U$(t){return typeof t=="object"&&!Array.isArray(t)}function ag(t){return typeof t=="string"||t instanceof String}function ZF(t){return aI()&&t instanceof Blob}function aI(){return typeof Blob<"u"}function eI(t,e,n,r){if(r<e)throw cs(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw cs(`Invalid value for '${t}'. Expected ${n} or less.`)}function to(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function fR(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ec=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ec||{});function pR(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var tI=class{constructor(e,n,r,i,o,s,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,I)=>{this.resolve_=y,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Za(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===ec.NO_ERROR,c=o.getStatus();if(!a||pR(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===ec.ABORT;r(!1,new Za(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Za(l,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());P$(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=oI();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?hR():lR();s(c)}else{let c=uR();s(c)}};this.canceled_?n(!1,new Za(!1,null,!0)):this.backoffId_=F$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Za=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function k$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function O$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function V$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function L$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function B$(t,e,n,r,i,o,s=!0){let a=fR(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return V$(l,e),k$(l,n),O$(l,o),L$(l,r),new tI(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function j$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $$(...t){let e=j$();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(aI())return new Blob(t);throw new We(He.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function H$(t){if(typeof atob>"u")throw M$("base-64");return atob(t)}var vn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Il=class{constructor(e,n){this.data=e,this.contentType=n||null}};function cI(t,e){switch(t){case vn.RAW:return new Il(gR(e));case vn.BASE64:case vn.BASE64URL:return new Il(mR(t,e));case vn.DATA_URL:return new Il(G$(e),W$(e))}throw oI()}function gR(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function z$(t){let e;try{e=decodeURIComponent(t)}catch{throw El(vn.DATA_URL,"Malformed data URL.")}return gR(e)}function mR(t,e){switch(t){case vn.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw El(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vn.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw El(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=H$(e)}catch(i){throw i.message.includes("polyfill")?i:El(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var sg=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw El(vn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=K$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function G$(t){let e=new sg(t);return e.base64?mR(vn.BASE64,e.rest):z$(e.rest)}function W$(t){return new sg(t).contentType}function K$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var tc=class t{constructor(e,n){let r=0,i="";ZF(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ZF(this.data_)){let r=this.data_,i=q$(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(aI()){let n=e.map(r=>r instanceof t?r.data_:r);return new t($$.apply(null,n))}else{let n=e.map(s=>ag(s)?cI(vn.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function uI(t){let e;try{e=JSON.parse(t)}catch{return null}return U$(e)?e:null}function Q$(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Y$(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function yR(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function X$(t,e){return e}var Rt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||X$}},og=null;function J$(t){return!ag(t)||t.length<2?t:yR(t)}function cg(){if(og)return og;let t=[];t.push(new Rt("bucket")),t.push(new Rt("generation")),t.push(new Rt("metageneration")),t.push(new Rt("name","fullPath",!0));function e(o,s){return J$(s)}let n=new Rt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Rt("size");return i.xform=r,t.push(i),t.push(new Rt("timeCreated")),t.push(new Rt("updated")),t.push(new Rt("md5Hash",null,!0)),t.push(new Rt("cacheControl",null,!0)),t.push(new Rt("contentDisposition",null,!0)),t.push(new Rt("contentEncoding",null,!0)),t.push(new Rt("contentLanguage",null,!0)),t.push(new Rt("contentType",null,!0)),t.push(new Rt("metadata","customMetadata",!0)),og=t,og}function Z$(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new rn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function e6(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return Z$(r,t),r}function vR(t,e,n){let r=uI(e);return r===null?null:e6(t,r,n)}function t6(t,e,n,r){let i=uI(e);if(i===null||!ag(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let d=t.bucket,f=t.fullPath,g="/b/"+s(d)+"/o/"+s(f),y=to(g,n,r),I=fR({alt:"media",token:l});return y+I})[0]}function lI(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var eR="prefixes",tR="items";function n6(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eR])for(let i of n[eR]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new rn(e,o));r.prefixes.push(s)}if(n[tR])for(let i of n[tR]){let o=t._makeStorageReference(new rn(e,i.name));r.items.push(o)}return r}function r6(t,e,n){let r=uI(n);return r===null?null:n6(t,e,r)}var Xn=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Tr(t){if(!t)throw oI()}function ug(t,e){function n(r,i){let o=vR(t,i,e);return Tr(o!==null),o}return n}function i6(t,e){function n(r,i){let o=r6(t,e,i);return Tr(o!==null),o}return n}function o6(t,e){function n(r,i){let o=vR(t,i,e);return Tr(o!==null),t6(o,i,t.host,t._protocol)}return n}function ic(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=D$():i=I$():n.getStatus()===402?i=E$(t.bucket):n.getStatus()===403?i=C$(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function lg(t){let e=ic(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=w$(t.path)),o.serverResponse=i.serverResponse,o}return n}function _R(t,e,n){let r=e.fullServerUrl(),i=to(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Xn(i,o,ug(t,n),s);return a.errorHandler=lg(e),a}function s6(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=to(s,t.host,t._protocol),c="GET",l=t.maxOperationRetryTime,d=new Xn(a,c,i6(t,e.bucket),l);return d.urlParams=o,d.errorHandler=ic(e),d}function a6(t,e,n){let r=e.fullServerUrl(),i=to(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Xn(i,o,o6(t,n),s);return a.errorHandler=lg(e),a}function c6(t,e,n,r){let i=e.fullServerUrl(),o=to(i,t.host,t._protocol),s="PATCH",a=lI(n,r),c={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,d=new Xn(o,s,ug(t,r),l);return d.headers=c,d.body=a,d.errorHandler=lg(e),d}function u6(t,e){let n=e.fullServerUrl(),r=to(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,l){}let a=new Xn(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=lg(e),a}function l6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wR(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=l6(null,e)),r}function d6(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let U="";for(let V=0;V<2;V++)U=U+Math.random().toString().slice(2);return U}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=wR(e,r,i),d=lI(l,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+c+"--",y=tc.getBlob(f,r,g);if(y===null)throw dR();let I={name:l.fullPath},A=to(o,t.host,t._protocol),C="POST",P=t.maxUploadRetryTime,B=new Xn(A,C,ug(t,n),P);return B.urlParams=I,B.headers=s,B.body=y.uploadData(),B.errorHandler=ic(e),B}var nc=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function dI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Tr(!1)}return Tr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function h6(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=wR(e,r,i),a={name:s.fullPath},c=to(o,t.host,t._protocol),l="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=lI(s,n),g=t.maxUploadRetryTime;function y(A){dI(A);let C;try{C=A.getResponseHeader("X-Goog-Upload-URL")}catch{Tr(!1)}return Tr(ag(C)),C}let I=new Xn(c,l,y,g);return I.urlParams=a,I.headers=d,I.body=f,I.errorHandler=ic(e),I}function f6(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let d=dI(l,["active","final"]),f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tr(!1)}f||Tr(!1);let g=Number(f);return Tr(!isNaN(g)),new nc(g,r.size(),d==="final")}let s="POST",a=t.maxUploadRetryTime,c=new Xn(n,s,o,a);return c.headers=i,c.errorHandler=ic(e),c}var nR=256*1024;function p6(t,e,n,r,i,o,s,a){let c=new nc(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw S$();let l=c.total-c.current,d=l;i>0&&(d=Math.min(d,i));let f=c.current,g=f+d,y="";d===0?y="finalize":l===d?y="upload, finalize":y="upload";let I={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},A=r.slice(f,g);if(A===null)throw dR();function C(V,Y){let X=dI(V,["active","final"]),E=c.current+d,v=r.size(),_;return X==="final"?_=ug(e,o)(V,Y):_=null,new nc(E,v,X==="final",_)}let P="POST",B=e.maxUploadRetryTime,U=new Xn(n,P,C,B);return U.headers=I,U.body=A.uploadData(),U.progressCallback=a||null,U.errorHandler=ic(t),U}var ER={STATE_CHANGED:"state_changed"},qt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function JE(t){switch(t){case"running":case"pausing":case"canceling":return qt.RUNNING;case"paused":return qt.PAUSED;case"success":return qt.SUCCESS;case"canceled":return qt.CANCELED;case"error":return qt.ERROR;default:return qt.ERROR}}var nI=class{constructor(e,n,r){if(N$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Ja(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var rR=null,rI=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ec.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ec.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ec.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw wl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},iI=class extends rI{initXhr(){this.xhr_.responseType="text"}};function br(){return rR?rR():new iI}var Dl=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=cg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(He.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(pR(i.status,[]))if(o)i=uR();else{this.sleepTime=Math.max(this.sleepTime*2,_$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(He.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=h6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,br,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=f6(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,br,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=nR*this._chunkMultiplier,n=new nc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=p6(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,br,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){nR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=_R(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,br,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=d6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,br,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=lR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=JE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new nI(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(JE(this._state)){case qt.SUCCESS:Ja(this._resolve.bind(null,this.snapshot))();break;case qt.CANCELED:case qt.ERROR:let n=this._reject;Ja(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(JE(this._state)){case qt.RUNNING:case qt.PAUSED:e.next&&Ja(e.next.bind(e,this.snapshot))();break;case qt.SUCCESS:e.complete&&Ja(e.complete.bind(e))();break;case qt.CANCELED:case qt.ERROR:e.error&&Ja(e.error.bind(e,this._error))();break;default:e.error&&Ja(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var rc=class t{constructor(e,n){this._service=e,n instanceof rn?this._location=n:this._location=rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yR(this._location.path)}get storage(){return this._service}get parent(){let e=Q$(this._location.path);if(e===null)return null;let n=new rn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw sI(e)}};function g6(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Dl(t,new tc(e),n)}function m6(t){let e={prefixes:[],items:[]};return IR(t,e).then(()=>e)}function IR(t,e,n){return M(this,null,function*(){let i=yield DR(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield IR(t,e,i.nextPageToken))})}function DR(t,e){e!=null&&typeof e.maxResults=="number"&&eI("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=s6(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,br)}function y6(t){t._throwIfRoot("getMetadata");let e=_R(t.storage,t._location,cg());return t.storage.makeRequestWithTokens(e,br)}function v6(t,e){t._throwIfRoot("updateMetadata");let n=c6(t.storage,t._location,e,cg());return t.storage.makeRequestWithTokens(n,br)}function _6(t){t._throwIfRoot("getDownloadURL");let e=a6(t.storage,t._location,cg());return t.storage.makeRequestWithTokens(e,br).then(n=>{if(n===null)throw x$();return n})}function w6(t){t._throwIfRoot("deleteObject");let e=u6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,br)}function CR(t,e){let n=Y$(t._location.path,e),r=new rn(t._location.bucket,n);return new rc(t.storage,r)}function E6(t){return/^[A-Za-z]+:\/\//.test(t)}function I6(t,e){return new rc(t,e)}function bR(t,e){if(t instanceof Cl){let n=t;if(n._bucket==null)throw A$();let r=new rc(n,n._bucket);return e!=null?bR(r,e):r}else return e!==void 0?CR(t,e):t}function D6(t,e){if(e&&E6(e)){if(t instanceof Cl)return I6(t,e);throw cs("To use ref(service, url), the first argument must be a Storage instance.")}else return bR(t,e)}function iR(t,e){let n=e?.[cR];return n==null?null:rn.makeFromBucketSpec(n,t)}function C6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ql(i,t.app.options.projectId))}var Cl=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=aR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y$,this._maxUploadRetryTime=v$,this._requests=new Set,i!=null?this._bucket=rn.makeFromBucketSpec(i,this._host):this._bucket=iR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=rn.makeFromBucketSpec(this._url,e):this._bucket=iR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return M(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return M(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new ZE(hR());{let s=B$(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return M(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},oR="@firebase/storage",sR="0.13.2";var b6="storage";function TR(t,e,n){return t=be(t),g6(t,e,n)}function AR(t){return t=be(t),y6(t)}function SR(t,e){return t=be(t),v6(t,e)}function xR(t,e){return t=be(t),DR(t,e)}function MR(t){return t=be(t),m6(t)}function FR(t){return t=be(t),_6(t)}function RR(t){return t=be(t),w6(t)}function hI(t,e){return t=be(t),D6(t,e)}function PR(t,e){return CR(t,e)}function NR(t,e,n,r={}){C6(t,e,n,r)}function T6(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Cl(n,r,i,e,Wl)}function A6(){so(new Fn(b6,T6,"PUBLIC").setMultipleInstances(!0)),Rn(oR,sR,""),Rn(oR,sR,"esm2017")}A6();var oc=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var dg=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new oc(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new oc(s,this,this._ref)):o={next:n.next?s=>n.next(new oc(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},hg=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new us(e,this._service))}get items(){return this._delegate.items.map(e=>new us(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var us=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=PR(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new dg(TR(this._delegate,e,n),this)}putString(e,n=vn.RAW,r){this._throwIfRoot("putString");let i=cI(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new dg(new Dl(this._delegate,new tc(i.data,!0),o),this)}listAll(){return MR(this._delegate).then(e=>new hg(e,this.storage))}list(e){return xR(this._delegate,e||void 0).then(n=>new hg(n,this.storage))}getMetadata(){return AR(this._delegate)}updateMetadata(e){return SR(this._delegate,e)}getDownloadURL(){return FR(this._delegate)}delete(){return this._throwIfRoot("delete"),RR(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw sI(e)}};var fg=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UR(e))throw cs("ref() expected a child path but got a URL, use refFromURL instead.");return new us(hI(this._delegate,e),this)}refFromURL(e){if(!UR(e))throw cs("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rn.makeFromUrl(e,this._delegate.host)}catch{throw cs("refFromUrl() expected a valid full URL but got an invalid one.")}return new us(hI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){NR(this._delegate,e,n,r)}};function UR(t){return/^[A-Za-z]+:\/\//.test(t)}var S6="@firebase/storage-compat",x6="0.3.12";var M6="storage-compat";function F6(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new fg(n,r)}function R6(t){let e={TaskState:qt,TaskEvent:ER,StringFormat:vn,Storage:fg,Reference:us};t.INTERNAL.registerComponent(new Fn(M6,F6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(S6,x6)}R6(Ot);function P6(t){return new he(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(lm(0))}function kR(t){let e=P6(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ee(n=>n.bytesTransferred/n.totalBytes*100))}}function pg(t){return{getDownloadURL:()=>re(void 0).pipe(wv,Re(()=>t.getDownloadURL()),xt),getMetadata:()=>re(void 0).pipe(wv,Re(()=>t.getMetadata()),xt),delete:()=>pe(t.delete()),child:e=>pg(t.child(e)),updateMetadata:e=>pe(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return kR(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return kR(i)},list:e=>pe(t.list(e)),listAll:()=>pe(t.listAll())}}var N6=new q("angularfire2.storageBucket"),U6=new q("angularfire2.storage.maxUploadRetryTime"),k6=new q("angularfire2.storage.maxOperationRetryTime"),O6=new q("angularfire2.storage.use-emulator"),gg=(()=>{class t{storage;constructor(n,r,i,o,s,a,c,l,d,f){let g=Uo(n,s,r);this.storage=oa(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{let y=s.runOutsideAngular(()=>g.storage(i||void 0)),I=d;return I&&y.useEmulator(...I),c&&y.setMaxUploadRetryTime(c),l&&y.setMaxOperationRetryTime(l),y},[c,l])}ref(n){return pg(this.storage.ref(n))}refFromURL(n){return pg(this.storage.refFromURL(n))}upload(n,r,i){let o=this.storage.ref(n);return pg(o).put(r,i)}static \u0275fac=function(r){return new(r||t)(N(Fi),N(Ri,8),N(N6,8),N(Ct),N(me),N(ia),N(U6,8),N(k6,8),N(O6,8),N(Gr,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var VR=(()=>{let e=class e{constructor(r,i,o){this.dataService=r,this.storage=i,this.router=o,this.newItem={id:"",name:"",weight:"",price:"",description:"",photo:""},this.selectedFile=null,this.isUploading=!1}ngOnInit(){}onFileSelected(r){this.selectedFile=r.target.files[0]}addItem(){if(!this.newItem.name||!this.newItem.weight||!this.newItem.price||!this.newItem.description||!this.selectedFile){alert("Please fill in all fields and select a file");return}this.isUploading=!0;let r=`uploads/${this.selectedFile.name}`,i=this.storage.ref(r);this.storage.upload(r,this.selectedFile).snapshotChanges().pipe(er(()=>{i.getDownloadURL().subscribe(s=>{this.newItem.photo=s,this.saveItem()})})).subscribe()}saveItem(){return M(this,null,function*(){try{yield this.dataService.addItem(this.newItem),alert("Item added successfully"),this.clearForm(),this.isUploading=!1,this.router.navigate(["/catalog"])}catch(r){console.error("Error adding item: ",r),this.isUploading=!1}})}clearForm(){this.newItem={id:"",name:"",weight:"",price:"",description:"",photo:""},this.selectedFile=null}};e.\u0275fac=function(i){return new(i||e)(J(Xa),J(gg),J(pt))},e.\u0275cmp=$e({type:e,selectors:[["app-create"]],decls:21,vars:4,consts:[[1,"create"],[3,"ngSubmit"],["for","name"],["type","text","id","name","name","name",3,"ngModel","ngModelChange"],["for","weight"],["type","text","id","weight","name","weight",3,"ngModel","ngModelChange"],["for","price"],["type","text","id","price","name","price",3,"ngModel","ngModelChange"],["for","description"],["id","description","name","description",3,"ngModel","ngModelChange"],["for","photo"],["type","file","id","photo","name","photo",3,"change"],["type","submit"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"form",1),nt("ngSubmit",function(){return o.addItem()}),L(2,"h1"),Z(3,"Create"),j(),L(4,"label",2),Z(5,"Name:"),j(),L(6,"input",3),ht("ngModelChange",function(a){return Et(o.newItem.name,a)||(o.newItem.name=a),a}),j(),L(7,"label",4),Z(8,"Weight:"),j(),L(9,"input",5),ht("ngModelChange",function(a){return Et(o.newItem.weight,a)||(o.newItem.weight=a),a}),j(),L(10,"label",6),Z(11,"Price:"),j(),L(12,"input",7),ht("ngModelChange",function(a){return Et(o.newItem.price,a)||(o.newItem.price=a),a}),j(),L(13,"label",8),Z(14,"Description:"),j(),L(15,"textarea",9),ht("ngModelChange",function(a){return Et(o.newItem.description,a)||(o.newItem.description=a),a}),j(),L(16,"label",10),Z(17,"Photo:"),j(),L(18,"input",11),nt("change",function(a){return o.onFileSelected(a)}),j(),L(19,"button",12),Z(20,"Create Item"),j()()()),i&2&&(oe(6),dt("ngModel",o.newItem.name),oe(3),dt("ngModel",o.newItem.weight),oe(3),dt("ngModel",o.newItem.price),oe(3),dt("ngModel",o.newItem.description))},dependencies:[Cr,Ir,eo,Dr,ri,Yn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:400px;padding:15px 60px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9c6;margin-top:30px;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.create[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2Fphoto1712309337.jpeg?alt=media&token=07b911e2-425c-4df1-8f04-901f21995f6d);background-size:cover;background-position:center;background-repeat:no-repeat}']});let t=e;return t})();function V6(t,e){if(t&1){let n=bh();L(0,"div")(1,"button",7),nt("click",function(){Hc(n);let i=fn(2);return zc(i.editItem())}),Z(2,"Edit"),j(),L(3,"button",7),nt("click",function(){Hc(n);let i=fn(2);return zc(i.deleteItem())}),Z(4,"Delete"),j()()}}function L6(t,e){if(t&1&&(L(0,"div",1)(1,"div",2),jn(2,"img",3),L(3,"div",4)(4,"h2"),Z(5),j(),L(6,"div",5)(7,"p"),Z(8),j(),L(9,"p"),Z(10),j(),L(11,"p"),Z(12),j()(),hn(13,V6,5,0,"div",6),j()()()),t&2){let n=fn();oe(2),Th("alt","",n.item.name," Photo"),Je("src",n.item.photo,Qc),oe(3),So(n.item.name),oe(3),Jt("Weight: ",n.item.weight,"kg"),oe(2),Jt("Price: $",n.item.price,""),oe(2),Jt("Description: ",n.item.description,""),oe(),Je("ngIf",n.isAdminUser())}}var LR=(()=>{let e=class e{constructor(r,i,o,s){this.route=r,this.dataService=i,this.router=o,this.authService=s,this.isOwner=!1,this.itemBought=!1,this.currentUser="";let a=this.authService.getCurrentUser();this.currentUser=a!==null?a:""}ngOnInit(){this.getItemDetails()}getItemDetails(){this.itemId=this.route.snapshot.paramMap.get("id"),this.itemId&&this.dataService.getItemById(this.itemId).subscribe(r=>{this.item=r,console.log("Retrieved item:",this.item)})}isAdminUser(){return this.currentUser==="admin@admin.com"}editItem(){this.item?this.router.navigate(["/edit",this.item.id],{state:{item:this.item}}):console.error("Item data is not available")}deleteItem(){this.itemId?confirm("Are you sure you want to delete this item?")&&this.dataService.deleteItem(this.itemId).then(()=>{console.log("Item deleted successfully"),this.router.navigate(["/catalog"])}).catch(r=>{console.error("Error deleting item:",r)}):console.error("Item ID is not provided")}};e.\u0275fac=function(i){return new(i||e)(J(qn),J(Xa),J(pt),J(Zi))},e.\u0275cmp=$e({type:e,selectors:[["app-details"]],decls:1,vars:1,consts:[["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"item-card"],[3,"src","alt"],[1,"item-details"],[1,"det"],[4,"ngIf"],[3,"click"]],template:function(i,o){i&1&&hn(0,L6,14,7,"div",0),i&2&&Je("ngIf",o.item)},dependencies:[Di],styles:[".item-card[_ngcontent-%COMP%]{padding:80px 250px;gap:60px;border-radius:20px;box-sizing:border-box;background:#12121191;box-shadow:14px 14px 30px #464a4e,-14px -14px 30px #464a4e;display:flex;justify-content:space-around;align-items:center}.item-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:423px;height:423px;border-radius:12px;margin-left:-200px}.item-details[_ngcontent-%COMP%]{color:#fff;margin-top:-120px;padding:20px}.item-details[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.item-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.item-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-top:27px}.item-bought-message[_ngcontent-%COMP%]{color:red}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2FDALL%C2%B7E_2024_04_05_12_08_22_Create_a_realistic_image_with_the_center.png?alt=media&token=738c2e0a-4456-42ac-b3e7-3f10a643a2ff);background-size:cover;background-position:center;background-repeat:no-repeat}.det[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start;flex-direction:column;width:20vw}"]});let t=e;return t})();var BR=(()=>{let e=class e{isLoggedIn(){return!!localStorage.getItem("token")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fI=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(){return this.authService.isLoggedIn()?(this.router.navigate(["/private"]),!1):!0}};e.\u0275fac=function(i){return new(i||e)(N(BR),N(pt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function j6(t,e){if(t&1&&(L(0,"div",14),Z(1),j()),t&2){let n=fn();oe(),So(n.errorMessage)}}var jR=(()=>{let e=class e{constructor(r,i,o,s){this.dataService=r,this.router=i,this.route=o,this.storage=s,this.item={id:"",name:"",weight:"",price:"",description:"",photo:""},this.errorMessage=""}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r?this.dataService.getItemById(r).subscribe(i=>{i?this.item=i:this.errorMessage="Item not found"},i=>{console.error("Error retrieving item:",i),this.errorMessage="Error retrieving item"}):this.errorMessage="Item ID is not provided"}save(){this.item&&this.item.id?this.selectedFile?this.uploadImage(this.selectedFile).then(r=>(this.item.photo=r,this.dataService.updateItem(this.item))).then(()=>{this.router.navigate(["/details",this.item.id])}).catch(r=>{console.error("Error updating item:",r),this.errorMessage="Error updating item"}):this.dataService.updateItem(this.item).then(()=>{this.router.navigate(["/details",this.item.id])}).catch(r=>{console.error("Error updating item:",r),this.errorMessage="Error updating item"}):this.errorMessage="No item to save"}onFileSelected(r){let i=r.target;i.files&&i.files.length>0&&(this.selectedFile=i.files[0])}uploadImage(r){return M(this,null,function*(){let i=`images/${r.name}`,o=this.storage.ref(i);return yield this.storage.upload(i,r).snapshotChanges().toPromise(),o.getDownloadURL().toPromise()})}};e.\u0275fac=function(i){return new(i||e)(J(Xa),J(pt),J(qn),J(gg))},e.\u0275cmp=$e({type:e,selectors:[["app-edit"]],decls:27,vars:5,consts:[[1,"edit"],[1,"edit-form",3,"ngSubmit"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","weight"],["type","text","id","weight","name","weight","required","",3,"ngModel","ngModelChange"],["for","price"],["type","text","id","price","name","price","required","",3,"ngModel","ngModelChange"],["for","description"],["id","description","name","description","required","",3,"ngModel","ngModelChange"],["for","photo"],["type","file","id","photo","name","photo","accept","image/*",3,"change"],["class","error-message",4,"ngIf"],["type","submit"],[1,"error-message"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"form",1),nt("ngSubmit",function(){return o.save()}),L(2,"h1"),Z(3,"Edit"),j(),L(4,"div")(5,"label",2),Z(6,"Name:"),j(),L(7,"input",3),ht("ngModelChange",function(a){return Et(o.item.name,a)||(o.item.name=a),a}),j()(),L(8,"div")(9,"label",4),Z(10,"Weight:"),j(),L(11,"input",5),ht("ngModelChange",function(a){return Et(o.item.weight,a)||(o.item.weight=a),a}),j()(),L(12,"div")(13,"label",6),Z(14,"Price:"),j(),L(15,"input",7),ht("ngModelChange",function(a){return Et(o.item.price,a)||(o.item.price=a),a}),j()(),L(16,"div")(17,"label",8),Z(18,"Description:"),j(),L(19,"textarea",9),ht("ngModelChange",function(a){return Et(o.item.description,a)||(o.item.description=a),a}),j()(),L(20,"div")(21,"label",10),Z(22,"Photo:"),j(),L(23,"input",11),nt("change",function(a){return o.onFileSelected(a)}),j()(),hn(24,j6,2,1,"div",12),L(25,"button",13),Z(26,"Save"),j()()()),i&2&&(oe(7),dt("ngModel",o.item.name),oe(4),dt("ngModel",o.item.weight),oe(4),dt("ngModel",o.item.price),oe(4),dt("ngModel",o.item.description),oe(5),Je("ngIf",o.errorMessage))},dependencies:[Di,Cr,Ir,eo,Dr,QE,ri,Yn],styles:[".edit-form[_ngcontent-%COMP%]{padding:10px 23px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9d3;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:520px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}.edit-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}.edit-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}.edit-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .edit-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:350px;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.edit-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:110px}.edit-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.edit-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.edit-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.edit[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://images.pexels.com/photos/669582/pexels-photo-669582.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1);background-size:cover;background-position:center;background-repeat:no-repeat}"]});let t=e;return t})();var $R=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-not-found"]],decls:6,vars:0,consts:[[1,"text"],[1,"error-container"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"div",1)(2,"h1"),Z(3,"404 Not Found"),j(),L(4,"p"),Z(5,"The page you are looking for does not exist."),j()()())},styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;height:100vh;display:flex;justify-content:center;align-items:center;background-color:#f5f5f5}.error-container[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px;color:#333}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.text[_ngcontent-%COMP%]{padding-top:230px;display:flex;justify-content:center;align-items:center;flex-direction:column}"]});let t=e;return t})();function $6(t,e){if(t&1&&(L(0,"p"),Z(1),j()),t&2){let n=fn(2);oe(),Jt("Name: ",n.user.name,"")}}function q6(t,e){if(t&1&&(L(0,"p"),Z(1),Ah(2,"date"),j()),t&2){let n=fn(2);oe(),Jt("Birthday: ",BT(2,1,n.user.birth,"dd.MM.yyyy"),"")}}function H6(t,e){if(t&1&&(L(0,"div",3)(1,"h1"),Z(2,"Profile"),j(),L(3,"p"),Z(4),j(),hn(5,$6,2,1,"p",4)(6,q6,3,4,"p",4),j()),t&2){let n=fn();oe(4),Jt("Email: ",n.user.email,""),oe(),Je("ngIf",n.user.name),oe(),Je("ngIf",n.user.birth)}}var qR=(()=>{let e=class e{constructor(r){this.authService=r,this.user=null}ngOnInit(){console.log("Fetching user info"),this.authService.getUserInfo().subscribe(r=>{this.user=r,console.log("User info:",this.user)},r=>{console.error("Error fetching user info:",r)})}};e.\u0275fac=function(i){return new(i||e)(J(Zi))},e.\u0275cmp=$e({type:e,selectors:[["app-profile"]],decls:4,vars:1,consts:[["id","profile-page"],[1,"profileForm"],["id","profile",4,"ngIf"],["id","profile"],[4,"ngIf"]],template:function(i,o){i&1&&(L(0,"div",0)(1,"div",1)(2,"form"),hn(3,H6,7,3,"div",2),j()()()),i&2&&(oe(3),Je("ngIf",o.user))},dependencies:[Di,Cr,Dr,Yn,pA],styles:["form[_ngcontent-%COMP%]{max-width:500px;border:1px solid #ccc;padding:0 70px;border-radius:20px;background-color:#f9f9f9cd;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:360px;box-shadow:6px 6px 20px #c3d8ed62,-6px -6px 20px #cad7e562}p[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-top:30px}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:40px}#profile-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2Fprof.jpg?alt=media&token=ae383716-bbdf-47df-9c8e-2ef1042b584d);background-size:cover;background-position:center;background-repeat:no-repeat}#profile[_ngcontent-%COMP%]{margin-top:85px}"]});let t=e;return t})();var z6=[{path:"",component:G1},{path:"catalog",component:JF},{path:"create",component:VR},{path:"register",component:XF,canActivate:[fI]},{path:"login",component:YF,canActivate:[fI]},{path:"details/:id",component:LR},{path:"edit/:id",component:jR},{path:"profile",component:qR},{path:"**",component:$R}],HR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e}),e.\u0275inj=Xe({imports:[Tu.forRoot(z6),Tu]});let t=e;return t})();var zR={production:!1,firebase:{apiKey:"AIzaSyB0BLEPahUCpf0FIfejuqJV37x238pZ4Xk",authDomain:"angular-softuni-project-21b88.firebaseapp.com",projectId:"angular-softuni-project-21b88",storageBucket:"angular-softuni-project-21b88.appspot.com",messagingSenderId:"147986316750",appId:"1:147986316750:web:f71e429729a9d8fee07f9f",measurementId:"G-S07HMHV82K"}};var GR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ye({type:e,bootstrap:[z1]}),e.\u0275inj=Xe({imports:[kA,HR,Tu,q1.initializeApp(zR.firebase),KF,QF,AA]});let t=e;return t})();UA().bootstrapModule(GR).catch(t=>console.error(t));

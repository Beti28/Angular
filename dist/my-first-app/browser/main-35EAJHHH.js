import{a as W,b as Ie,c as qg,d as M,e as yD,f as $l,g as vD,h as _D,i as wD,j as Hg,k as ql,l as bc,m as zg,n as Hl,o as zl,p as ED,q as Gg,r as Te,s as Fn,t as er,u as Gl,v as ao,w as Wl,x as ID,y as Rn,z as Vt}from"./chunk-E6UTZDOG.js";var DD=null;var Wg=1,Kg=Symbol("SIGNAL");function De(n){let e=DD;return DD=n,e}var CD={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function AN(n){if(!(Xg(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wg)){if(!n.producerMustRecompute(n)&&!Qg(n)){n.dirty=!1,n.lastCleanEpoch=Wg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Wg}}function bD(n){return n&&(n.nextProducerIndex=0),De(n)}function TD(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Xg(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Yg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qg(n){Kl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(AN(t),r!==t.version))return!0}return!1}function AD(n){if(Kl(n),Xg(n))for(let e=0;e<n.producerNode.length;e++)Yg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Yg(n,e){if(SN(n),Kl(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Yg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kl(i),i.producerIndexOfThis[r]=e}}function Xg(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SN(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function MN(){throw new Error}var xN=MN;function SD(n){xN=n}function ae(n){return typeof n=="function"}function ps(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ql=ps(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function co(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof Ql?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{MD(o)}catch(s){e=e??[],s instanceof Ql?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ql(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&co(t,e)}remove(e){let{_finalizers:t}=this;t&&co(t,e),e instanceof n&&e._removeParent(this)}};tt.EMPTY=(()=>{let n=new tt;return n.closed=!0,n})();var Jg=tt.EMPTY;function Yl(n){return n instanceof tt||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function MD(n){ae(n)?n():n.unsubscribe()}var Nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gs={setTimeout(n,e,...t){let{delegate:r}=gs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=gs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Xl(n){gs.setTimeout(()=>{let{onUnhandledError:e}=Nn;if(e)e(n);else throw n})}function Tc(){}var xD=Zg("C",void 0,void 0);function FD(n){return Zg("E",void 0,n)}function RD(n){return Zg("N",n,void 0)}function Zg(n,e,t){return{kind:n,value:e,error:t}}var uo=null;function ms(n){if(Nn.useDeprecatedSynchronousErrorHandling){let e=!uo;if(e&&(uo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=uo;if(uo=null,t)throw r}}else n()}function ND(n){Nn.useDeprecatedSynchronousErrorHandling&&uo&&(uo.errorThrown=!0,uo.error=n)}var lo=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yl(e)&&e.add(this)):this.destination=NN}static create(e,t,r){return new Fr(e,t,r)}next(e){this.isStopped?tm(RD(e),this):this._next(e)}error(e){this.isStopped?tm(FD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tm(xD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FN=Function.prototype.bind;function em(n,e){return FN.call(n,e)}var nm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Jl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Jl(r)}else Jl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Jl(t)}}},Fr=class extends lo{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&em(e.next,o),error:e.error&&em(e.error,o),complete:e.complete&&em(e.complete,o)}):i=e}this.destination=new nm(i)}};function Jl(n){Nn.useDeprecatedSynchronousErrorHandling?ND(n):Xl(n)}function RN(n){throw n}function tm(n,e){let{onStoppedNotification:t}=Nn;t&&gs.setTimeout(()=>t(n,e))}var NN={closed:!0,next:Tc,error:RN,complete:Tc};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kt(n){return n}function rm(...n){return im(n)}function im(n){return n.length===0?Kt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=UN(t)?t:new Fr(t,r,i);return ms(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=PD(r),new r((i,o)=>{let s=new Fr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ys](){return this}pipe(...t){return im(t)(this)}toPromise(t){return t=PD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function PD(n){var e;return(e=n??Nn.Promise)!==null&&e!==void 0?e:Promise}function PN(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function UN(n){return n&&n instanceof lo||PN(n)&&Yl(n)}function om(n){return ae(n?.lift)}function ue(n){return e=>{if(om(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new sm(n,e,t,r,i)}var sm=class extends lo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vs(){return ue((n,e)=>{let t=null;n._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _s=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,om(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tt;let t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tt.EMPTY)}return e}refCount(){return vs()(this)}};var UD=ps(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Zl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new UD}next(t){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jg:(this.currentObservers=null,o.push(t),new tt(()=>{this.currentObservers=null,co(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Zl(e,t),n})(),Zl=class extends Ye{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jg}};var St=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ac={now(){return(Ac.delegate||Date).now()},delegate:void 0};var ed=class extends Ye{constructor(e=1/0,t=1/0,r=Ac){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var td=class extends tt{constructor(e,t){super()}schedule(e,t=0){return this}};var Sc={setInterval(n,e,...t){let{delegate:r}=Sc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Sc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ws=class extends td{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Sc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Sc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,co(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Es=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Es.now=Ac.now;var Is=class extends Es{constructor(e,t=Es.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ho=new Is(ws);var nd=class extends ws{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var rd=class extends Is{};var am=new rd(nd);var Qt=new he(n=>n.complete());function kD(n){return n&&ae(n.schedule)}function cm(n){return n[n.length-1]}function id(n){return ae(cm(n))?n.pop():void 0}function tr(n){return kD(cm(n))?n.pop():void 0}function OD(n,e){return typeof cm(n)=="number"?n.pop():e}var od=n=>n&&typeof n.length=="number"&&typeof n!="function";function sd(n){return ae(n?.then)}function ad(n){return ae(n[ys])}function cd(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function ud(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ld=kN();function dd(n){return ae(n?.[ld])}function hd(n){return vD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield $l(t.read());if(i)return yield $l(void 0);yield yield $l(r)}}finally{t.releaseLock()}})}function fd(n){return ae(n?.getReader)}function je(n){if(n instanceof he)return n;if(n!=null){if(ad(n))return ON(n);if(od(n))return VN(n);if(sd(n))return LN(n);if(cd(n))return VD(n);if(dd(n))return BN(n);if(fd(n))return jN(n)}throw ud(n)}function ON(n){return new he(e=>{let t=n[ys]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VN(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LN(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Xl)})}function BN(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function VD(n){return new he(e=>{$N(n,e).catch(t=>e.error(t))})}function jN(n){return VD(hd(n))}function $N(n,e){var t,r,i,o;return yD(this,void 0,void 0,function*(){try{for(t=_D(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function dn(n,e=0){return ue((t,r)=>{t.subscribe(le(r,i=>sn(r,n,()=>r.next(i),e),()=>sn(r,n,()=>r.complete(),e),i=>sn(r,n,()=>r.error(i),e)))})}function Pn(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LD(n,e){return je(n).pipe(Pn(e),dn(e))}function BD(n,e){return je(n).pipe(Pn(e),dn(e))}function jD(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $D(n,e){return new he(t=>{let r;return sn(t,e,()=>{r=n[ld](),sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function pd(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{sn(t,e,()=>{let r=n[Symbol.asyncIterator]();sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qD(n,e){return pd(hd(n),e)}function HD(n,e){if(n!=null){if(ad(n))return LD(n,e);if(od(n))return jD(n,e);if(sd(n))return BD(n,e);if(cd(n))return pd(n,e);if(dd(n))return $D(n,e);if(fd(n))return qD(n,e)}throw ud(n)}function pe(n,e){return e?HD(n,e):je(n)}function ne(...n){let e=tr(n);return pe(n,e)}function Ds(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function um(n){return!!n&&(n instanceof he||ae(n.lift)&&ae(n.subscribe))}var Rr=ps(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:qN}=Array;function HN(n,e){return qN(e)?n(...e):n(e)}function gd(n){return Z(e=>HN(n,e))}var{isArray:zN}=Array,{getPrototypeOf:GN,prototype:WN,keys:KN}=Object;function md(n){if(n.length===1){let e=n[0];if(zN(e))return{args:e,keys:null};if(QN(e)){let t=KN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function QN(n){return n&&typeof n=="object"&&GN(n)===WN}function yd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Mc(...n){let e=tr(n),t=id(n),{args:r,keys:i}=md(n);if(r.length===0)return pe([],e);let o=new he(YN(r,e,i?s=>yd(i,s):Kt));return t?o.pipe(gd(t)):o}function YN(n,e,t=Kt){return r=>{zD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)zD(e,()=>{let l=pe(n[c],e),d=!1;l.subscribe(le(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function zD(n,e,t){n?sn(t,n,e):e()}function GD(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=C=>l<r?I(C):c.push(C),I=C=>{o&&e.next(C),l++;let b=!1;je(t(C,d++)).subscribe(le(e,U=>{i?.(U),o?y(U):e.next(U)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<r;){let U=c.shift();s?sn(e,s,()=>I(U)):I(U)}g()}catch(U){e.error(U)}}))};return n.subscribe(le(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ut(n,e,t=1/0){return ae(e)?ut((r,i)=>Z((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>GD(r,i,n,t)))}function ai(n=1/0){return ut(Kt,n)}function WD(){return ai(1)}function Cs(...n){return WD()(pe(n,tr(n)))}function vd(n){return new he(e=>{je(n()).subscribe(e)})}function lm(...n){let e=id(n),{args:t,keys:r}=md(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;je(t[d]).subscribe(le(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?yd(r,a):a),o.complete())}))}});return e?i.pipe(gd(e)):i}function dm(...n){let e=tr(n),t=OD(n,1/0),r=n;return r.length?r.length===1?je(r[0]):ai(t)(pe(r,e)):Qt}function wt(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ci(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(le(t,void 0,void 0,s=>{o=je(n(s,ci(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function KD(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(le(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Nr(n,e){return ae(e)?ut(n,e,1):ut(n,1)}function hm(n,e=ho){return ue((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(le(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function ui(n){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pr(n){return n<=0?()=>Qt:ue((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fm(n){return Z(()=>n)}function pm(n,e=Kt){return n=n??XN,ue((t,r)=>{let i,o=!0;t.subscribe(le(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function XN(n,e){return n===e}function _d(n=JN){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function JN(){return new Rr}function nr(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function wn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,o)=>n(i,o,r)):Kt,Pr(1),t?ui(e):_d(()=>new Rr))}function bs(n){return n<=0?()=>Qt:ue((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,o)=>n(i,o,r)):Kt,bs(1),t?ui(e):_d(()=>new Rr))}function xc(){return ue((n,e)=>{let t,r=!1;n.subscribe(le(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function fo(n,e){return ue(KD(n,e,arguments.length>=2,!0))}function QD(n={}){let{connector:e=()=>new Ye,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,d=f=!1},I=()=>{let C=s;y(),C?.unsubscribe()};return ue((C,b)=>{l++,!f&&!d&&g();let U=c=c??e();b.add(()=>{l--,l===0&&!f&&!d&&(a=mm(I,i))}),U.subscribe(b),!s&&l>0&&(s=new Fr({next:H=>U.next(H),error:H=>{f=!0,g(),a=mm(y,t,H),U.error(H)},complete:()=>{d=!0,g(),a=mm(y,r),U.complete()}}),je(C).subscribe(s))})(o)}}function mm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Fr({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function wd(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,QD({connector:()=>new ed(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function po(...n){let e=tr(n);return ue((t,r)=>{(e?Cs(n,t,e):Cs(n,t)).subscribe(r)})}function Ne(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(le(r,c=>{i?.unsubscribe();let l=0,d=o++;je(n(c,d)).subscribe(i=le(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ed(n,e){return ae(e)?Ne(()=>n,e):Ne(()=>n)}function ym(n){return ue((e,t)=>{je(n).subscribe(le(t,()=>t.complete(),Tc)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(le(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Kt}var UC="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(nh(e,t)),this.code=e}};function nh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function qc(n){return{toString:n}.toString()}var Id="__parameters__";function ZN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kC(n,e,t){return qc(()=>{let r=ZN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Id)?c[Id]:Object.defineProperty(c,Id,{value:[]})[Id];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Et=globalThis;function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function eP(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Xt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function YD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var tP=Pe({__forward_ref__:Pe});function To(n){return n.__forward_ref__=To,n.toString=function(){return Xt(this())},n}function Yt(n){return OC(n)?n():n}function OC(n){return typeof n=="function"&&n.hasOwnProperty(tP)&&n.__forward_ref__===To}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xe(n){return{providers:n.providers||[],imports:n.imports||[]}}function rh(n){return XD(n,LC)||XD(n,BC)}function VC(n){return rh(n)!==null}function XD(n,e){return n.hasOwnProperty(e)?n[e]:null}function nP(n){let e=n&&(n[LC]||n[BC]);return e||null}function JD(n){return n&&(n.hasOwnProperty(ZD)||n.hasOwnProperty(rP))?n[ZD]:null}var LC=Pe({\u0275prov:Pe}),ZD=Pe({\u0275inj:Pe}),BC=Pe({ngInjectableDef:Pe}),rP=Pe({ngInjectorDef:Pe}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jC(n){return n&&!!n.\u0275providers}var iP=Pe({\u0275cmp:Pe}),oP=Pe({\u0275dir:Pe}),sP=Pe({\u0275pipe:Pe}),aP=Pe({\u0275mod:Pe}),Rd=Pe({\u0275fac:Pe}),Fc=Pe({__NG_ELEMENT_ID__:Pe}),eC=Pe({__NG_ENV_ID__:Pe});function ih(n){return typeof n=="string"?n:n==null?"":String(n)}function cP(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ih(n)}function uP(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function wy(n,e){throw new ee(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Nm;function $C(){return Nm}function an(n){let e=Nm;return Nm=n,e}function qC(n,e,t){let r=rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;wy(n,"Injector")}var lP={},Nc=lP,Pm="__NG_DI_FLAG__",Nd="ngTempTokenPath",dP="ngTokenPath",hP=/\n/gm,fP="\u0275",tC="__source",xs;function pP(){return xs}function li(n){let e=xs;return xs=n,e}function gP(n,e=ge.Default){if(xs===void 0)throw new ee(-203,!1);return xs===null?qC(n,void 0,e):xs.get(n,e&ge.Optional?null:void 0,e)}function P(n,e=ge.Default){return($C()||gP)(Yt(n),e)}function B(n,e=ge.Default){return P(n,oh(e))}function oh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Um(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],c=mP(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(P(i,o))}else e.push(P(r))}return e}function HC(n,e){return n[Pm]=e,n.prototype[Pm]=e,n}function mP(n){return n[Pm]}function yP(n,e,t,r){let i=n[Nd];throw e[tC]&&i.unshift(e[tC]),n.message=vP(`
`+n.message,i,t,r),n[dP]=i,n[Nd]=null,n}function vP(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==fP?n.slice(2):n;let i=Xt(e);if(Array.isArray(e))i=e.map(Xt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Xt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(hP,`
  `)}`}var Bs=HC(kC("Optional"),8);var Ey=HC(kC("SkipSelf"),4);function vo(n,e){let t=n.hasOwnProperty(Rd);return t?n[Rd]:null}function Iy(n,e){n.forEach(t=>Array.isArray(t)?Iy(t,e):e(t))}function zC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function _P(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function wP(n,e,t){let r=Hc(n,e);return r>=0?n[r|1]=t:(r=~r,_P(n,r,e,t)),r}function vm(n,e){let t=Hc(n,e);if(t>=0)return n[t|1]}function Hc(n,e){return EP(n,e,1)}function EP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Rs={},En=[],Ns=new q(""),GC=new q("",-1),WC=new q(""),Ud=class{get(e,t=Nc){if(t===Nc){let r=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw r.name="NullInjectorError",r}return t}},KC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(KC||{}),or=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(or||{}),Lt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Lt||{});function IP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function km(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];DP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function QC(n){return n===3||n===4||n===6}function DP(n){return n.charCodeAt(0)===64}function Pc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?nC(n,t,i,null,e[++r]):nC(n,t,i,null,null))}}return n}function nC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var YC="ng-template";function CP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&IP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Dy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Dy(n){return n.type===4&&n.value!==YC}function bP(n,e,t){let r=n.type===4&&!t?YC:n.value;return e===r}function TP(n,e,t){let r=4,i=n.attrs,o=i!==null?MP(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Un(r)&&!Un(c))return!1;if(s&&Un(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!bP(n,c,t)||c===""&&e.length===1){if(Un(r))return!1;s=!0}}else if(r&8){if(i===null||!CP(n,i,c,t)){if(Un(r))return!1;s=!0}}else{let l=e[++a],d=AP(c,i,Dy(n),t);if(d===-1){if(Un(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Un(r))return!1;s=!0}}}}return Un(r)||s}function Un(n){return(n&1)===0}function AP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return xP(e,n)}function SP(n,e,t=!1){for(let r=0;r<e.length;r++)if(TP(n,e[r],t))return!0;return!1}function MP(n){for(let e=0;e<n.length;e++){let t=n[e];if(QC(t))return e}return n.length}function xP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rC(n,e){return n?":not("+e.trim()+")":e}function FP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Un(s)&&(e+=rC(o,i),i=""),r=s,o=o||!Un(r);t++}return i!==""&&(e+=rC(o,i)),e}function RP(n){return n.map(FP).join(",")}function NP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Un(i))break;i=o}r++}return{attrs:e,classes:t}}function qe(n){return qc(()=>{let e=tb(n),t=Ie(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===KC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||or.Emulated,styles:n.styles||En,_:null,schemas:n.schemas||null,tView:null,id:""});nb(t);let r=n.dependencies;return t.directiveDefs=oC(r,!1),t.pipeDefs=oC(r,!0),t.id=kP(t),t})}function PP(n){return hi(n)||XC(n)}function UP(n){return n!==null}function Je(n){return qc(()=>({type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function iC(n,e){if(n==null)return Rs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Lt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Lt.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Mt(n){return qc(()=>{let e=tb(n);return nb(e),e})}function sh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function hi(n){return n[iP]||null}function XC(n){return n[oP]||null}function JC(n){return n[sP]||null}function ZC(n){let e=hi(n)||XC(n)||JC(n);return e!==null?e.standalone:!1}function eb(n,e){let t=n[aP]||null;if(!t&&e===!0)throw new Error(`Type ${Xt(n)} does not have '\u0275mod' property.`);return t}function tb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Rs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:iC(n.inputs,e),outputs:iC(n.outputs),debugInfo:null}}function nb(n){n.features?.forEach(e=>e(n))}function oC(n,e){if(!n)return null;let t=e?JC:PP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(UP)}function kP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ah(n){return{\u0275providers:n}}function OP(...n){return{\u0275providers:rb(!0,n),\u0275fromNgModule:!0}}function rb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Iy(e,s=>{let a=s;Om(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ib(i,o),t}function ib(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Cy(i,o=>{e(o,r)})}}function Om(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=JD(n),s=!o&&hi(n);if(!o&&!s){let c=n.ngModule;if(o=JD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Om(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Iy(o.imports,d=>{Om(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&ib(l,e)}if(!a){let l=vo(i)||(()=>new i);e({provide:i,useFactory:l,deps:En},i),e({provide:WC,useValue:i,multi:!0},i),e({provide:Ns,useValue:()=>P(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Cy(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Cy(n,e){for(let t of n)jC(t)&&(t=t.\u0275providers),Array.isArray(t)?Cy(t,e):e(t)}var VP=Pe({provide:String,useValue:Pe});function ob(n){return n!==null&&typeof n=="object"&&VP in n}function LP(n){return!!(n&&n.useExisting)}function BP(n){return!!(n&&n.useFactory)}function Ps(n){return typeof n=="function"}function jP(n){return!!n.useClass}var ch=new q(""),Ad={},$P={},_m;function by(){return _m===void 0&&(_m=new Ud),_m}var Bt=class{},Uc=class extends Bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lm(e,s=>this.processProvider(s)),this.records.set(GC,Ts(void 0,this)),i.has("environment")&&this.records.set(Bt,Ts(void 0,this));let o=this.records.get(ch);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WC,En,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=li(this),r=an(void 0),i;try{return e()}finally{li(t),an(r)}}get(e,t=Nc,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(eC))return e[eC](this);r=oh(r);let i,o=li(this),s=an(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=WP(e)&&rh(e);l&&this.injectableDefInScope(l)?c=Ts(Vm(e),Ad):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?by():this.parent;return t=r&ge.Optional&&t===Nc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Nd]=a[Nd]||[]).unshift(Xt(e)),o)throw a;return yP(a,e,"R3InjectorError",this.source)}else throw a}finally{an(s),li(o)}}resolveInjectorInitializers(){let e=De(null),t=li(this),r=an(void 0),i;try{let o=this.get(Ns,En,ge.Self);for(let s of o)s()}finally{li(t),an(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Xt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Yt(e);let t=Ps(e)?e:Yt(e&&e.provide),r=HP(e);if(!Ps(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ts(void 0,Ad,!0),i.factory=()=>Um(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Ad&&(t.value=$P,t.value=t.factory()),typeof t.value=="object"&&t.value&&GP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Vm(n){let e=rh(n),t=e!==null?e.factory:vo(n);if(t!==null)return t;if(n instanceof q)throw new ee(204,!1);if(n instanceof Function)return qP(n);throw new ee(204,!1)}function qP(n){if(n.length>0)throw new ee(204,!1);let t=nP(n);return t!==null?()=>t.factory(n):()=>new n}function HP(n){if(ob(n))return Ts(void 0,n.useValue);{let e=sb(n);return Ts(e,Ad)}}function sb(n,e,t){let r;if(Ps(n)){let i=Yt(n);return vo(i)||Vm(i)}else if(ob(n))r=()=>Yt(n.useValue);else if(BP(n))r=()=>n.useFactory(...Um(n.deps||[]));else if(LP(n))r=()=>P(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(zP(n))r=()=>new i(...Um(n.deps));else return vo(i)||Vm(i)}return r}function Ts(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zP(n){return!!n.deps}function GP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function WP(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Lm(n,e){for(let t of n)Array.isArray(t)?Lm(t,e):t&&jC(t)?Lm(t.\u0275providers,e):e(t)}function Bn(n,e){n instanceof Uc&&n.assertNotDestroyed();let t,r=li(n),i=an(void 0);try{return e()}finally{li(r),an(i)}}function ab(){return $C()!==void 0||pP()!=null}function KP(n){if(!ab())throw new ee(-203,!1)}function QP(n){let e=Et.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function YP(n){return typeof n=="function"}var Or=0,ve=1,se=2,jt=3,kn=4,jn=5,kd=6,kc=7,On=8,Us=9,Vn=10,dt=11,Oc=12,sC=13,js=14,sr=15,uh=16,As=17,ks=18,lh=19,cb=20,di=21,wm=22,_o=23,Ln=25,ub=1;var wo=7,Od=8,Vd=9,In=10,Ty=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ty||{});function mo(n){return Array.isArray(n)&&typeof n[ub]=="object"}function Vr(n){return Array.isArray(n)&&n[ub]===!0}function lb(n){return(n.flags&4)!==0}function dh(n){return n.componentOffset>-1}function Ay(n){return(n.flags&1)===1}function fi(n){return!!n.template}function XP(n){return(n[se]&512)!==0}var Bm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function db(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function mi(){return hb}function hb(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZP),JP}mi.ngInherit=!0;function JP(){let n=pb(this),e=n?.current;if(e){let t=n.previous;if(t===Rs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZP(n,e,t,r,i){let o=this.declaredInputs[r],s=pb(n)||e2(n,{previous:Rs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Bm(l&&l.currentValue,t,c===Rs),db(n,e,i,t)}var fb="__ngSimpleChanges__";function pb(n){return n[fb]||null}function e2(n,e){return n[fb]=e}var aC=null;var rr=function(n,e,t){aC?.(n,e,t)},t2="svg",n2="math",r2=!1;function i2(){return r2}function ar(n){for(;Array.isArray(n);)n=n[Or];return n}function gb(n,e){return ar(e[n])}function Dn(n,e){return ar(e[n.index])}function mb(n,e){return n.data[e]}function yb(n,e){return n[e]}function yi(n,e){let t=e[n];return mo(t)?t:t[Or]}function Sy(n){return(n[se]&128)===128}function o2(n){return Vr(n[jt])}function Ld(n,e){return e==null?null:n[e]}function vb(n){n[As]=0}function s2(n){n[se]&1024||(n[se]|=1024,Sy(n)&&Vc(n))}function a2(n,e){for(;n>0;)e=e[js],n--;return e}function My(n){return!!(n[se]&9216||n[_o]?.dirty)}function jm(n){n[Vn].changeDetectionScheduler?.notify(1),My(n)?Vc(n):n[se]&64&&(i2()?(n[se]|=1024,Vc(n)):n[Vn].changeDetectionScheduler?.notify())}function Vc(n){n[Vn].changeDetectionScheduler?.notify();let e=Lc(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Sy(e)));)e=Lc(e)}function _b(n,e){if((n[se]&256)===256)throw new ee(911,!1);n[di]===null&&(n[di]=[]),n[di].push(e)}function c2(n,e){if(n[di]===null)return;let t=n[di].indexOf(e);t!==-1&&n[di].splice(t,1)}function Lc(n){let e=n[jt];return Vr(e)?e[jt]:e}var ye={lFrame:Tb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function u2(){return ye.lFrame.elementDepthCount}function l2(){ye.lFrame.elementDepthCount++}function d2(){ye.lFrame.elementDepthCount--}function wb(){return ye.bindingsEnabled}function h2(){return ye.skipHydrationRootTNode!==null}function f2(n){return ye.skipHydrationRootTNode===n}function p2(){ye.skipHydrationRootTNode=null}function Me(){return ye.lFrame.lView}function Jt(){return ye.lFrame.tView}function zc(n){return ye.lFrame.contextLView=n,n[On]}function Gc(n){return ye.lFrame.contextLView=null,n}function cn(){let n=Eb();for(;n!==null&&n.type===64;)n=n.parent;return n}function Eb(){return ye.lFrame.currentTNode}function g2(){let n=ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Wc(n,e){let t=ye.lFrame;t.currentTNode=n,t.isParent=e}function Ib(){return ye.lFrame.isParent}function m2(){ye.lFrame.isParent=!1}function xy(){let n=ye.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function y2(n){return ye.lFrame.bindingIndex=n}function hh(){return ye.lFrame.bindingIndex++}function v2(n){let e=ye.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function _2(){return ye.lFrame.inI18n}function w2(n,e){let t=ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,$m(e)}function E2(){return ye.lFrame.currentDirectiveIndex}function $m(n){ye.lFrame.currentDirectiveIndex=n}function I2(n){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Db(n){ye.lFrame.currentQueryIndex=n}function D2(n){let e=n[ve];return e.type===2?e.declTNode:e.type===1?n[jn]:null}function Cb(n,e,t){if(t&ge.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=D2(o),i===null||(o=o[js],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ye.lFrame=bb();return r.currentTNode=e,r.lView=n,!0}function Fy(n){let e=bb(),t=n[ve];ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bb(){let n=ye.lFrame,e=n===null?null:n.child;return e===null?Tb(n):e}function Tb(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Ab(){let n=ye.lFrame;return ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Sb=Ab;function Ry(){let n=Ab();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function C2(n){return(ye.lFrame.contextLView=a2(n,ye.lFrame.contextLView))[On]}function $s(){return ye.lFrame.selectedIndex}function Eo(n){ye.lFrame.selectedIndex=n}function fh(){let n=ye.lFrame;return mb(n.tView,n.selectedIndex)}function b2(){return ye.lFrame.currentNamespace}var Mb=!0;function Ny(){return Mb}function Py(n){Mb=n}function T2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=hb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Uy(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Sd(n,e,t){xb(n,e,3,t)}function Md(n,e,t,r){(n[se]&3)===t&&xb(n,e,t,r)}function Em(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function xb(n,e,t,r){let i=r!==void 0?n[As]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[As]+=65536),(a<o||o==-1)&&(A2(n,t,e,c),n[As]=(n[As]&4294901760)+c+2),c++}function cC(n,e){rr(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),rr(5,n,e)}}function A2(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[As]>>16&&(n[se]&3)===e&&(n[se]+=16384,cC(a,o)):cC(a,o)}var Fs=-1,Io=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function S2(n){return n instanceof Io}function M2(n){return(n.flags&8)!==0}function x2(n){return(n.flags&16)!==0}function Fb(n){return n!==Fs}function Bd(n){return n&32767}function F2(n){return n>>16}function jd(n,e){let t=F2(n),r=e;for(;t>0;)r=r[js],t--;return r}var qm=!0;function $d(n){let e=qm;return qm=n,e}var R2=256,Rb=R2-1,Nb=5,N2=0,ir={};function P2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Fc)&&(r=t[Fc]),r==null&&(r=t[Fc]=N2++);let i=r&Rb,o=1<<i;e.data[n+(i>>Nb)]|=o}function qd(n,e){let t=Pb(n,e);if(t!==-1)return t;let r=e[ve];r.firstCreatePass&&(n.injectorIndex=e.length,Im(r.data,n),Im(e,null),Im(r.blueprint,null));let i=ky(n,e),o=n.injectorIndex;if(Fb(i)){let s=Bd(i),a=jd(i,e),c=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Im(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Pb(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ky(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Lb(i),r===null)return Fs;if(t++,i=i[js],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Fs}function Hm(n,e,t){P2(n,e,t)}function U2(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(QC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function Ub(n,e,t){if(t&ge.Optional||n!==void 0)return n;wy(e,"NodeInjector")}function kb(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[Us],o=an(void 0);try{return i?i.get(e,r,t&ge.Optional):qC(e,r,t&ge.Optional)}finally{an(o)}}return Ub(r,e,t)}function Ob(n,e,t,r=ge.Default,i){if(n!==null){if(e[se]&2048&&!(r&ge.Self)){let s=B2(n,e,t,r,ir);if(s!==ir)return s}let o=Vb(n,e,t,r,ir);if(o!==ir)return o}return kb(e,t,r,i)}function Vb(n,e,t,r,i){let o=V2(t);if(typeof o=="function"){if(!Cb(e,n,r))return r&ge.Host?Ub(i,t,r):kb(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))wy(t);else return s}finally{Sb()}}else if(typeof o=="number"){let s=null,a=Pb(n,e),c=Fs,l=r&ge.Host?e[sr][jn]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?ky(n,e):e[a+8],c===Fs||!lC(r,!1)?a=-1:(s=e[ve],a=Bd(c),e=jd(c,e)));a!==-1;){let d=e[ve];if(uC(o,a,d.data)){let f=k2(a,e,t,s,r,l);if(f!==ir)return f}c=e[a+8],c!==Fs&&lC(r,e[ve].data[a+8]===l)&&uC(o,a,e)?(s=d,a=Bd(c),e=jd(c,e)):a=-1}}return i}function k2(n,e,t,r,i,o){let s=e[ve],a=s.data[n+8],c=r==null?dh(a)&&qm:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,d=O2(a,s,t,c,l);return d!==null?Os(e,s,d,a):ir}function O2(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let I=s[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){let y=s[c];if(y&&fi(y)&&y.type===t)return c}return null}function Os(n,e,t,r){let i=n[t],o=e.data;if(S2(i)){let s=i;s.resolving&&uP(cP(o[t]));let a=$d(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?an(s.injectImpl):null,d=Cb(n,r,ge.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&T2(t,o[t],e)}finally{l!==null&&an(l),$d(a),s.resolving=!1,Sb()}}return i}function V2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Fc)?n[Fc]:void 0;return typeof e=="number"?e>=0?e&Rb:L2:e}function uC(n,e,t){let r=1<<n;return!!(t[e+(n>>Nb)]&r)}function lC(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var yo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ob(this._tNode,this._lView,e,oh(r),t)}};function L2(){return new yo(cn(),Me())}function qs(n){return qc(()=>{let e=n.prototype.constructor,t=e[Rd]||zm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Rd]||zm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zm(n){return OC(n)?()=>{let e=zm(Yt(n));return e&&e()}:vo(n)}function B2(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=Vb(o,s,t,r|ge.Self,ir);if(a!==ir)return a;let c=o.parent;if(!c){let l=s[cb];if(l){let d=l.get(t,ir,r);if(d!==ir)return d}c=Lb(s),s=s[js]}o=c}return i}function Lb(n){let e=n[ve],t=e.type;return t===2?e.declTNode:t===1?n[jn]:null}function Oy(n){return U2(cn(),n)}function dC(n,e=null,t=null,r){let i=Bb(n,e,t,r);return i.resolveInjectorInitializers(),i}function Bb(n,e=null,t=null,r,i=new Set){let o=[t||En,OP(n)];return r=r||(typeof n=="object"?void 0:Xt(n)),new Uc(o,e||by(),r||null,i)}var $n=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Nc}static{this.NULL=new Ud}static create(t,r){if(Array.isArray(t))return dC({name:""},r,t,"");{let i=t.name??"";return dC({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=K({token:n,providedIn:"any",factory:()=>P(GC)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var j2="ngOriginalError";function Dm(n){return n[j2]}var cr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Dm(e);for(;t&&Dm(t);)t=Dm(t);return t||null}},jb=new q("",{providedIn:"root",factory:()=>B(cr).handleError.bind(void 0)}),Vy=(()=>{class n{static{this.__NG_ELEMENT_ID__=$2}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gm=class extends Vy{constructor(e){super(),this._lView=e}onDestroy(e){return _b(this._lView,e),()=>c2(this._lView,e)}};function $2(){return new Gm(Me())}function q2(){return ph(cn(),Me())}function ph(n,e){return new vi(Dn(n,e))}var vi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=q2}}return n})();var Wm=class extends Ye{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ab()&&(this.destroyRef=B(Vy,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Cm(o),i&&(i=Cm(i)),s&&(s=Cm(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof tt&&e.add(a),a}};function Cm(n){return e=>{setTimeout(n,void 0,e)}}var lt=Wm;function $b(n){return(n.flags&128)===128}var qb=new Map,H2=0;function z2(){return H2++}function G2(n){qb.set(n[lh],n)}function W2(n){qb.delete(n[lh])}var hC="__ngContext__";function Do(n,e){mo(e)?(n[hC]=e[lh],G2(e)):n[hC]=e}function Hb(n){return Gb(n[Oc])}function zb(n){return Gb(n[kn])}function Gb(n){for(;n!==null&&!Vr(n);)n=n[kn];return n}var Km;function Wb(n){Km=n}function K2(){if(Km!==void 0)return Km;if(typeof document<"u")return document;throw new ee(210,!1)}var gh=new q("",{providedIn:"root",factory:()=>Q2}),Q2="ng",Ly=new q(""),bt=new q("",{providedIn:"platform",factory:()=>"unknown"});var By=new q("",{providedIn:"root",factory:()=>K2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Y2="h",X2="b";var J2=()=>null;function jy(n,e,t=!1){return J2(n,e,t)}var Kb=!1,Z2=new q("",{providedIn:"root",factory:()=>Kb});var Dd;function eU(){if(Dd===void 0&&(Dd=null,Et.trustedTypes))try{Dd=Et.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dd}function fC(n){return eU()?.createScriptURL(n)||n}var Hd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UC})`}};function Kc(n){return n instanceof Hd?n.changingThisBreaksApplicationSecurity:n}function $y(n,e){let t=tU(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${UC})`)}return t===e}function tU(n){return n instanceof Hd&&n.getTypeName()||null}var nU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qb(n){return n=String(n),n.match(nU)?n:"unsafe:"+n}var mh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(mh||{});function Qc(n){let e=Xb();return e?e.sanitize(mh.URL,n)||"":$y(n,"URL")?Kc(n):Qb(ih(n))}function rU(n){let e=Xb();if(e)return fC(e.sanitize(mh.RESOURCE_URL,n)||"");if($y(n,"ResourceURL"))return fC(Kc(n));throw new ee(904,!1)}function iU(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?rU:Qc}function Yb(n,e,t){return iU(e,t)(n)}function Xb(){let n=Me();return n&&n[Vn].sanitizer}function Jb(n){return n instanceof Function?n():n}function oU(n){return(n??B($n)).get(bt)==="browser"}var Ur=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ur||{}),sU;function qy(n,e){return sU(n,e)}function Ss(n,e,t,r,i){if(r!=null){let o,s=!1;Vr(r)?o=r:mo(r)&&(s=!0,r=r[Or]);let a=ar(r);n===0&&t!==null?i==null?rT(e,t,a):zd(e,t,a,i||null,!0):n===1&&t!==null?zd(e,t,a,i||null,!0):n===2?DU(e,a,s):n===3&&e.destroyNode(a),o!=null&&bU(e,n,o,t,i)}}function aU(n,e){return n.createText(e)}function cU(n,e,t){n.setValue(e,t)}function Zb(n,e,t){return n.createElement(e,t)}function uU(n,e){eT(n,e),e[Or]=null,e[jn]=null}function lU(n,e,t,r,i,o){r[Or]=i,r[jn]=e,yh(n,r,t,1,i,o)}function eT(n,e){e[Vn].changeDetectionScheduler?.notify(1),yh(n,e,e[dt],2,null,null)}function dU(n){let e=n[Oc];if(!e)return bm(n[ve],n);for(;e;){let t=null;if(mo(e))t=e[Oc];else{let r=e[In];r&&(t=r)}if(!t){for(;e&&!e[kn]&&e!==n;)mo(e)&&bm(e[ve],e),e=e[jt];e===null&&(e=n),mo(e)&&bm(e[ve],e),t=e&&e[kn]}e=t}}function hU(n,e,t,r){let i=In+r,o=t.length;r>0&&(t[i-1][kn]=e),r<o-In?(e[kn]=t[i],zC(t,In+r,e)):(t.push(e),e[kn]=null),e[jt]=t;let s=e[uh];s!==null&&t!==s&&fU(s,e);let a=e[ks];a!==null&&a.insertView(n),jm(e),e[se]|=128}function fU(n,e){let t=n[Vd],i=e[jt][jt][sr];e[sr]!==i&&(n[se]|=Ty.HasTransplantedViews),t===null?n[Vd]=[e]:t.push(e)}function tT(n,e){let t=n[Vd],r=t.indexOf(e);t.splice(r,1)}function Qm(n,e){if(n.length<=In)return;let t=In+e,r=n[t];if(r){let i=r[uh];i!==null&&i!==n&&tT(i,r),e>0&&(n[t-1][kn]=r[kn]);let o=Pd(n,In+e);uU(r[ve],r);let s=o[ks];s!==null&&s.detachView(o[ve]),r[jt]=null,r[kn]=null,r[se]&=-129}return r}function nT(n,e){if(!(e[se]&256)){let t=e[dt];t.destroyNode&&yh(n,e,t,3,null,null),dU(e)}}function bm(n,e){if(e[se]&256)return;let t=De(null);try{e[se]&=-129,e[se]|=256,e[_o]&&AD(e[_o]),gU(n,e),pU(n,e),e[ve].type===1&&e[dt].destroy();let r=e[uh];if(r!==null&&Vr(e[jt])){r!==e[jt]&&tT(r,e);let i=e[ks];i!==null&&i.detachView(n)}W2(e)}finally{De(t)}}function pU(n,e){let t=n.cleanup,r=e[kc];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[kc]=null);let i=e[di];if(i!==null){e[di]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function gU(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Io)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];rr(4,a,c);try{c.call(a)}finally{rr(5,a,c)}}else{rr(4,i,o);try{o.call(i)}finally{rr(5,i,o)}}}}}function mU(n,e,t){return yU(n,e.parent,t)}function yU(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Or];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===or.None||o===or.Emulated)return null}return Dn(r,t)}}function zd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function rT(n,e,t){n.appendChild(e,t)}function pC(n,e,t,r,i){r!==null?zd(n,e,t,r,i):rT(n,e,t)}function vU(n,e,t,r){n.removeChild(e,t,r)}function Hy(n,e){return n.parentNode(e)}function _U(n,e){return n.nextSibling(e)}function wU(n,e,t){return IU(n,e,t)}function EU(n,e,t){return n.type&40?Dn(n,t):null}var IU=EU,gC;function zy(n,e,t,r){let i=mU(n,r,e),o=e[dt],s=r.parent||e[jn],a=wU(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)pC(o,i,t[c],a,!1);else pC(o,i,t,a,!1);gC!==void 0&&gC(o,r,e,t,i)}function xd(n,e){if(e!==null){let t=e.type;if(t&3)return Dn(e,n);if(t&4)return Ym(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return xd(n,r);{let i=n[e.index];return Vr(i)?Ym(-1,i):ar(i)}}else{if(t&32)return qy(e,n)()||ar(n[e.index]);{let r=iT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Lc(n[sr]);return xd(i,r)}else return xd(n,e.next)}}}return null}function iT(n,e){if(e!==null){let r=n[sr][jn],i=e.projection;return r.projection[i]}return null}function Ym(n,e){let t=In+n+1;if(t<e.length){let r=e[t],i=r[ve].firstChild;if(i!==null)return xd(r,i)}return e[wo]}function DU(n,e,t){let r=Hy(n,e);r&&vU(n,r,e,t)}function Gy(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Do(ar(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Gy(n,e,t.child,r,i,o,!1),Ss(e,n,i,a,o);else if(c&32){let l=qy(t,r),d;for(;d=l();)Ss(e,n,i,d,o);Ss(e,n,i,a,o)}else c&16?CU(n,e,r,t,i,o):Ss(e,n,i,a,o);t=s?t.projectionNext:t.next}}function yh(n,e,t,r,i,o){Gy(t,r,n.firstChild,e,i,o,!1)}function CU(n,e,t,r,i,o){let s=t[sr],c=s[jn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ss(e,n,i,d,o)}else{let l=c,d=s[jt];$b(r)&&(l.flags|=128),Gy(n,e,l,d,i,o,!0)}}function bU(n,e,t,r,i){let o=t[wo],s=ar(t);o!==s&&Ss(e,n,r,o,i);for(let a=In;a<t.length;a++){let c=t[a];yh(c[ve],c,n,e,r,o)}}function TU(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ur.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ur.Important),n.setStyle(t,r,i,o))}}function AU(n,e,t){n.setAttribute(e,"style",t)}function oT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&km(n,e,r),i!==null&&oT(n,e,i),o!==null&&AU(n,e,o)}var _i={};function oe(n=1){aT(Jt(),Me(),$s()+n,!1)}function aT(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Sd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Md(e,o,0,t)}Eo(t)}function X(n,e=ge.Default){let t=Me();if(t===null)return P(n,e);let r=cn();return Ob(r,t,Yt(n),e)}function cT(){let n="invalid";throw new Error(n)}function uT(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Lt.SignalBased&&(a=e[r][Kg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Lt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):db(e,a,r,o)}finally{De(s)}}function SU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Eo(~i);else{let o=i,s=t[++r],a=t[++r];w2(s,o);let c=e[o];a(2,c)}}}finally{Eo(-1)}}function vh(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Or]=i,f[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(f[se]|=2048),vb(f),f[jt]=f[js]=n,f[On]=t,f[Vn]=s||n&&n[Vn],f[dt]=a||n&&n[dt],f[Us]=c||n&&n[Us]||null,f[jn]=o,f[lh]=z2(),f[kd]=d,f[cb]=l,f[sr]=e.type==2?n[sr]:f,f}function _h(n,e,t,r,i){let o=n.data[e];if(o===null)o=MU(n,e,t,r,i),_2()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=g2();o.injectorIndex=s===null?-1:s.injectorIndex}return Wc(o,!0),o}function MU(n,e,t,r,i){let o=Eb(),s=Ib(),a=s?o:o&&o.parent,c=n.data[e]=PU(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function lT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function dT(n,e,t,r,i){let o=$s(),s=r&2;try{Eo(-1),s&&e.length>Ln&&aT(n,e,Ln,!1),rr(s?2:0,i),t(r,i)}finally{Eo(o),rr(s?3:1,i)}}function hT(n,e,t){if(lb(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{De(r)}}}function fT(n,e,t){wb()&&(BU(n,e,t,Dn(t,e)),(t.flags&64)===64&&vT(n,e,t))}function pT(n,e,t=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function gT(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Wy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Wy(n,e,t,r,i,o,s,a,c,l,d){let f=Ln+r,g=f+i,y=xU(f,g),I=typeof l=="function"?l():l;return y[ve]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function xU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_i);return t}function FU(n,e,t,r){let o=r.get(Z2,Kb)||t===or.ShadowDom,s=n.selectRootElement(e,o);return RU(s),s}function RU(n){NU(n)}var NU=()=>null;function PU(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return h2()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mC(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Lt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?yC(r,t,l,a,c):yC(r,t,l,a)}return r}function yC(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function UU(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,I=g?g.outputs:null;c=mC(0,f.inputs,d,c,y),l=mC(1,f.outputs,d,l,I);let C=c!==null&&s!==null&&!Dy(e)?XU(c,d,s):null;a.push(C)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function kU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Ky(n,e,t,r,i,o,s,a){let c=Dn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Qy(n,t,d,r,i),dh(e)&&OU(t,e.index)):e.type&3?(r=kU(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function OU(n,e){let t=yi(e,n);t[se]&16||(t[se]|=64)}function mT(n,e,t,r){if(wb()){let i=r===null?null:{"":-1},o=$U(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&yT(n,e,t,s,i,a),i&&qU(t,r,i)}t.mergedAttrs=Pc(t.mergedAttrs,t.attrs)}function yT(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Hm(qd(t,e),n,r[l].type);zU(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=lT(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Pc(t.mergedAttrs,d.hostAttrs),GU(n,t,e,c,d),HU(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}UU(n,t,o)}function VU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;LU(s)!=a&&s.push(a),s.push(t,r,o)}}function LU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function BU(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;dh(t)&&WU(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qd(t,e),Do(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Os(e,n,a,t);if(Do(l,e),s!==null&&YU(e,a-i,l,c,t,s),fi(c)){let d=yi(t.index,e);d[On]=Os(e,n,a,t)}}}function vT(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=E2();try{Eo(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];$m(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&jU(c,l)}}finally{Eo(-1),$m(s)}}function jU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $U(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(SP(e,s.selectors,!1))if(r||(r=[]),fi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Xm(n,e,c)}else r.unshift(s),Xm(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qU(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function HU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;fi(e)&&(t[""]=n)}}function zU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function GU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=vo(i.type,!0)),s=new Io(o,fi(i),X);n.blueprint[r]=s,t[r]=s,VU(n,e,r,lT(n,t,i.hostVars,_i),i)}function WU(n,e,t){let r=Dn(e,n),i=gT(t),o=n[Vn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=wh(n,vh(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function KU(n,e,t,r,i,o){let s=Dn(n,e);QU(e[dt],s,o,n.value,t,r,i)}function QU(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?ih(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function YU(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],f=s[a++];uT(r,t,c,l,d,f)}}function XU(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function _T(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function wT(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Db(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function wh(n,e){return n[Oc]?n[sC][kn]=e:n[Oc]=e,n[sC]=e,e}function Jm(n,e,t){Db(0);let r=De(null);try{e(n,t)}finally{De(r)}}function JU(n){return n[kc]||(n[kc]=[])}function ZU(n){return n.cleanup||(n.cleanup=[])}function ET(n,e){let t=n[Us],r=t?t.get(cr,null):null;r&&r.handleError(e)}function Qy(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],d=n.data[s];uT(d,l,r,a,c,i)}}function ek(n,e,t){let r=gb(e,n);cU(n[dt],r,t)}function tk(n,e){let t=yi(e,n),r=t[ve];nk(r,t);let i=t[Or];i!==null&&t[kd]===null&&(t[kd]=jy(i,t[Us])),Yy(r,t,t[On])}function nk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Yy(n,e,t){Fy(e);try{let r=n.viewQuery;r!==null&&Jm(1,r,t);let i=n.template;i!==null&&dT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ks]?.finishViewCreation(n),n.staticContentQueries&&wT(n,e),n.staticViewQueries&&Jm(2,n.viewQuery,t);let o=n.components;o!==null&&rk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Ry()}}function rk(n,e){for(let t=0;t<e.length;t++)tk(n,e[t])}function ik(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[se]&4096?4096:16,c=vh(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[uh]=l;let d=n[ks];return d!==null&&(c[ks]=d.createEmbeddedView(o)),Yy(o,c,t),c}finally{De(i)}}function vC(n,e){return!e||e.firstChild===null||$b(n)}function ok(n,e,t,r=!0){let i=e[ve];if(hU(i,e,n,t),r){let s=Ym(t,n),a=e[dt],c=Hy(a,n[wo]);c!==null&&lU(i,n[jn],a,e,c,s)}let o=e[kd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Gd(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(ar(o)),Vr(o)&&sk(o,r);let s=t.type;if(s&8)Gd(n,e,t.child,r);else if(s&32){let a=qy(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=iT(e,t);if(Array.isArray(a))r.push(...a);else{let c=Lc(e[sr]);Gd(c[ve],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function sk(n,e){for(let t=In;t<n.length;t++){let r=n[t],i=r[ve].firstChild;i!==null&&Gd(r[ve],r,i,e)}n[wo]!==n[Or]&&e.push(n[wo])}var IT=[];function ak(n){return n[_o]??ck(n)}function ck(n){let e=IT.pop()??Object.create(lk);return e.lView=n,e}function uk(n){n.lView[_o]!==n&&(n.lView=null,IT.push(n))}var lk=Ie(W({},CD),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Vc(n.lView)},consumerOnSignalRead(){this.lView[_o]=this}}),DT=100;function CT(n,e=!0,t=0){let r=n[Vn],i=r.rendererFactory,o=!1;o||i.begin?.();try{dk(n,t)}catch(s){throw e&&ET(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function dk(n,e){Zm(n,e);let t=0;for(;My(n);){if(t===DT)throw new ee(103,!1);t++,Zm(n,1)}}function hk(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1;!o&&e[Vn].inlineEffectRunner?.flush(),Fy(e);let s=null,a=null;!o&&fk(n)&&(a=ak(e),s=bD(a));try{vb(e),y2(n.bindingStartIndex),t!==null&&dT(n,e,t,2,r);let c=(i&3)===3;if(!o)if(c){let f=n.preOrderCheckHooks;f!==null&&Sd(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Md(e,f,0,null),Em(e,0)}if(pk(e),bT(e,0),n.contentQueries!==null&&wT(n,e),!o)if(c){let f=n.contentCheckHooks;f!==null&&Sd(e,f)}else{let f=n.contentHooks;f!==null&&Md(e,f,1),Em(e,1)}SU(n,e);let l=n.components;l!==null&&AT(e,l,0);let d=n.viewQuery;if(d!==null&&Jm(2,d,r),!o)if(c){let f=n.viewCheckHooks;f!==null&&Sd(e,f)}else{let f=n.viewHooks;f!==null&&Md(e,f,2),Em(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wm]){for(let f of e[wm])f();e[wm]=null}o||(e[se]&=-73)}catch(c){throw Vc(e),c}finally{a!==null&&(TD(a,s),uk(a)),Ry()}}function fk(n){return n.type!==2}function bT(n,e){for(let t=Hb(n);t!==null;t=zb(t))for(let r=In;r<t.length;r++){let i=t[r];TT(i,e)}}function pk(n){for(let e=Hb(n);e!==null;e=zb(e)){if(!(e[se]&Ty.HasTransplantedViews))continue;let t=e[Vd];for(let r=0;r<t.length;r++){let i=t[r],o=i[jt];s2(i)}}}function gk(n,e,t){let r=yi(e,n);TT(r,t)}function TT(n,e){Sy(n)&&Zm(n,e)}function Zm(n,e){let r=n[ve],i=n[se],o=n[_o],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Qg(o)),o&&(o.dirty=!1),n[se]&=-9217,s)hk(r,n,r.template,n[On]);else if(i&8192){bT(n,1);let a=r.components;a!==null&&AT(n,a,1)}}function AT(n,e,t){for(let r=0;r<e.length;r++)gk(n,e[r],t)}function Xy(n){for(n[Vn].changeDetectionScheduler?.notify();n;){n[se]|=64;let e=Lc(n);if(XP(n)&&!e)return n;n=e}return null}var Co=class{get rootNodes(){let e=this._lView,t=e[ve];return Gd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[jt];if(Vr(e)){let t=e[Od],r=t?t.indexOf(this):-1;r>-1&&(Qm(e,r),Pd(t,r))}this._attachedToViewContainer=!1}nT(this._lView[ve],this._lView)}onDestroy(e){_b(this._lView,e)}markForCheck(){Xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[se]&=-129}reattach(){jm(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,CT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eT(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e,jm(this._lView)}},Eh=(()=>{class n{static{this.__NG_ELEMENT_ID__=vk}}return n})(),mk=Eh,yk=class extends mk{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ik(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Co(i)}};function vk(){return _k(cn(),Me())}function _k(n,e){return n.type&4?new yk(e,n,ph(n,e)):null}var nW=new RegExp(`^(\\d+)*(${X2}|${Y2})*(.*)`);var wk=()=>null;function _C(n,e){return wk(n,e)}var Wd=class{},ey=class{},Kd=class{};function Ek(n){let e=Error(`No component factory found for ${Xt(n)}.`);return e[Ik]=n,e}var Ik="ngComponent";var ty=class{resolveComponentFactory(e){throw Ek(e)}},Ih=(()=>{class n{static{this.NULL=new ty}}return n})(),Bc=class{},Ao=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Dk()}}return n})();function Dk(){let n=Me(),e=cn(),t=yi(e.index,n);return(mo(t)?t:n)[dt]}var Ck=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>null})}}return n})(),Tm={};var wC=new Set;function Dh(n){wC.has(n)||(wC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function EC(...n){}function bk(){let n=typeof Et.requestAnimationFrame=="function",e=Et[n?"requestAnimationFrame":"setTimeout"],t=Et[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var me=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=bk().nativeRequestAnimationFrame,Sk(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Tk,EC,EC);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Tk={};function Jy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ak(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Et,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ny(n),n.isCheckStableRunning=!0,Jy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ny(n))}function Sk(n){let e=()=>{Ak(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(Mk(a))return t.invokeTask(i,o,s,a);try{return IC(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),DC(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return IC(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),DC(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ny(n),Jy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ny(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function IC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function DC(n){n._nesting--,Jy(n)}var ry=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Mk(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}function xk(n="zone.js",e){return n==="noop"?new ry:n==="zone.js"?new me(e):n}var Ms=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ms||{}),Fk={destroy(){}};function Ch(n,e){!e&&KP(Ch);let t=e?.injector??B($n);if(!oU(t))return Fk;Dh("NgAfterNextRender");let r=t.get(Zy),i=r.handler??=new oy,o=e?.phase??Ms.MixedReadWrite,s=()=>{i.unregister(c),a()},a=t.get(Vy).onDestroy(s),c=Bn(t,()=>new iy(o,()=>{s(),n()}));return i.register(c),{destroy:s}}var iy=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=B(me),this.errorHandler=B(cr,{optional:!0}),B(Wd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},oy=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ms.EarlyRead]:new Set,[Ms.Write]:new Set,[Ms.MixedReadWrite]:new Set,[Ms.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Zy=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})();function sy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=YD(i,a);else if(o==2){let c=a,l=e[++s];r=YD(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Qd=class extends Ih{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hi(e);return new Vs(t,this.ngModule)}};function CC(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function Rk(n){let e=n.toLowerCase();return e==="svg"?t2:e==="math"?n2:null}var ay=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=oh(r);let i=this.injector.get(e,Tm,r);return i!==Tm||t===Tm?i:this.parentInjector.get(e,t,r)}},Vs=class extends Kd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=CC(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return CC(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ay(e,s):e,c=a.get(Bc,null);if(c===null)throw new ee(407,!1);let l=a.get(Ck,null),d=a.get(Zy,null),f=a.get(Wd,null),g={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=c.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",C=r?FU(y,r,this.componentDef.encapsulation,a):Zb(y,I,Rk(I)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let U=null;C!==null&&(U=jy(C,a,!0));let H=Wy(0,null,null,1,0,null,null,null,null,null,null),N=vh(null,H,null,b,null,null,g,y,a,null,U);Fy(N);let j,re;try{let Y=this.componentDef,E,v=null;Y.findHostDirectiveDefs?(E=[],v=new Map,Y.findHostDirectiveDefs(Y,E,v),E.push(Y)):E=[Y];let _=Nk(N,C),D=Pk(_,C,Y,E,N,g,y);re=mb(H,Ln),C&&Ok(y,Y,C,r),t!==void 0&&Vk(re,this.ngContentSelectors,t),j=kk(D,Y,E,v,N,[Lk]),Yy(H,N,null)}finally{Ry()}return new cy(this.componentType,j,ph(re,N),N,re)}finally{De(o)}}},cy=class extends ey{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Co(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Qy(o[ve],o,i,e,t),this.previousInputValues.set(e,t);let s=yi(this._tNode.index,o);Xy(s)}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Nk(n,e){let t=n[ve],r=Ln;return n[r]=e,_h(t,r,2,"#host",null)}function Pk(n,e,t,r,i,o,s){let a=i[ve];Uk(r,n,e,s);let c=null;e!==null&&(c=jy(e,i[Us]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=vh(i,gT(t),null,d,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Xm(a,n,r.length-1),wh(i,f),i[n.index]=f}function Uk(n,e,t,r){for(let i of n)e.mergedAttrs=Pc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(sy(e,e.mergedAttrs,!0),t!==null&&sT(r,t,e))}function kk(n,e,t,r,i,o){let s=cn(),a=i[ve],c=Dn(s,i);yT(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Os(i,a,f,s);Do(g,i)}vT(a,i,s),c&&Do(c,i);let l=Os(i,a,s.directiveStart+s.componentOffset,s);if(n[On]=i[On]=l,o!==null)for(let d of o)d(l,e);return hT(a,s,i),l}function Ok(n,e,t,r){if(r)km(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=NP(e.selectors[0]);i&&km(n,t,i),o&&o.length>0&&oT(n,t,o.join(" "))}}function Vk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function Lk(){let n=cn();Uy(Me()[ve],n)}var Hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=Bk}}return n})();function Bk(){let n=cn();return $k(n,Me())}var jk=Hs,ST=class extends jk{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ph(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){let e=ky(this._hostTNode,this._hostLView);if(Fb(e)){let t=jd(e,this._hostLView),r=Bd(e),i=t[ve].data[r+8];return new yo(i,t)}else return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=bC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-In}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_C(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,vC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!YP(e),a;if(s)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new Vs(hi(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let C=(s?l:this.parentInjector).get(Bt,null);C&&(o=C)}let d=hi(c.componentType??{}),f=_C(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,o);return this.insertImpl(y.hostView,a,vC(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(o2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[jt],l=new ST(c,c[jn],c[jt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ok(s,i,o,r),e.attachToViewContainerRef(),zC(Am(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=bC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Qm(this._lContainer,t);r&&(Pd(Am(this._lContainer),t),nT(r[ve],r))}detach(e){let t=this._adjustIndex(e,-1),r=Qm(this._lContainer,t);return r&&Pd(Am(this._lContainer),t)!=null?new Co(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function bC(n){return n[Od]}function Am(n){return n[Od]||(n[Od]=[])}function $k(n,e){let t,r=e[n.index];return Vr(r)?t=r:(t=_T(r,e,null,n),e[n.index]=t,wh(e,t)),Hk(t,e,n,r),new ST(t,n,e)}function qk(n,e){let t=n[dt],r=t.createComment(""),i=Dn(e,n),o=Hy(t,i);return zd(t,o,r,_U(t,i),!1),r}var Hk=Wk,zk=()=>!1;function Gk(n,e,t){return zk(n,e,t)}function Wk(n,e,t,r){if(n[wo])return;let i;t.type&8?i=ar(r):i=qk(e,t),n[wo]=i}function Kk(n){return typeof n=="function"&&n[Kg]!==void 0}function MT(n){return Kk(n)&&typeof n.set=="function"}function Qk(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(Zk))}return o}return Yd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>eO(o));e.push(c)}),Xk(),Promise.all(e).then(()=>{})}var Yd=new Map,Yk=new Set;function Xk(){let n=Yd;return Yd=new Map,n}function Jk(){return Yd.size===0}function Zk(n){return typeof n=="string"?n:n.text()}function eO(n){Yk.delete(n)}function tO(n){return Object.getPrototypeOf(n.prototype).constructor}function Lr(n){let e=tO(n.type),t=!0,r=[n];for(;e;){let i;if(fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Cd(n.inputs),s.inputTransforms=Cd(n.inputTransforms),s.declaredInputs=Cd(n.declaredInputs),s.outputs=Cd(n.outputs);let a=i.hostBindings;a&&sO(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&iO(n,c),l&&oO(n,l),nO(n,i),eP(n.outputs,i.outputs),fi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Lr&&(t=!1)}}e=Object.getPrototypeOf(e)}rO(r)}function nO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function rO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pc(i.hostAttrs,t=Pc(t,i.hostAttrs))}}function Cd(n){return n===Rs?{}:n===En?[]:n}function iO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function oO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function sO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function e0(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var pi=class{},jc=class{};var Xd=class extends pi{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Qd(this);let i=eb(e);this._bootstrapComponents=Jb(i.bootstrap),this._r3Injector=Bb(e,t,[{provide:pi,useValue:this},{provide:Ih,useValue:this.componentFactoryResolver},...r],Xt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jd=class extends jc{constructor(e){super(),this.moduleType=e}create(e){return new Xd(this.moduleType,e,[])}};function aO(n,e,t){return new Xd(n,e,t)}var uy=class extends pi{constructor(e){super(),this.componentFactoryResolver=new Qd(this),this.instance=null;let t=new Uc([...e.providers,{provide:pi,useValue:this},{provide:Ih,useValue:this.componentFactoryResolver}],e.parent||by(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bh(n,e,t=null){return new uy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var So=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new St(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xT(n){return uO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function cO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function uO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function FT(n,e,t){return n[e]=t}function gi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function lO(n,e,t,r){let i=gi(n,e,t);return gi(n,e+1,r)||i}function dO(n){return(n.flags&32)===32}function hO(n,e,t,r,i,o,s,a,c){let l=e.consts,d=_h(e,n,4,s||null,Ld(l,a));mT(e,t,d,Ld(l,c)),Uy(e,d);let f=d.tView=Wy(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function hn(n,e,t,r,i,o,s,a){let c=Me(),l=Jt(),d=n+Ln,f=l.firstCreatePass?hO(d,l,c,e,t,r,i,o,s):l.data[d];Wc(f,!1);let g=fO(l,c,f,n);Ny()&&zy(l,c,g,f),Do(g,c);let y=_T(g,c,g,f);return c[d]=y,wh(c,y),Gk(y,f,c),Ay(f)&&fT(l,c,f),s!=null&&pT(c,f,a),hn}var fO=pO;function pO(n,e,t,r){return Py(!0),e[dt].createComment("")}function Yc(n,e,t,r){let i=Me(),o=hh();if(gi(i,o,e)){let s=Jt(),a=fh();KU(a,i,n,e,t,r)}return Yc}function RT(n,e,t,r){return gi(n,hh(),t)?e+ih(t)+r:_i}function bd(n,e){return n<<17|e<<2}function bo(n){return n>>17&32767}function gO(n){return(n&2)==2}function mO(n,e){return n&131071|e<<17}function ly(n){return n|2}function Ls(n){return(n&131068)>>2}function Sm(n,e){return n&-131069|e<<2}function yO(n){return(n&1)===1}function dy(n){return n|1}function vO(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=bo(s),c=Ls(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Hc(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=bo(n[a+1]);n[r+1]=bd(g,a),g!==0&&(n[g+1]=Sm(n[g+1],r)),n[a+1]=mO(n[a+1],r)}else n[r+1]=bd(a,0),a!==0&&(n[a+1]=Sm(n[a+1],r)),a=r;else n[r+1]=bd(c,0),a===0?a=r:n[c+1]=Sm(n[c+1],r),c=r;l&&(n[r+1]=ly(n[r+1])),TC(n,d,r,!0),TC(n,d,r,!1),_O(e,d,n,r,o),s=bd(a,c),o?e.classBindings=s:e.styleBindings=s}function _O(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Hc(o,e)>=0&&(t[r+1]=dy(t[r+1]))}function TC(n,e,t,r){let i=n[t+1],o=e===null,s=r?bo(i):Ls(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];wO(c,e)&&(a=!0,n[s+1]=r?dy(l):ly(l)),s=r?bo(l):Ls(l)}a&&(n[t+1]=r?ly(i):dy(i))}function wO(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Hc(n,e)>=0:!1}function Ze(n,e,t){let r=Me(),i=hh();if(gi(r,i,e)){let o=Jt(),s=fh();Ky(o,s,r,n,e,r[dt],t,!1)}return Ze}function AC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Qy(n,t,o[s],s,r)}function Th(n,e){return EO(n,e,null,!0),Th}function EO(n,e,t,r){let i=Me(),o=Jt(),s=v2(2);if(o.firstUpdatePass&&DO(o,n,s,r),e!==_i&&gi(i,s,e)){let a=o.data[$s()];SO(o,a,i,i[dt],n,i[s+1]=MO(e,t),r,s)}}function IO(n,e){return e>=n.expandoStartIndex}function DO(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[$s()],s=IO(n,t);xO(o,r)&&e===null&&!s&&(e=!1),e=CO(i,o,e,r),vO(i,o,e,t,s,r)}}function CO(n,e,t,r){let i=I2(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Mm(null,n,e,t,r),t=$c(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Mm(i,n,e,t,r),o===null){let c=bO(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Mm(null,n,e,c[1],r),c=$c(c,e.attrs,r),TO(n,e,r,c))}else o=AO(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function bO(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ls(r)!==0)return n[bo(r)]}function TO(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[bo(i)]=r}function AO(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=$c(r,s,t)}return $c(r,e.attrs,t)}function Mm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=$c(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function $c(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),wP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function SO(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=yO(l)?SC(c,e,t,i,Ls(l),s):void 0;if(!Zd(d)){Zd(o)||gO(l)&&(o=SC(c,null,t,i,a,s));let f=gb($s(),t);TU(r,s,f,i,o)}}function SC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===_i&&(g=f?En:void 0);let y=f?vm(g,r):d===r?g:void 0;if(l&&!Zd(y)&&(y=vm(c,r)),Zd(y)&&(a=y,s))return a;let I=n[i+1];i=s?bo(I):Ls(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=vm(c,r))}return a}function Zd(n){return n!==void 0}function MO(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Xt(Kc(n)))),n}function xO(n,e){return(n.flags&(e?8:16))!==0}function FO(n,e,t,r,i,o){let s=e.consts,a=Ld(s,i),c=_h(e,n,2,r,a);return mT(e,t,c,Ld(s,o)),c.attrs!==null&&sy(c,c.attrs,!1),c.mergedAttrs!==null&&sy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function V(n,e,t,r){let i=Me(),o=Jt(),s=Ln+n,a=i[dt],c=o.firstCreatePass?FO(s,o,i,e,t,r):o.data[s],l=RO(o,i,c,a,e,n);i[s]=l;let d=Ay(c);return Wc(c,!0),sT(a,l,c),!dO(c)&&Ny()&&zy(o,i,l,c),u2()===0&&Do(l,i),l2(),d&&(fT(o,i,c),hT(o,c,i)),r!==null&&pT(i,c),V}function L(){let n=cn();Ib()?m2():(n=n.parent,Wc(n,!1));let e=n;f2(e)&&p2(),d2();let t=Jt();return t.firstCreatePass&&(Uy(t,n),lb(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&M2(e)&&AC(t,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&x2(e)&&AC(t,e,Me(),e.stylesWithoutHost,!1),L}function qn(n,e,t,r){return V(n,e,t,r),L(),qn}var RO=(n,e,t,r,i,o)=>(Py(!0),Zb(r,i,b2()));function Ah(){return Me()}var go=void 0;function NO(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var PO=["en",[["a","p"],["AM","PM"],go],[["AM","PM"],go,go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",go,"{1} 'at' {0}",go],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",NO],xm={};function Cn(n){let e=UO(n),t=MC(e);if(t)return t;let r=e.split("-")[0];if(t=MC(r),t)return t;if(r==="en")return PO;throw new ee(701,!1)}function MC(n){return n in xm||(xm[n]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[n]),xm[n]}var rt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(rt||{});function UO(n){return n.toLowerCase().replace(/_/g,"-")}var eh="en-US";var kO=eh;function OO(n){typeof n=="string"&&(kO=n.toLowerCase().replace(/_/g,"-"))}function it(n,e,t,r){let i=Me(),o=Jt(),s=cn();return NT(o,i,i[dt],s,n,e,r),it}function VO(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[kc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function NT(n,e,t,r,i,o,s){let a=Ay(r),l=n.firstCreatePass&&ZU(n),d=e[On],f=JU(e),g=!0;if(r.type&3||s){let C=Dn(r,e),b=s?s(C):C,U=f.length,H=s?j=>s(ar(j[r.index])):r.index,N=null;if(!s&&a&&(N=VO(n,e,i,r.index)),N!==null){let j=N.__ngLastListenerFn__||N;j.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,g=!1}else{o=FC(r,e,d,o,!1);let j=t.listen(b,i,o);f.push(o,j),l&&l.push(i,H,U,U+1)}}else o=FC(r,e,d,o,!1);let y=r.outputs,I;if(g&&y!==null&&(I=y[i])){let C=I.length;if(C)for(let b=0;b<C;b+=2){let U=I[b],H=I[b+1],re=e[U][H].subscribe(o),Y=f.length;f.push(o,re),l&&l.push(i,r.index,Y,-(Y+1))}}}function xC(n,e,t,r){let i=De(null);try{return rr(6,e,t),t(r)!==!1}catch(o){return ET(n,o),!1}finally{rr(7,e,t),De(i)}}function FC(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?yi(n.index,e):e;Xy(a);let c=xC(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)c=xC(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function fn(n=1){return C2(n)}function t0(n,e,t){return Sh(n,"",e,"",t),t0}function Sh(n,e,t,r,i){let o=Me(),s=RT(o,e,t,r);if(s!==_i){let a=Jt(),c=fh();Ky(a,c,o,n,s,o[dt],i,!1)}return Sh}function LO(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function J(n,e=""){let t=Me(),r=Jt(),i=n+Ln,o=r.firstCreatePass?_h(r,i,1,e,null):r.data[i],s=BO(r,t,o,e,n);t[i]=s,Ny()&&zy(r,t,s,o),Wc(o,!1)}var BO=(n,e,t,r,i)=>(Py(!0),aU(e[dt],r));function Mo(n){return Zt("",n,""),Mo}function Zt(n,e,t){let r=Me(),i=RT(r,n,e,t);return i!==_i&&ek(r,$s(),i),Zt}function ht(n,e,t){MT(e)&&(e=e());let r=Me(),i=hh();if(gi(r,i,e)){let o=Jt(),s=fh();Ky(o,s,r,n,e,r[dt],t,!1)}return ht}function It(n,e){let t=MT(n);return t&&n.set(e),t}function ft(n,e){let t=Me(),r=Jt(),i=cn();return NT(r,t,t[dt],i,n,e),ft}function jO(n,e,t){let r=Jt();if(r.firstCreatePass){let i=fi(n);hy(t,r.data,r.blueprint,i,!0),hy(e,r.data,r.blueprint,i,!1)}}function hy(n,e,t,r,i){if(n=Yt(n),Array.isArray(n))for(let o=0;o<n.length;o++)hy(n[o],e,t,r,i);else{let o=Jt(),s=Me(),a=cn(),c=Ps(n)?n:Yt(n.provide),l=sb(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ps(n)||!n.multi){let y=new Io(l,i,X),I=Rm(c,e,i?d:d+g,f);I===-1?(Hm(qd(a,s),o,c),Fm(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=Rm(c,e,d+g,f),I=Rm(c,e,d,d+g),C=y>=0&&t[y],b=I>=0&&t[I];if(i&&!b||!i&&!C){Hm(qd(a,s),o,c);let U=HO(i?qO:$O,t.length,i,r,l);!i&&b&&(t[I].providerFactory=U),Fm(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(U),s.push(U)}else{let U=PT(t[i?I:y],l,!i&&r);Fm(o,n,y>-1?y:I,U)}!i&&r&&b&&t[I].componentProviders++}}}function Fm(n,e,t,r){let i=Ps(e),o=jP(e);if(i||o){let c=(o?Yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function PT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Rm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $O(n,e,t,r){return fy(this.multi,[])}function qO(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Os(t,t[ve],this.providerFactory.index,r);o=a.slice(0,s),fy(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],fy(i,o);return o}function fy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function HO(n,e,t,r,i){let o=new Io(n,t,X);return o.multi=[],o.index=e,o.componentProviders=0,PT(o,i,r&&!t),o}function Xc(n,e=[]){return t=>{t.providersResolver=(r,i)=>jO(r,i?i(n):n,e)}}var zO=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rb(!1,t.type),i=r.length>0?bh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(P(Bt))})}}return n})();function UT(n){Dh("NgStandalone"),n.getStandaloneInjector=e=>e.get(zO).getOrCreateStandaloneInjector(n)}function kT(n,e,t,r){return VT(Me(),xy(),n,e,t,r)}function OT(n,e){let t=n[e];return t===_i?void 0:t}function VT(n,e,t,r,i,o){let s=e+t;return gi(n,s,i)?FT(n,s+1,o?r.call(o,i):r(i)):OT(n,s+1)}function GO(n,e,t,r,i,o,s){let a=e+t;return lO(n,a,i,o)?FT(n,a+2,s?r.call(s,i,o):r(i,o)):OT(n,a+2)}function Mh(n,e){let t=Jt(),r,i=n+Ln;t.firstCreatePass?(r=WO(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=vo(r.type,!0)),s,a=an(X);try{let c=$d(!1),l=o();return $d(c),LO(t,Me(),i,l),l}finally{an(a)}}function WO(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function LT(n,e,t){let r=n+Ln,i=Me(),o=yb(i,r);return jT(i,r)?VT(i,xy(),e,o.transform,t,o):o.transform(t)}function BT(n,e,t,r){let i=n+Ln,o=Me(),s=yb(o,i);return jT(o,i)?GO(o,xy(),e,s.transform,t,r,s):s.transform(t,r)}function jT(n,e){return n[ve].data[e].pure}var Td=null;function KO(n){Td!==null&&(n.defaultEncapsulation!==Td.defaultEncapsulation||n.preserveWhitespaces!==Td.preserveWhitespaces)||(Td=n)}var kr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$T=new kr("17.3.12"),xh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var n0=new q(""),Jc=new q(""),Fh=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,r0||(QO(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(P(me),P(Rh),P(Jc))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Rh=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return r0?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function QO(n){r0=n}var r0;function wi(n){return!!n&&typeof n.then=="function"}function i0(n){return!!n&&typeof n.subscribe=="function"}var Nh=new q(""),qT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(Nh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(wi(o))t.push(o);else if(i0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ph=new q("");function YO(){SD(()=>{throw new ee(600,!1)})}function XO(n){return n.isBoundToModule}function JO(n,e,t){try{let r=t();return wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function HT(n,e){return Array.isArray(e)?e.reduce(HT,n):W(W({},n),e)}var xo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(jb),this.afterRenderEffectManager=B(Zy),this.externalTestViews=new Set,this.beforeRender=new Ye,this.afterTick=new Ye,this.componentTypes=[],this.components=[],this.isStable=B(So).hasPendingTasks.pipe(Z(t=>!t)),this._injector=B(Bt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Kd;if(!this._injector.get(qT).done){let g=!i&&ZC(t),y=!1;throw new ee(405,y)}let s;i?s=t:s=this._injector.get(Ih).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=XO(s)?void 0:this._injector.get(pi),c=r||s.selector,l=s.create($n.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(n0,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Fd(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ee(101,!1);let r=De(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,De(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===DT)throw new ee(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)ZO(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>py(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>py(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Fd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ph,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZO(n,e,t){!e&&!py(n)||eV(n,t,e)}function py(n){return My(n)}function eV(n,e,t){let r;t?(r=0,n[se]|=1024):n[se]&64?r=0:r=1,CT(n,e,r)}var gy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uh=(()=>{class n{compileModuleSync(t){return new Jd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=eb(t),o=Jb(i.declarations).reduce((s,a)=>{let c=hi(a);return c&&s.push(new Vs(c)),s},[]);return new gy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tV=new q("");function nV(n,e,t){let r=new Jd(t);return Promise.resolve(r)}function RC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var rV=(()=>{class n{constructor(){this.zone=B(me),this.applicationRef=B(xo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iV(n){return[{provide:me,useFactory:n},{provide:Ns,multi:!0,useFactory:()=>{let e=B(rV,{optional:!0});return()=>e.initialize()}},{provide:Ns,multi:!0,useFactory:()=>{let e=B(aV);return()=>{e.initialize()}}},{provide:jb,useFactory:oV}]}function oV(){let n=B(me),e=B(cr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function sV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aV=(()=>{class n{constructor(){this.subscription=new tt,this.initialized=!1,this.zone=B(me),this.pendingTasks=B(So)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cV(){return typeof $localize<"u"&&$localize.locale||eh}var kh=new q("",{providedIn:"root",factory:()=>B(kh,ge.Optional|ge.SkipSelf)||cV()});var zT=new q(""),GT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=xk(r?.ngZone,sV({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{let o=aO(t.moduleType,this.injector,iV(()=>i)),s=o.injector.get(cr,null);return i.runOutsideAngular(()=>{let a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{Fd(this._modules,o),a.unsubscribe()})}),JO(s,i,()=>{let a=o.injector.get(qT);return a.runInitializers(),a.donePromise.then(()=>{let c=o.injector.get(kh,eh);return OO(c||eh),this._moduleDoBootstrap(o),o})})})}bootstrapModule(t,r=[]){let i=HT({},r);return nV(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){let r=t.injector.get(xo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new ee(-403,!1);this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(zT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(P($n))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Rc=null,WT=new q("");function uV(n){if(Rc&&!Rc.get(WT,!1))throw new ee(400,!1);YO(),Rc=n;let e=n.get(GT);return hV(n),e}function o0(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(o=[])=>{let s=KT();if(!s||s.injector.get(WT,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):uV(lV(a,r))}return dV(i)}}function lV(n=[],e){return $n.create({name:e,providers:[{provide:ch,useValue:"platform"},{provide:zT,useValue:new Set([()=>Rc=null])},...n]})}function dV(n){let e=KT();if(!e)throw new ee(401,!1);return e}function KT(){return Rc?.get(GT)??null}function hV(n){n.get(Ly,null)?.forEach(t=>t())}function s0(){return!1}var Br=(()=>{class n{static{this.__NG_ELEMENT_ID__=fV}}return n})();function fV(n){return pV(cn(),Me(),(n&16)===16)}function pV(n,e,t){if(dh(n)&&!t){let r=yi(n.index,e);return new Co(r,r)}else if(n.type&47){let r=e[sr];return new Co(r,e)}return null}var my=class{constructor(){}supports(e){return xT(e)}create(e){return new yy(e)}},gV=(n,e)=>e,yy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<NC(r,i,o)?t:r,a=NC(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;d<=I&&I<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xT(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,cO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new vy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new th),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new th),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},_y=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},th=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new _y,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function NC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function PC(){return new a0([new my])}var a0=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:PC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PC()),deps:[[n,new Ey,new Bs]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();var QT=o0(null,"core",[]),YT=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(P(xo))}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({})}}return n})();function Ei(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function c0(n){let e=De(null);try{return n()}finally{De(e)}}function XT(n){let e=hi(n);if(!e)return null;let t=new Vs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var rA=null;function ur(){return rA}function iA(n){rA??=n}var zh=class{};var $t=new q(""),v0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(mV),providedIn:"platform"})}}return n})(),oA=new q(""),mV=(()=>{class n extends v0{constructor(){super(),this._doc=B($t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ur().getBaseHref(this._doc)}onPopState(t){let r=ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ur().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function _0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function JT(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function $r(n){return n&&n[0]!=="?"?"?"+n:n}var Hr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(w0),providedIn:"root"})}}return n})(),sA=new q(""),w0=(()=>{class n extends Hr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B($t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+$r(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+$r(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+$r(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(P(v0),P(sA,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aA=(()=>{class n extends Hr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=_0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+$r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+$r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(P(v0),P(sA,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Gs=(()=>{class n{constructor(t){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=_V(JT(ZT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$r(r))}normalize(t){return n.stripTrailingSlash(vV(this._basePath,ZT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=$r}static{this.joinWithSlash=_0}static{this.stripTrailingSlash=JT}static{this.\u0275fac=function(r){return new(r||n)(P(Hr))}}static{this.\u0275prov=K({token:n,factory:()=>yV(),providedIn:"root"})}}return n})();function yV(){return new Gs(P(Hr))}function vV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function ZT(n){return n.replace(/\/index.html$/,"")}function _V(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var en=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(en||{}),ke=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ke||{}),pn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(pn||{}),Ii={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function wV(n){return Cn(n)[rt.LocaleId]}function EV(n,e,t){let r=Cn(n),i=[r[rt.DayPeriodsFormat],r[rt.DayPeriodsStandalone]],o=bn(i,e);return bn(o,t)}function IV(n,e,t){let r=Cn(n),i=[r[rt.DaysFormat],r[rt.DaysStandalone]],o=bn(i,e);return bn(o,t)}function DV(n,e,t){let r=Cn(n),i=[r[rt.MonthsFormat],r[rt.MonthsStandalone]],o=bn(i,e);return bn(o,t)}function CV(n,e){let r=Cn(n)[rt.Eras];return bn(r,e)}function Oh(n,e){let t=Cn(n);return bn(t[rt.DateFormat],e)}function Vh(n,e){let t=Cn(n);return bn(t[rt.TimeFormat],e)}function Lh(n,e){let r=Cn(n)[rt.DateTimeFormat];return bn(r,e)}function Wh(n,e){let t=Cn(n),r=t[rt.NumberSymbols][e];if(typeof r>"u"){if(e===Ii.CurrencyDecimal)return t[rt.NumberSymbols][Ii.Decimal];if(e===Ii.CurrencyGroup)return t[rt.NumberSymbols][Ii.Group]}return r}function cA(n){if(!n[rt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[rt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bV(n){let e=Cn(n);return cA(e),(e[rt.ExtraData][2]||[]).map(r=>typeof r=="string"?u0(r):[u0(r[0]),u0(r[1])])}function TV(n,e,t){let r=Cn(n);cA(r);let i=[r[rt.ExtraData][0],r[rt.ExtraData][1]],o=bn(i,e)||[];return bn(o,t)||[]}function bn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function u0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var AV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Bh={},SV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,qr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(qr||{}),Se=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Se||{}),Ae=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Ae||{});function MV(n,e,t,r){let i=VV(n);e=jr(t,e)||e;let s=[],a;for(;e;)if(a=SV.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=lA(r,c),i=OV(i,r,!0));let l="";return s.forEach(d=>{let f=UV(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Gh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function jr(n,e){let t=wV(n);if(Bh[t]??={},Bh[t][e])return Bh[t][e];let r="";switch(e){case"shortDate":r=Oh(n,pn.Short);break;case"mediumDate":r=Oh(n,pn.Medium);break;case"longDate":r=Oh(n,pn.Long);break;case"fullDate":r=Oh(n,pn.Full);break;case"shortTime":r=Vh(n,pn.Short);break;case"mediumTime":r=Vh(n,pn.Medium);break;case"longTime":r=Vh(n,pn.Long);break;case"fullTime":r=Vh(n,pn.Full);break;case"short":let i=jr(n,"shortTime"),o=jr(n,"shortDate");r=jh(Lh(n,pn.Short),[i,o]);break;case"medium":let s=jr(n,"mediumTime"),a=jr(n,"mediumDate");r=jh(Lh(n,pn.Medium),[s,a]);break;case"long":let c=jr(n,"longTime"),l=jr(n,"longDate");r=jh(Lh(n,pn.Long),[c,l]);break;case"full":let d=jr(n,"fullTime"),f=jr(n,"fullDate");r=jh(Lh(n,pn.Full),[d,f]);break}return r&&(Bh[t][e]=r),r}function jh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Hn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function xV(n,e){return Hn(n,3).substring(0,e)}function pt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=FV(n,o);if((t>0||a>-t)&&(a+=t),n===Se.Hours)a===0&&t===-12&&(a=12);else if(n===Se.FractionalSeconds)return xV(a,e);let c=Wh(s,Ii.MinusSign);return Hn(a,e,c,r,i)}}function FV(n,e){switch(n){case Se.FullYear:return e.getFullYear();case Se.Month:return e.getMonth();case Se.Date:return e.getDate();case Se.Hours:return e.getHours();case Se.Minutes:return e.getMinutes();case Se.Seconds:return e.getSeconds();case Se.FractionalSeconds:return e.getMilliseconds();case Se.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ve(n,e,t=en.Format,r=!1){return function(i,o){return RV(i,o,n,e,t,r)}}function RV(n,e,t,r,i,o){switch(t){case Ae.Months:return DV(e,i,r)[n.getMonth()];case Ae.Days:return IV(e,i,r)[n.getDay()];case Ae.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=bV(e),d=TV(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,I]=g,C=s>=y.hours&&a>=y.minutes,b=s<I.hours||s===I.hours&&a<I.minutes;if(y.hours<I.hours){if(C&&b)return!0}else if(C||b)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return EV(e,i,r)[s<12?0:1];case Ae.Eras:return CV(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function $h(n){return function(e,t,r){let i=-1*r,o=Wh(t,Ii.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case qr.Short:return(i>=0?"+":"")+Hn(s,2,o)+Hn(Math.abs(i%60),2,o);case qr.ShortGMT:return"GMT"+(i>=0?"+":"")+Hn(s,1,o);case qr.Long:return"GMT"+(i>=0?"+":"")+Hn(s,2,o)+":"+Hn(Math.abs(i%60),2,o);case qr.Extended:return r===0?"Z":(i>=0?"+":"")+Hn(s,2,o)+":"+Hn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var NV=0,Hh=4;function PV(n){let e=Gh(n,NV,1).getDay();return Gh(n,0,1+(e<=Hh?Hh:Hh+7)-e)}function uA(n){let e=n.getDay(),t=e===0?-3:Hh-e;return Gh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function l0(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=uA(t),s=PV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Hn(i,n,Wh(r,Ii.MinusSign))}}function qh(n,e=!1){return function(t,r){let o=uA(t).getFullYear();return Hn(o,n,Wh(r,Ii.MinusSign),e)}}var d0={};function UV(n){if(d0[n])return d0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ve(Ae.Eras,ke.Abbreviated);break;case"GGGG":e=Ve(Ae.Eras,ke.Wide);break;case"GGGGG":e=Ve(Ae.Eras,ke.Narrow);break;case"y":e=pt(Se.FullYear,1,0,!1,!0);break;case"yy":e=pt(Se.FullYear,2,0,!0,!0);break;case"yyy":e=pt(Se.FullYear,3,0,!1,!0);break;case"yyyy":e=pt(Se.FullYear,4,0,!1,!0);break;case"Y":e=qh(1);break;case"YY":e=qh(2,!0);break;case"YYY":e=qh(3);break;case"YYYY":e=qh(4);break;case"M":case"L":e=pt(Se.Month,1,1);break;case"MM":case"LL":e=pt(Se.Month,2,1);break;case"MMM":e=Ve(Ae.Months,ke.Abbreviated);break;case"MMMM":e=Ve(Ae.Months,ke.Wide);break;case"MMMMM":e=Ve(Ae.Months,ke.Narrow);break;case"LLL":e=Ve(Ae.Months,ke.Abbreviated,en.Standalone);break;case"LLLL":e=Ve(Ae.Months,ke.Wide,en.Standalone);break;case"LLLLL":e=Ve(Ae.Months,ke.Narrow,en.Standalone);break;case"w":e=l0(1);break;case"ww":e=l0(2);break;case"W":e=l0(1,!0);break;case"d":e=pt(Se.Date,1);break;case"dd":e=pt(Se.Date,2);break;case"c":case"cc":e=pt(Se.Day,1);break;case"ccc":e=Ve(Ae.Days,ke.Abbreviated,en.Standalone);break;case"cccc":e=Ve(Ae.Days,ke.Wide,en.Standalone);break;case"ccccc":e=Ve(Ae.Days,ke.Narrow,en.Standalone);break;case"cccccc":e=Ve(Ae.Days,ke.Short,en.Standalone);break;case"E":case"EE":case"EEE":e=Ve(Ae.Days,ke.Abbreviated);break;case"EEEE":e=Ve(Ae.Days,ke.Wide);break;case"EEEEE":e=Ve(Ae.Days,ke.Narrow);break;case"EEEEEE":e=Ve(Ae.Days,ke.Short);break;case"a":case"aa":case"aaa":e=Ve(Ae.DayPeriods,ke.Abbreviated);break;case"aaaa":e=Ve(Ae.DayPeriods,ke.Wide);break;case"aaaaa":e=Ve(Ae.DayPeriods,ke.Narrow);break;case"b":case"bb":case"bbb":e=Ve(Ae.DayPeriods,ke.Abbreviated,en.Standalone,!0);break;case"bbbb":e=Ve(Ae.DayPeriods,ke.Wide,en.Standalone,!0);break;case"bbbbb":e=Ve(Ae.DayPeriods,ke.Narrow,en.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(Ae.DayPeriods,ke.Abbreviated,en.Format,!0);break;case"BBBB":e=Ve(Ae.DayPeriods,ke.Wide,en.Format,!0);break;case"BBBBB":e=Ve(Ae.DayPeriods,ke.Narrow,en.Format,!0);break;case"h":e=pt(Se.Hours,1,-12);break;case"hh":e=pt(Se.Hours,2,-12);break;case"H":e=pt(Se.Hours,1);break;case"HH":e=pt(Se.Hours,2);break;case"m":e=pt(Se.Minutes,1);break;case"mm":e=pt(Se.Minutes,2);break;case"s":e=pt(Se.Seconds,1);break;case"ss":e=pt(Se.Seconds,2);break;case"S":e=pt(Se.FractionalSeconds,1);break;case"SS":e=pt(Se.FractionalSeconds,2);break;case"SSS":e=pt(Se.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=$h(qr.Short);break;case"ZZZZZ":e=$h(qr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=$h(qr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=$h(qr.Long);break;default:return null}return d0[n]=e,e}function lA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function kV(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function OV(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=lA(e,i);return kV(n,r*(o-i))}function VV(n){if(eA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Gh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(AV))return LV(r)}let e=new Date(n);if(!eA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function LV(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function eA(n){return n instanceof Date&&!isNaN(n.valueOf())}function Kh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var h0=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dA=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new h0(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),tA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);tA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(X(Hs),X(Eh),X(a0))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function tA(n,e){n.context.$implicit=e.item}var Di=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new f0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(X(Hs),X(Eh))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),f0=class{constructor(){this.$implicit=null,this.ngIf=null}};function nA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Xt(e)}'.`)}function hA(n,e){return new ee(2100,!1)}var p0=class{createSubscription(e,t){return c0(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){c0(()=>e.unsubscribe())}},g0=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},BV=new g0,jV=new p0,fA=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(wi(t))return BV;if(i0(t))return jV;throw hA(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(X(Br,16))}}static{this.\u0275pipe=sh({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var $V="mediumDate",qV=new q(""),HV=new q(""),pA=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??$V,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return MV(t,s,o||this.locale,a)}catch(s){throw hA(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(X(kh,16),X(qV,24),X(HV,24))}}static{this.\u0275pipe=sh({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var gA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({})}}return n})(),E0="browser",zV="server";function GV(n){return n===E0}function Ci(n){return n===zV}var mA=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>GV(B(bt))?new m0(B($t),window):new y0})}}return n})(),m0=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=WV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function WV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var y0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zs=class{};var eu=class{},Yh=class{},Ro=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var D0=class{encodeKey(e){return yA(e)}encodeValue(e){return yA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function YV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var XV=/%(\d[a-f0-9])/gi,JV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yA(n){return encodeURIComponent(n).replace(XV,(e,t)=>JV[t]??e)}function Qh(n){return`${n}`}var bi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new D0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=YV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Qh):[Qh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Qh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Qh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var C0=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ZV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _A(n){return typeof Blob<"u"&&n instanceof Blob}function wA(n){return typeof FormData<"u"&&n instanceof FormData}function eL(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Zc=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(ZV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ro,this.context??=new C0,!this.params)this.params=new bi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vA(this.body)||_A(this.body)||wA(this.body)||eL(this.body)?this.body:this.body instanceof bi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wA(this.body)?null:_A(this.body)?this.body.type||null:vA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof bi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ws=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ws||{}),tu=class{constructor(e,t=Zh.Ok,r="OK"){this.headers=e.headers||new Ro,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},b0=class n extends tu{constructor(e={}){super(e),this.type=Ws.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Xh=class n extends tu{constructor(e={}){super(e),this.type=Ws.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Jh=class extends tu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Zh=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Zh||{});function I0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var tL=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Zc)o=t;else{let c;i.headers instanceof Ro?c=i.headers:c=new Ro(i.headers);let l;i.params&&(i.params instanceof bi?l=i.params:l=new bi({fromObject:i.params})),o=new Zc(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ne(o).pipe(Nr(c=>this.handler.handle(c)));if(t instanceof Zc||i.observe==="events")return s;let a=s.pipe(wt(c=>c instanceof Xh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Z(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Z(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Z(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Z(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new bi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,I0(i,r))}post(t,r,i={}){return this.request("POST",t,I0(i,r))}put(t,r,i={}){return this.request("PUT",t,I0(i,r))}static{this.\u0275fac=function(r){return new(r||n)(P(eu))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function CA(n,e){return e(n)}function nL(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function rL(n,e,t){return(r,i)=>Bn(t,()=>e(r,o=>n(o,i)))}var iL=new q(""),T0=new q(""),oL=new q(""),sL=new q("");function aL(){let n=null;return(e,t)=>{n===null&&(n=(B(iL,{optional:!0})??[]).reduceRight(nL,CA));let r=B(So),i=r.add();return n(e,t).pipe(nr(()=>r.remove(i)))}}var EA=(()=>{class n extends eu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=B(So);let i=B(sL,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(T0),...this.injector.get(oL,[])]));this.chain=i.reduceRight((o,s)=>rL(o,s,this.injector),CA)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(nr(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(P(Yh),P(Bt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();var cL=/^\)\]\}',?\n/;function uL(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var IA=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ee(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?pe(r.\u0275loadImpl()):ne(null)).pipe(Ne(()=>new he(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,b)=>s.setRequestHeader(C,b.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let C=s.statusText||"OK",b=new Ro(s.getAllResponseHeaders()),U=uL(s)||t.url;return c=new b0({headers:b,status:s.status,statusText:C,url:U}),c},d=()=>{let{headers:C,status:b,statusText:U,url:H}=l(),N=null;b!==Zh.NoContent&&(N=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=N?Zh.Ok:0);let j=b>=200&&b<300;if(t.responseType==="json"&&typeof N=="string"){let re=N;N=N.replace(cL,"");try{N=N!==""?JSON.parse(N):null}catch(Y){N=re,j&&(j=!1,N={error:Y,text:N})}}j?(o.next(new Xh({body:N,headers:C,status:b,statusText:U,url:H||void 0})),o.complete()):o.error(new Jh({error:N,headers:C,status:b,statusText:U,url:H||void 0}))},f=C=>{let{url:b}=l(),U=new Jh({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});o.error(U)},g=!1,y=C=>{g||(o.next(l()),g=!0);let b={type:Ws.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(b.total=C.total),t.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),o.next(b)},I=C=>{let b={type:Ws.UploadProgress,loaded:C.loaded};C.lengthComputable&&(b.total=C.total),o.next(b)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:Ws.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(P(zs))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),bA=new q(""),lL="XSRF-TOKEN",dL=new q("",{providedIn:"root",factory:()=>lL}),hL="X-XSRF-TOKEN",fL=new q("",{providedIn:"root",factory:()=>hL}),ef=class{},pL=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Kh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(P($t),P(bt),P(dL))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function gL(n,e){let t=n.url.toLowerCase();if(!B(bA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=B(ef).getToken(),i=B(fL);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var TA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(TA||{});function mL(n,e){return{\u0275kind:n,\u0275providers:e}}function yL(...n){let e=[tL,IA,EA,{provide:eu,useExisting:EA},{provide:Yh,useExisting:IA},{provide:T0,useValue:gL,multi:!0},{provide:bA,useValue:!0},{provide:ef,useClass:pL}];for(let t of n)e.push(...t.\u0275providers);return ah(e)}var DA=new q("");function vL(){return mL(TA.LegacyInterceptors,[{provide:DA,useFactory:aL},{provide:T0,useExisting:DA,multi:!0}])}var AA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({providers:[yL(vL())]})}}return n})();var M0=class extends zh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},x0=class n extends M0{static makeCurrent(){iA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=_L();return t==null?null:wL(t)}resetBaseElement(){nu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Kh(document.cookie,e)}},nu=null;function _L(){return nu=nu||document.querySelector("base"),nu?nu.getAttribute("href"):null}function wL(n){return new URL(n,document.baseURI).pathname}var F0=class{addToWindow(e){Et.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ee(5103,!1);return o},Et.getAllAngularTestabilities=()=>e.getAllTestabilities(),Et.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Et.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Et.frameworkStabilizers||(Et.frameworkStabilizers=[]),Et.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ur().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},EL=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),R0=new q(""),FA=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(P(R0),P(me))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),tf=class{constructor(e){this._doc=e}},A0="ng-app-id",RA=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ci(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${A0}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(A0),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(A0,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(P($t),P(gh),P(By,8),P(bt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),S0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},P0=/%COMP%/g,NA="%COMP%",IL=`_nghost-${NA}`,DL=`_ngcontent-${NA}`,CL=!0,bL=new q("",{providedIn:"root",factory:()=>CL});function TL(n){return DL.replace(P0,n)}function AL(n){return IL.replace(P0,n)}function PA(n,e){return e.map(t=>t.replace(P0,n))}var SA=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ci(a),this.defaultRenderer=new ru(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===or.ShadowDom&&(r=Ie(W({},r),{encapsulation:or.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof nf?i.applyToHost(t):i instanceof iu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case or.Emulated:o=new nf(c,l,r,this.appId,d,s,a,f);break;case or.ShadowDom:return new N0(c,l,t,r,s,a,this.nonce,f);default:o=new iu(c,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(P(FA),P(RA),P(gh),P(bL),P($t),P(bt),P(me),P(By))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),ru=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(S0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(MA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(MA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=S0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=S0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(t,r,i&Ur.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ur.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function MA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var N0=class extends ru{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=PA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},iu=class extends ru{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?PA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nf=class extends iu{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=TL(l),this.hostAttr=AL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},SL=(()=>{class n extends tf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(P($t))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),xA=["alt","control","meta","shift"],ML={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},FL=(()=>{class n extends tf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),xA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=ML[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xA.forEach(s=>{if(s!==i){let a=xL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(P($t))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function RL(){x0.makeCurrent()}function NL(){return new cr}function PL(){return Wb(document),document}var UL=[{provide:bt,useValue:E0},{provide:Ly,useValue:RL,multi:!0},{provide:$t,useFactory:PL,deps:[]}],UA=o0(QT,"browser",UL),kL=new q(""),OL=[{provide:Jc,useClass:F0,deps:[]},{provide:n0,useClass:Fh,deps:[me,Rh,Jc]},{provide:Fh,useClass:Fh,deps:[me,Rh,Jc]}],VL=[{provide:ch,useValue:"root"},{provide:cr,useFactory:NL,deps:[]},{provide:R0,useClass:SL,multi:!0,deps:[$t,me,bt]},{provide:R0,useClass:FL,multi:!0,deps:[$t]},SA,RA,FA,{provide:Bc,useExisting:SA},{provide:zs,useClass:EL,deps:[]},[]],kA=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:gh,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(P(kL,12))}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({providers:[...VL,...OL],imports:[gA,YT]})}}return n})();var OA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(P($t))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",_u=Symbol("RouteTitle"),L0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Js(n){return new L0(n)}function LL(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function BL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lr(n[t],e[t]))return!1;return!0}function lr(n,e){let t=n?B0(n):void 0,r=e?B0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!WA(n[i],e[i]))return!1;return!0}function B0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function KA(n){return n.length>0?n[n.length-1]:null}function Mi(n){return um(n)?n:wi(n)?pe(Promise.resolve(n)):ne(n)}var jL={exact:YA,subset:XA},QA={exact:$L,subset:qL,ignored:()=>!0};function LA(n,e,t){return jL[t.paths](n.root,e.root,t.matrixParams)&&QA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function $L(n,e){return lr(n,e)}function YA(n,e,t){if(!Po(n.segments,e.segments)||!sf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YA(n.children[r],e.children[r],t))return!1;return!0}function qL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WA(n[t],e[t]))}function XA(n,e,t){return JA(n,e,e.segments,t)}function JA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Po(i,t)||e.hasChildren()||!sf(i,t,r))}else if(n.segments.length===t.length){if(!Po(n.segments,t)||!sf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!XA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Po(n.segments,i)||!sf(n.segments,i,r)||!n.children[fe]?!1:JA(n.children[fe],e,o,r)}}function sf(n,e,t){return e.every((r,i)=>QA[t](n[i].parameters,r.parameters))}var Ti=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return GL.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return af(this)}},No=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return e1(this)}};function HL(n,e){return Po(n,e)&&n.every((t,r)=>lr(t.parameters,e[r].parameters))}function Po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function zL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var wu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new du,providedIn:"root"})}}return n})(),du=class{parse(e){let t=new $0(e);return new Ti(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ou(e.root,!0)}`,r=QL(e.queryParams),i=typeof e.fragment=="string"?`#${WL(e.fragment)}`:"";return`${t}${r}${i}`}},GL=new du;function af(n){return n.segments.map(e=>e1(e)).join("/")}function ou(n,e){if(!n.hasChildren())return af(n);if(e){let t=n.children[fe]?ou(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${ou(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=zL(n,(r,i)=>i===fe?[ou(n.children[fe],!1)]:[`${i}:${ou(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${af(n)}/${t[0]}`:`${af(n)}/(${t.join("//")})`}}function ZA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rf(n){return ZA(n).replace(/%3B/gi,";")}function WL(n){return encodeURI(n)}function j0(n){return ZA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cf(n){return decodeURIComponent(n)}function BA(n){return cf(n.replace(/\+/g,"%20"))}function e1(n){return`${j0(n.path)}${KL(n.parameters)}`}function KL(n){return Object.entries(n).map(([e,t])=>`;${j0(e)}=${j0(t)}`).join("")}function QL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${rf(t)}=${rf(i)}`).join("&"):`${rf(t)}=${rf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var YL=/^[^\/()?;#]+/;function U0(n){let e=n.match(YL);return e?e[0]:""}var XL=/^[^\/()?;=#]+/;function JL(n){let e=n.match(XL);return e?e[0]:""}var ZL=/^[^=?&#]+/;function eB(n){let e=n.match(ZL);return e?e[0]:""}var tB=/^[^&#]+/;function nB(n){let e=n.match(tB);return e?e[0]:""}var $0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new xe(e,t)),r}parseSegment(){let e=U0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new No(cf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=JL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=U0(this.remaining);i&&(r=i,this.capture(r))}e[cf(t)]=cf(r)}parseQueryParam(e){let t=eB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=nB(this.remaining);s&&(r=s,this.capture(r))}let i=BA(t),o=BA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=U0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function t1(n){return n.segments.length>0?new xe([],{[fe]:n}):n}function n1(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=n1(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return rB(t)}function rB(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new xe(n.segments.concat(e.segments),e.children)}return n}function Zs(n){return n instanceof Ti}function iB(n,e,t=null,r=null){let i=r1(n);return i1(i,e,t,r)}function r1(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=t1(r);return e??i}function i1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return k0(i,i,i,t,r);let o=oB(e);if(o.toRoot())return k0(i,i,new xe([],{}),t,r);let s=sB(o,i,n),a=s.processChildren?cu(s.segmentGroup,s.index,o.commands):s1(s.segmentGroup,s.index,o.commands);return k0(i,s.segmentGroup,a,t,r)}function uf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function hu(n){return typeof n=="object"&&n!=null&&n.outlets}function k0(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=o1(n,e,t);let a=t1(n1(s));return new Ti(a,o,i)}function o1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=o1(o,e,t)}),new xe(n.segments,r)}var lf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&uf(r[0]))throw new ee(4003,!1);let i=r.find(hu);if(i&&i!==KA(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function oB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lf(t,e,r)}var Ys=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function sB(n,e,t){if(n.isAbsolute)return new Ys(e,!0,0);if(!t)return new Ys(e,!1,NaN);if(t.parent===null)return new Ys(t,!0,0);let r=uf(n.commands[0])?0:1,i=t.segments.length-1+r;return aB(t,i,n.numberOfDoubleDots)}function aB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new Ys(r,!1,i-o)}function cB(n){return hu(n[0])?n[0].outlets:{[fe]:n}}function s1(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return cu(n,e,t);let r=uB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new xe(n.segments.slice(r.pathIndex),n.children),cu(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?q0(n,e,t):r.match?cu(n,0,i):q0(n,e,t)}function cu(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=cB(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=cu(n.children[fe],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=s1(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function uB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(hu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$A(c,l,s))return o;r+=2}else{if(!$A(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function q0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(hu(o)){let c=lB(o.outlets);return new xe(r,c)}if(i===0&&uf(t[0])){let c=n.segments[e];r.push(new No(c.path,jA(t[0]))),i++;continue}let s=hu(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&uf(a)?(r.push(new No(s,jA(a))),i+=2):(r.push(new No(s,{})),i++)}return new xe(r,{})}function lB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=q0(new xe([],{}),0,r))}),e}function jA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $A(n,e,t){return n==t.path&&lr(e,t.parameters)}var uu="imperative",Tt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Tt||{}),Tn=class{constructor(e,t){this.id=e,this.url=t}},ea=class extends Tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Tt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},dr=class extends Tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},mn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(mn||{}),df=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(df||{}),Ai=class extends Tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends Tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Tt.NavigationSkipped}},fu=class extends Tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hf=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},H0=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},z0=class extends Tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},G0=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},W0=class extends Tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},K0=class{constructor(e){this.route=e,this.type=Tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Q0=class{constructor(e){this.route=e,this.type=Tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Y0=class{constructor(e){this.snapshot=e,this.type=Tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},X0=class{constructor(e){this.snapshot=e,this.type=Tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},J0=class{constructor(e){this.snapshot=e,this.type=Tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Z0=class{constructor(e){this.snapshot=e,this.type=Tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ff=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Tt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pu=class{},gu=class{constructor(e){this.url=e}};var ev=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Eu,this.attachRef=null}},Eu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ev,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nv(e,this._root).map(t=>t.value)}};function tv(n,e){if(n===e.value)return e;for(let t of e.children){let r=tv(n,t);if(r)return r}return null}function nv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nv(n,t);if(r.length)return r.unshift(e),r}return[]}var gn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gf=class extends pf{constructor(e,t){super(e),this.snapshot=t,hv(this,e)}toString(){return this.snapshot.toString()}};function a1(n){let e=dB(n),t=new St([new No("",{})]),r=new St({}),i=new St({}),o=new St({}),s=new St(""),a=new zn(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new gf(new gn(a,[]),e)}function dB(n){let e={},t={},r={},i="",o=new mu([],e,r,i,t,fe,n,null,{});return new mf("",new gn(o,[]))}var zn=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[_u]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>Js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>Js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dv(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&u1(i)&&(r.resolve[_u]=i.title),r}var mu=class{get title(){return this.data?.[_u]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mf=class extends pf{constructor(e,t){super(t),this.url=e,hv(this,t)}toString(){return c1(this._root)}};function hv(n,e){e.value._routerState=n,e.children.forEach(t=>hv(n,t))}function c1(n){let e=n.children.length>0?` { ${n.children.map(c1).join(", ")} } `:"";return`${n.value}${e}`}function O0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),lr(e.params,t.params)||n.paramsSubject.next(t.params),BL(e.url,t.url)||n.urlSubject.next(t.url),lr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rv(n,e){let t=lr(n.params,e.params)&&HL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rv(n.parent,e.parent))}function u1(n){return typeof n.title=="string"||n.title===null}var fv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=B(Eu),this.location=B(Hs),this.changeDetector=B(Br),this.environmentInjector=B(Bt),this.inputBinder=B(Ef,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new iv(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[mi]})}}return n})(),iv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===zn?this.route:e===Eu?this.childContexts:this.parent.get(e,t)}},Ef=new q(""),qA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Mc([r.queryParams,r.params,r.data]).pipe(Ne(([o,s,a],c)=>(a=W(W(W({},o),s),a),c===0?ne(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=XT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function hB(n,e,t){let r=yu(n,e._root,t?t._root:void 0);return new gf(r,e)}function yu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fB(n,e,t);return new gn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yu(n,a)),s}}let r=pB(e.value),i=e.children.map(o=>yu(n,o));return new gn(r,i)}}function fB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yu(n,r,i);return yu(n,r)})}function pB(n){return new zn(new St(n.url),new St(n.params),new St(n.queryParams),new St(n.fragment),new St(n.data),n.outlet,n.component,n)}var l1="ngNavigationCancelingError";function d1(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Zs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=h1(!1,mn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function h1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[l1]=!0,t.cancellationCode=e,t}function gB(n){return f1(n)&&Zs(n.url)}function f1(n){return!!n&&n[l1]}var mB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["ng-component"]],standalone:!0,features:[UT],decls:1,vars:0,template:function(r,i){r&1&&qn(0,"router-outlet")},dependencies:[fv],encapsulation:2})}}return n})();function yB(n,e){return n.providers&&!n._injector&&(n._injector=bh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pv(n){let e=n.children&&n.children.map(pv),t=e?Ie(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=mB),t}function hr(n){return n.outlet||fe}function vB(n,e){let t=n.filter(r=>hr(r)===e);return t.push(...n.filter(r=>hr(r)!==e)),t}function Iu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _B=(n,e,t,r)=>Z(i=>(new ov(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ov=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),O0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Z0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new X0(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(O0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),O0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Iu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},yf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xs=class{constructor(e,t){this.component=e,this.route=t}};function wB(n,e,t){let r=n._root,i=e?e._root:null;return su(r,i,t,[r.value])}function EB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function na(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!VC(n)?n:e.get(n):r}function su(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qs(e);return n.children.forEach(s=>{IB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>lu(a,t.getContext(s),i)),i}function IB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=DB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?su(n,e,a?a.children:null,r,i):su(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xs(a.outlet.component,s))}else s&&lu(e,a,i),i.canActivateChecks.push(new yf(r)),o.component?su(n,null,a?a.children:null,r,i):su(n,null,t,r,i);return i}function DB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Po(n.url,e.url)||!lr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rv(n,e)||!lr(n.queryParams,e.queryParams);case"paramsChange":default:return!rv(n,e)}}function lu(n,e,t){let r=Qs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?lu(s,e.children.getContext(o),t):lu(s,null,t):lu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Xs(e.outlet.component,i)):t.canDeactivateChecks.push(new Xs(null,i)):t.canDeactivateChecks.push(new Xs(null,i))}function Du(n){return typeof n=="function"}function CB(n){return typeof n=="boolean"}function bB(n){return n&&Du(n.canLoad)}function TB(n){return n&&Du(n.canActivate)}function AB(n){return n&&Du(n.canActivateChild)}function SB(n){return n&&Du(n.canDeactivate)}function MB(n){return n&&Du(n.canMatch)}function p1(n){return n instanceof Rr||n?.name==="EmptyError"}var of=Symbol("INITIAL_VALUE");function ta(){return Ne(n=>Mc(n.map(e=>e.pipe(Pr(1),po(of)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===of)return of;if(t===!1||t instanceof Ti)return t}return!0}),wt(e=>e!==of),Pr(1)))}function xB(n,e){return ut(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(Ie(W({},t),{guardsResult:!0})):FB(s,r,i,n).pipe(ut(a=>a&&CB(a)?RB(r,o,n,e):ne(a)),Z(a=>Ie(W({},t),{guardsResult:a})))})}function FB(n,e,t,r){return pe(n).pipe(ut(i=>OB(i.component,i.route,t,e,r)),wn(i=>i!==!0,!0))}function RB(n,e,t,r){return pe(e).pipe(Nr(i=>Cs(PB(i.route.parent,r),NB(i.route,r),kB(n,i.path,t),UB(n,i.route,t))),wn(i=>i!==!0,!0))}function NB(n,e){return n!==null&&e&&e(new J0(n)),ne(!0)}function PB(n,e){return n!==null&&e&&e(new Y0(n)),ne(!0)}function UB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>vd(()=>{let s=Iu(e)??t,a=na(o,s),c=TB(a)?a.canActivate(e,n):Bn(s,()=>a(e,n));return Mi(c).pipe(wn())}));return ne(i).pipe(ta())}function kB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>EB(s)).filter(s=>s!==null).map(s=>vd(()=>{let a=s.guards.map(c=>{let l=Iu(s.node)??t,d=na(c,l),f=AB(d)?d.canActivateChild(r,n):Bn(l,()=>d(r,n));return Mi(f).pipe(wn())});return ne(a).pipe(ta())}));return ne(o).pipe(ta())}function OB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let c=Iu(e)??i,l=na(a,c),d=SB(l)?l.canDeactivate(n,e,t,r):Bn(c,()=>l(n,e,t,r));return Mi(d).pipe(wn())});return ne(s).pipe(ta())}function VB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=na(s,n),c=bB(a)?a.canLoad(e,t):Bn(n,()=>a(e,t));return Mi(c)});return ne(o).pipe(ta(),g1(r))}function g1(n){return rm(nt(e=>{if(Zs(e))throw d1(n,e)}),Z(e=>e===!0))}function LB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=na(s,n),c=MB(a)?a.canMatch(e,t):Bn(n,()=>a(e,t));return Mi(c)});return ne(o).pipe(ta(),g1(r))}var vu=class{constructor(e){this.segmentGroup=e||null}},vf=class extends Error{constructor(e){super(),this.urlTree=e}};function Ks(n){return Ds(new vu(n))}function BB(n){return Ds(new ee(4e3,!1))}function jB(n){return Ds(h1(!1,mn.GuardRejected))}var sv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[fe])return BB(e.redirectTo);i=i.children[fe]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new vf(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ti(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $B(n,e,t,r,i){let o=gv(n,e,t);return o.matched?(r=yB(e,r),LB(r,e,t,i).pipe(Z(s=>s===!0?o:W({},av)))):ne(o)}function gv(n,e,t){if(e.path==="**")return qB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},av):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||LL)(t,n,e);if(!i)return W({},av);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function qB(n){return{matched:!0,parameters:n.length>0?KA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HA(n,e,t,r){return t.length>0&&GB(n,t,r)?{segmentGroup:new xe(e,zB(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&WB(n,t,r)?{segmentGroup:new xe(n.segments,HB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function HB(n,e,t,r){let i={};for(let o of t)if(If(n,e,o)&&!r[hr(o)]){let s=new xe([],{});i[hr(o)]=s}return W(W({},r),i)}function zB(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&hr(r)!==fe){let i=new xe([],{});t[hr(r)]=i}return t}function GB(n,e,t){return t.some(r=>If(n,e,r)&&hr(r)!==fe)}function WB(n,e,t){return t.some(r=>If(n,e,r))}function If(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function KB(n,e,t,r){return hr(n)!==r&&(r===fe||!If(e,t,n))?!1:gv(e,n,t).matched}function QB(n,e,t){return e.length===0&&!n.children[t]}var cv=class{};function YB(n,e,t,r,i,o,s="emptyOnly"){return new uv(n,e,t,r,i,s,o).recognize()}var XB=31,uv=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=HA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(t=>{let r=new mu([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,{},fe,this.rootComponentType,null,{}),i=new gn(r,t),o=new mf("",i),s=iB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,fe).pipe(ci(r=>{if(r instanceof vf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vu?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=dv(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(Z(o=>o instanceof gn?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return pe(i).pipe(Nr(o=>{let s=r.children[o],a=vB(t,o);return this.processSegmentGroup(e,a,s,o)}),fo((o,s)=>(o.push(...s),o)),ui(null),gm(),ut(o=>{if(o===null)return Ks(r);let s=m1(o);return JB(s),ne(s)}))}processSegment(e,t,r,i,o,s){return pe(t).pipe(Nr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(ci(c=>{if(c instanceof vu)return ne(null);throw c}))),wn(a=>!!a),ci(a=>{if(p1(a))return QB(r,i,o)?ne(new cv):Ks(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return KB(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Ks(i):Ks(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=gv(t,i,o);if(!a)return Ks(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>XB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(ut(g=>this.processSegment(e,r,t,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=$B(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(Ne(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ne(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new mu(d,g,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,ej(r),hr(r),r.component??r._loadedComponent??null,r,tj(r)),{segmentGroup:I,slicedSegments:C}=HA(t,d,f,c);if(C.length===0&&I.hasChildren())return this.processChildren(l,c,I).pipe(Z(U=>U===null?null:new gn(y,U)));if(c.length===0&&C.length===0)return ne(new gn(y,[]));let b=hr(r)===o;return this.processSegment(l,c,I,C,b?fe:o,!0).pipe(Z(U=>new gn(y,U instanceof gn?[U]:[])))}))):Ks(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):VB(e,t,r,this.urlSerializer).pipe(ut(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):jB(t))):ne({routes:[],injector:e})}};function JB(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function ZB(n){let e=n.value.routeConfig;return e&&e.path===""}function m1(n){let e=[],t=new Set;for(let r of n){if(!ZB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=m1(r.children);e.push(new gn(r.value,i))}return e.filter(r=>!t.has(r))}function ej(n){return n.data||{}}function tj(n){return n.resolve||{}}function nj(n,e,t,r,i,o){return ut(s=>YB(n,e,t,r,s.extractedUrl,i,o).pipe(Z(({state:a,tree:c})=>Ie(W({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function rj(n,e){return ut(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of y1(c))s.add(l);let a=0;return pe(s).pipe(Nr(c=>o.has(c)?ij(c,r,n,e):(c.data=dv(c,c.parent,n).resolve,ne(void 0))),nt(()=>a++),bs(1),ut(c=>a===s.size?ne(t):Qt))})}function y1(n){let e=n.children.map(t=>y1(t)).flat();return[n,...e]}function ij(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!u1(i)&&(o[_u]=i.title),oj(o,n,e,r).pipe(Z(s=>(n._resolvedData=s,n.data=dv(n,n.parent,t).resolve,null)))}function oj(n,e,t,r){let i=B0(n);if(i.length===0)return ne({});let o={};return pe(i).pipe(ut(s=>sj(n[s],e,t,r).pipe(wn(),nt(a=>{o[s]=a}))),bs(1),fm(o),ci(s=>p1(s)?Qt:Ds(s)))}function sj(n,e,t,r){let i=Iu(e)??r,o=na(n,i),s=o.resolve?o.resolve(e,t):Bn(i,()=>o(e,t));return Mi(s)}function V0(n){return Ne(e=>{let t=n(e);return t?pe(t).pipe(Z(()=>e)):ne(e)})}var v1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[_u]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(aj),providedIn:"root"})}}return n})(),aj=(()=>{class n extends v1{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(P(OA))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cu=new q("",{providedIn:"root",factory:()=>({})}),_f=new q(""),mv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Uh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Mi(t.loadComponent()).pipe(Z(_1),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),nr(()=>{this.componentLoaders.delete(t)})),i=new _s(r,()=>new Ye).pipe(vs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=cj(r,this.compiler,t,this.onLoadEndListener).pipe(nr(()=>{this.childrenLoaders.delete(r)})),s=new _s(o,()=>new Ye).pipe(vs());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cj(n,e,t,r){return Mi(n.loadChildren()).pipe(Z(_1),ut(i=>i instanceof jc||Array.isArray(i)?ne(i):pe(e.compileModuleAsync(i))),Z(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(_f,[],{optional:!0,self:!0}).flat()),{routes:s.map(pv),injector:o}}))}function uj(n){return n&&typeof n=="object"&&"default"in n}function _1(n){return uj(n)?n.default:n}var yv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(lj),providedIn:"root"})}}return n})(),lj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),w1=new q(""),E1=new q("");function dj(n,e,t){let r=n.get(E1),i=n.get($t);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hj(n))),{onViewTransitionCreated:c}=r;return c&&Bn(n,()=>c({transition:a,from:e,to:t})),s})}function hj(n){return new Promise(e=>{Ch(e,{injector:n})})}var vv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ye,this.transitionAbortSubject=new Ye,this.configLoader=B(mv),this.environmentInjector=B(Bt),this.urlSerializer=B(wu),this.rootContexts=B(Eu),this.location=B(Gs),this.inputBindingEnabled=B(Ef,{optional:!0})!==null,this.titleStrategy=B(v1),this.options=B(Cu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(yv),this.createViewTransition=B(w1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new K0(i)),r=i=>this.events.next(new Q0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ie(W(W({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new St({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:uu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(o=>o.id!==0),Z(o=>Ie(W({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ne(o=>{let s=!1,a=!1;return ne(o).pipe(Ne(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",mn.SupersededByNewNavigation),Qt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Si(c.id,this.urlSerializer.serialize(c.rawUrl),f,df.IgnoredSameUrlNavigation)),c.resolve(null),Qt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ne(c).pipe(Ne(f=>{let g=this.transitions?.getValue();return this.events.next(new ea(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Qt:Promise.resolve(f)}),nj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ie(W({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new hf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:I,extras:C}=c,b=new ea(f,this.urlSerializer.serialize(g),y,I);this.events.next(b);let U=a1(this.rootComponentType).snapshot;return this.currentTransition=o=Ie(W({},c),{targetSnapshot:U,urlAfterRedirects:g,extras:Ie(W({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ne(o)}else{let f="";return this.events.next(new Si(c.id,this.urlSerializer.serialize(c.extractedUrl),f,df.IgnoredByUrlHandlingStrategy)),c.resolve(null),Qt}}),nt(c=>{let l=new H0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Z(c=>(this.currentTransition=o=Ie(W({},c),{guards:wB(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),xB(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,Zs(c.guardsResult))throw d1(this.urlSerializer,c.guardsResult);let l=new z0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),wt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",mn.GuardRejected),!1)),V0(c=>{if(c.guards.canActivateChecks.length)return ne(c).pipe(nt(l=>{let d=new G0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ne(l=>{let d=!1;return ne(l).pipe(rj(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",mn.NoDataFromResolver)}}))}),nt(l=>{let d=new W0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),V0(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(nt(g=>{d.component=g}),Z(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Mc(l(c.targetSnapshot.root)).pipe(ui(null),Pr(1))}),V0(()=>this.afterPreactivation()),Ne(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?pe(d).pipe(Z(()=>o)):ne(o)}),Z(c=>{let l=hB(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ie(W({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new pu)}),_B(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pr(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new dr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),ym(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),nr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",mn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ci(c=>{if(a=!0,f1(c))this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),gB(c)?this.events.next(new gu(c.url)):o.resolve(!1);else{this.events.next(new fu(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let o=new Ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fj(n){return n!==uu}var pj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(gj),providedIn:"root"})}}return n})(),lv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gj=(()=>{class n extends lv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qs(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(mj),providedIn:"root"})}}return n})(),mj=(()=>{class n extends I1{constructor(){super(...arguments),this.location=B(Gs),this.urlSerializer=B(wu),this.options=B(Cu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(yv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ti,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=a1(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ea)this.stateMemento=this.createStateMemento();else if(t instanceof Si)this.rawUrlTree=r.initialUrl;else if(t instanceof hf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof pu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Ai&&(t.code===mn.GuardRejected||t.code===mn.NoDataFromResolver)?this.restoreHistory(r):t instanceof fu?this.restoreHistory(r,!0):t instanceof dr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=W(W({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=W(W({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qs(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),au=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(au||{});function D1(n,e){n.events.pipe(wt(t=>t instanceof dr||t instanceof Ai||t instanceof fu||t instanceof Si),Z(t=>t instanceof dr||t instanceof Si?au.COMPLETE:(t instanceof Ai?t.code===mn.Redirect||t.code===mn.SupersededByNewNavigation:!1)?au.REDIRECTING:au.FAILED),wt(t=>t!==au.REDIRECTING),Pr(1)).subscribe(()=>{e()})}function yj(n){throw n}var vj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_j={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=B(xh),this.stateManager=B(I1),this.options=B(Cu,{optional:!0})||{},this.pendingTasks=B(So),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(vv),this.urlSerializer=B(wu),this.location=B(Gs),this.urlHandlingStrategy=B(yv),this._events=new Ye,this.errorHandler=this.options.errorHandler||yj,this.navigated=!1,this.routeReuseStrategy=B(pj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(_f,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Ef,{optional:!0}),this.eventsSubscription=new tt,this.isNgZoneEnabled=B(me)instanceof me&&me.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ai&&r.code!==mn.Redirect&&r.code!==mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof dr)this.navigated=!0;else if(r instanceof gu){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||fj(i.source)};this.scheduleNavigation(s,uu,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Ej(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=W({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=r1(g)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return i1(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Zs(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,uu,null,r)}navigate(t,r={skipLocationChange:!1}){return wj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=W({},vj):r===!1?i=W({},_j):i=r,Zs(t))return LA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return LA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return D1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function Ej(n){return!(n instanceof pu)&&!(n instanceof gu)}var Df=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Ye,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof dr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Yb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(X(gt),X(zn),Oy("tabindex"),X(Ao),X(vi),X(Hr))}}static{this.\u0275dir=Mt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&it("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Yc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Lt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Ei],skipLocationChange:[Lt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Ei],replaceUrl:[Lt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Ei],routerLink:"routerLink"},standalone:!0,features:[e0,mi]})}}return n})();var wf=class{};var Ij=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(wt(t=>t instanceof dr),Nr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=bh(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pe(i).pipe(ai())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ne(null);let o=i.pipe(ut(s=>s===null?ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return pe([o,s]).pipe(ai())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(P(gt),P(Uh),P(Bt),P(wf),P(mv))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),C1=new q(""),Dj=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=B(Bt),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ea?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof dr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Si&&t.code===df.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ff&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>M(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Ch(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ff(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){cT()}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function Cj(n){return n.routerState.root}function bu(n,e){return{\u0275kind:n,\u0275providers:e}}function bj(){let n=B($n);return e=>{let t=n.get(xo);if(e!==t.components[0])return;let r=n.get(gt),i=n.get(b1);n.get(_v)===1&&r.initialNavigation(),n.get(T1,null,ge.Optional)?.setUpPreloading(),n.get(C1,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var b1=new q("",{factory:()=>new Ye}),_v=new q("",{providedIn:"root",factory:()=>1});function Tj(){return bu(2,[{provide:_v,useValue:0},{provide:Nh,multi:!0,deps:[$n],useFactory:e=>{let t=e.get(oA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(gt),o=e.get(b1);D1(i,()=>{r(!0)}),e.get(vv).afterPreactivation=()=>(r(!0),o.closed?ne(void 0):o),i.initialNavigation()}))}}])}function Aj(){return bu(3,[{provide:Nh,multi:!0,useFactory:()=>{let e=B(gt);return()=>{e.setUpLocationChangeListener()}}},{provide:_v,useValue:2}])}var T1=new q("");function Sj(n){return bu(0,[{provide:T1,useExisting:Ij},{provide:wf,useExisting:n}])}function Mj(){return bu(8,[qA,{provide:Ef,useExisting:qA}])}function xj(n){let e=[{provide:w1,useValue:dj},{provide:E1,useValue:W({skipNextTransition:!!n?.skipInitialTransition},n)}];return bu(9,e)}var zA=new q("ROUTER_FORROOT_GUARD"),Fj=[Gs,{provide:wu,useClass:du},gt,Eu,{provide:zn,useFactory:Cj,deps:[gt]},mv,[]],Tu=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Fj,[],{provide:_f,multi:!0,useValue:t},{provide:zA,useFactory:Uj,deps:[[gt,new Bs,new Ey]]},{provide:Cu,useValue:r||{}},r?.useHash?Nj():Pj(),Rj(),r?.preloadingStrategy?Sj(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?kj(r):[],r?.bindToComponentInputs?Mj().\u0275providers:[],r?.enableViewTransitions?xj().\u0275providers:[],Oj()]}}static forChild(t){return{ngModule:n,providers:[{provide:_f,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(P(zA,8))}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({})}}return n})();function Rj(){return{provide:C1,useFactory:()=>{let n=B(mA),e=B(me),t=B(Cu),r=B(vv),i=B(wu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Dj(i,r,n,e,t)}}}function Nj(){return{provide:Hr,useClass:aA}}function Pj(){return{provide:Hr,useClass:w0}}function Uj(n){return"guarded"}function kj(n){return[n.initialNavigation==="disabled"?Aj().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Tj().\u0275providers:[]]}var GA=new q("");function Oj(){return[{provide:GA,useFactory:bj},{provide:Ph,multi:!0,useExisting:GA}]}var Vj="firebase",Lj="10.14.1";Rn(Vj,Lj,"app");var ra=new kr("ANGULARFIRE2_VERSION");var Bj=(n,e)=>{let t=e?[e]:ID(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zr=class{constructor(){return Bj(jj)}},jj="app-check";function wv(){}var Cf=class{zone;delegate;constructor(e,t=am){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Ev=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wv,{},wv,wv)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ia=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Cf(Zone.current)),this.insideAngular=t.run(()=>new Cf(Zone.current,ho)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(P(me))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A1(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Iv(n){return n.pipe(dn(A1().outsideAngular))}function xt(n){return $j(A1())(n)}function $j(n){return function(t){return t=t.lift(new Ev(n.ngZone)),t.pipe(Pn(n.outsideAngular),dn(n.insideAngular))}}var qj=new Map,Hj={activated:!1,tokenObservers:[]},zj={initialized:!1,enabled:!1};function Gn(n){return qj.get(n)||Object.assign({},Hj)}function P1(){return zj}var Gj="https://content-firebaseappcheck.googleapis.com/v1";var Wj="exchangeDebugToken",S1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},VK=24*60*60*1e3;var bv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new Hg,this.pending.promise.catch(t=>{}),yield Kj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hg,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Kj(n){return new Promise(e=>{setTimeout(e,n)})}var Qj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Fi=new ED("appCheck","AppCheck",Qj);function U1(n){if(!Gn(n).activated)throw Fi.create("use-before-activation",{appName:n.name})}function k1(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(y){throw Fi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(c.status!==200)throw Fi.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(y){throw Fi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function O1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Gj}/projects/${t}/apps/${r}:${Wj}?key=${i}`,body:{debug_token:e}}}var Yj="firebase-app-check-database",Xj=1,Tv="firebase-app-check-store";var bf=null;function Jj(){return bf||(bf=new Promise((n,e)=>{try{let t=indexedDB.open(Yj,Xj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Tv,{keyPath:"compositeKey"})}}}catch(t){e(Fi.create("storage-open",{originalErrorMessage:t?.message}))}}),bf)}function Zj(n,e){return e3(t3(n),e)}function e3(n,e){return M(this,null,function*(){let r=(yield Jj()).transaction(Tv,"readwrite"),o=r.objectStore(Tv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Fi.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function t3(n){return`${n.options.appId}-${n.name}`}var Av=new Gl("@firebase/app-check");function Cv(n,e){return Hl()?Zj(n,e).catch(t=>{Av.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function V1(){return P1().enabled}function L1(){return M(this,null,function*(){let n=P1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var n3={error:"UNKNOWN_ERROR"};function r3(n){return wD.encodeString(JSON.stringify(n),!1)}function Sv(n,e=!1){return M(this,null,function*(){let t=n.app;U1(t);let r=Gn(t),i=r.token,o;if(i&&!Au(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Au(c)?i=c:yield Cv(t,void 0))}if(!e&&i&&Au(i))return{token:i.token};let s=!1;if(V1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=k1(O1(t,yield L1()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Cv(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Gn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Av.warn(c.message):Av.error(c),o=c}let a;return i?o?Au(i)?a={token:i.token,internalError:o}:a=x1(o):(a={token:i.token},r.token=i,yield Cv(t,i)):a=x1(o),s&&a3(t,a),a})}function i3(n){return M(this,null,function*(){let e=n.app;U1(e);let{provider:t}=Gn(e);if(V1()){let r=yield L1(),{token:i}=yield k1(O1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function o3(n,e,t,r){let{app:i}=n,o=Gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Au(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),M1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>M1(n))}function B1(n,e){let t=Gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function M1(n){let{app:e}=n,t=Gn(e),r=t.tokenRefresher;r||(r=s3(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s3(n){let{app:e}=n;return new bv(()=>M(this,null,function*(){let t=Gn(e),r;if(t.token?r=yield Sv(n,!0):r=yield Sv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},S1.RETRIAL_MIN_WAIT,S1.RETRIAL_MAX_WAIT)}function a3(n,e){let t=Gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Au(n){return n.expireTimeMillis-Date.now()>0}function x1(n){return{token:r3(n3),error:n}}var Mv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Gn(this.app);for(let t of e)B1(this.app,t.next);return Promise.resolve()}};function c3(n,e){return new Mv(n,e)}function u3(n){return{getToken:e=>Sv(n,e),getLimitedUseToken:()=>i3(n),addTokenListener:e=>o3(n,"INTERNAL",e),removeTokenListener:e=>B1(n.app,e)}}var l3="@firebase/app-check",d3="0.8.8";var h3="app-check",F1="app-check-internal";function f3(){ao(new Fn(h3,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return c3(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(F1).initialize()})),ao(new Fn(F1,n=>{let e=n.getProvider("app-check").getImmediate();return u3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Rn(l3,d3)}f3();var p3=["localhost","0.0.0.0","127.0.0.1"],YK=typeof window<"u"&&p3.includes(window.location.hostname);var g3="firebase",m3="10.14.1";Vt.registerVersion(g3,m3,"app-compat");var y3=["ngOnDestroy"],$1=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(y3.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Tf=class{constructor(e){return e}},Ri=new q("angularfire2.app.options"),Ni=new q("angularfire2.app.name");function Uo(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Vt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Vt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;v3("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Tf(s)}var v3=(n,...e)=>{s0()&&typeof console<"u"&&console[n](...e)},_3={provide:Tf,useFactory:Uo,deps:[Ri,me,[new Bs,Ni]]},q1=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ri,useValue:t},{provide:Ni,useValue:r}]}}constructor(t){Vt.registerVersion("angularfire",ra.full,"core"),Vt.registerVersion("angularfire",ra.full,"app-compat"),Vt.registerVersion("angular",$T.full,t.toString())}static \u0275fac=function(r){return new(r||n)(P(bt))};static \u0275mod=Je({type:n});static \u0275inj=Xe({providers:[_3]})}return n})();function oa(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return w3(i,s)||(j1("error",`${e} was already initialized on the ${t} Firebase App with different settings.${E3?" You may need to reload as Firebase is not HMR aware.":""}`),j1("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function w3(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var E3=typeof module<"u"&&!!module.hot,j1=(n,...e)=>{s0()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Fv=new q("angularfire2.auth.use-emulator"),Rv=new q("angularfire2.auth.settings"),Nv=new q("angularfire2.auth.tenant-id"),Pv=new q("angularfire2.auth.langugage-code"),Uv=new q("angularfire2.auth.use-device-language"),kv=new q("angularfire.auth.persistence"),Ov=(n,e,t,r,i,o,s,a)=>oa(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),sa=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,d,f,g,y){let I=new Ye,C=ne(void 0).pipe(dn(s.outsideAngular),Ne(()=>o.runOutsideAngular(()=>import("./chunk-6LKVFXJY.js"))),Z(()=>Uo(t,o,r)),Z(b=>Ov(b,o,a,l,d,f,c,g)),wd({bufferSize:1,refCount:!1}));if(Ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ne(null);else{C.pipe(wn()).subscribe();let b=C.pipe(Ne(N=>N.getRedirectResult().then(j=>j,()=>null)),xt,wd({bufferSize:1,refCount:!1})),U=C.pipe(Ne(N=>new he(j=>({unsubscribe:o.runOutsideAngular(()=>N.onAuthStateChanged(re=>j.next(re),re=>j.error(re),()=>j.complete()))})))),H=C.pipe(Ne(N=>new he(j=>({unsubscribe:o.runOutsideAngular(()=>N.onIdTokenChanged(re=>j.next(re),re=>j.error(re),()=>j.complete()))}))));this.authState=b.pipe(Ed(U),Pn(s.outsideAngular),dn(s.insideAngular)),this.user=b.pipe(Ed(H),Pn(s.outsideAngular),dn(s.insideAngular)),this.idToken=this.user.pipe(Ne(N=>N?pe(N.getIdToken()):ne(null))),this.idTokenResult=this.user.pipe(Ne(N=>N?pe(N.getIdTokenResult()):ne(null))),this.credential=dm(b,I,this.authState.pipe(wt(N=>!N))).pipe(Z(N=>N?.user?N:null),Pn(s.outsideAngular),dn(s.insideAngular))}return $1(this,C,o,{spy:{apply:(b,U,H)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&H.then(N=>I.next(N))}}})}static \u0275fac=function(r){return new(r||n)(P(Ri),P(Ni,8),P(bt),P(me),P(ia),P(Fv,8),P(Rv,8),P(Nv,8),P(Pv,8),P(Uv,8),P(kv,8),P(zr,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function I3(n,e){n&1&&(V(0,"div",9),J(1,"Create"),L())}function D3(n,e){n&1&&(V(0,"div",10),J(1,"Register"),L())}function C3(n,e){n&1&&(V(0,"div",11),J(1,"Login"),L())}function b3(n,e){if(n&1&&(V(0,"div",12)(1,"span"),J(2),L()()),n&2){let t=fn();oe(2),Zt("Hello, ",t.userEmail,"")}}function T3(n,e){n&1&&(V(0,"div")(1,"span"),J(2,"Hello, Guest"),L()())}function A3(n,e){if(n&1){let t=Ah();V(0,"div",13),it("click",function(){zc(t);let i=fn();return Gc(i.logout())}),J(1,"Sign Out"),L()}}var H1=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r,this.userEmail=null,this.isLoggedIn=!1}ngOnInit(){this.fireauth.authState.subscribe(t=>{t?(this.userEmail=t.email,this.isLoggedIn=!0):(this.userEmail=null,this.isLoggedIn=!1)})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),localStorage.removeItem("currentUser"),localStorage.removeItem("userInfo"),alert("You are logged out"),this.router.navigate(["/"])},t=>{alert(t.message)})}static{this.\u0275fac=function(r){return new(r||n)(X(sa),X(gt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-navigation"]],decls:11,vars:6,consts:[["id","wrapper"],["routerLink","/",1,"nav-btn"],["routerLink","/catalog",1,"nav-btn"],["class","nav-btn","routerLink","/create",4,"ngIf"],["class","nav-btn","routerLink","/register",4,"ngIf"],["class","nav-btn","routerLink","/login",4,"ngIf"],["class","nav-btn","routerLink","/profile",4,"ngIf"],[4,"ngIf"],["class","nav-btn",3,"click",4,"ngIf"],["routerLink","/create",1,"nav-btn"],["routerLink","/register",1,"nav-btn"],["routerLink","/login",1,"nav-btn"],["routerLink","/profile",1,"nav-btn"],[1,"nav-btn",3,"click"]],template:function(r,i){r&1&&(V(0,"nav",0)(1,"div",1),J(2,"Home"),L(),V(3,"div",2),J(4,"Catalog"),L(),hn(5,I3,2,0,"div",3)(6,D3,2,0,"div",4)(7,C3,2,0,"div",5)(8,b3,3,1,"div",6)(9,T3,3,0,"div",7)(10,A3,2,0,"div",8),L()),r&2&&(oe(5),Ze("ngIf",i.userEmail),oe(),Ze("ngIf",!i.userEmail),oe(),Ze("ngIf",!i.userEmail),oe(),Ze("ngIf",i.userEmail),oe(),Ze("ngIf",!i.userEmail),oe(),Ze("ngIf",i.userEmail))},dependencies:[Di,Df],styles:['@font-face{font-family:Emilys Candy;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/emilyscandy/v19/2EbgL-1mD1Rnb0OGKudbk0yJptZqb84.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Emilys Candy;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/emilyscandy/v19/2EbgL-1mD1Rnb0OGKudbk0yJqNZq.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalnia Glaze;font-style:normal;font-weight:100 700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/kalniaglaze/v1/wlpjgwHCBUNjrGrfu-hwowN1YyC-42Lu26VHf2LtEEIAhqSP.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalnia Glaze;font-style:normal;font-weight:100 700;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/kalniaglaze/v1/wlpjgwHCBUNjrGrfu-hwowN1YyC-42Lu26VHf2LtEEwAhg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-kalniaglaze:none}#wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;font-size:55px;left:0;right:0;gap:30px;font-family:Emilys Candy,serif;font-weight:600;font-style:normal;color:#00008b;text-shadow:3px 3px white}#wrapper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{scale:1.2;cursor:pointer}img[_ngcontent-%COMP%]{margin-top:16px;width:60px;height:60px}']})}}return n})();var z1=(()=>{class n{constructor(){this.title="my-first-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[["id","wrapper"]],template:function(r,i){r&1&&(V(0,"div",0),qn(1,"app-navigation")(2,"router-outlet"),L())},dependencies:[fv,H1],styles:["#wrapper[_ngcontent-%COMP%]{margin:0;padding:0}"]})}}return n})();var G1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-home"]],decls:9,vars:0,consts:[[1,"home"],[1,"home-container"],[1,"text"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),J(4,"Welcome to FitBuddy"),qn(5,"br"),J(6," Your Source for Premium Fitness Appliances"),L(),V(7,"p"),J(8,"Browse our collection now and take the first step towards a healthier, fitter you. With premium fitness appliances from FitBuddy, you can turn your home gym dreams into reality. Let's make your fitness goals a reality together!"),L()()()())},styles:['.home-container[_ngcontent-%COMP%]{background-image:url("./media/Fitness_gym_image_16_9-KR3H2XIE.png");background-size:cover;background-position:center;background-repeat:no-repeat;width:100vw;height:100vh;text-align:center;display:flex;align-items:center;justify-content:center;flex-direction:column;font-family:Roboto Slab,serif;color:#f5f5f5;text-shadow:2px 2px black}.home-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50vw;font-size:18px}.text[_ngcontent-%COMP%]{background-color:#020406cc;padding:20px;border-radius:20px;box-shadow:3px 3px #000}']})}}return n})();var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K1={};var Pi,Lv;(function(){var n;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(D,T,S){for(var w=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)w[Sr-2]=arguments[Sr];return v.prototype[T].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;16>T;++T)D[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],T=E.g[2];var S=E.g[3],w=v+(S^_&(T^S))+D[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+D[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+D[3]+3250441966&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+D[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+D[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+D[7]+4249261313&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+D[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+D[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+D[11]+2304563134&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(S^_&(T^S))+D[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=S+(T^v&(_^T))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(_^S&(v^_))+D[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(v^T&(S^v))+D[15]+1236535329&4294967295,_=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(_^T))+D[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+D[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+D[0]+3921069994&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+D[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+D[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+D[4]+3889429448&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+D[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+D[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+D[8]+1163531501&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(_^T))+D[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(v^_))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^_&(S^v))+D[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^v&(T^S))+D[12]+2368359562&4294967295,_=T+(w<<20&4294967295|w>>>12),w=v+(_^T^S)+D[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+D[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+D[14]+4259657740&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+D[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+D[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+D[10]+3200236656&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+D[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+D[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+D[6]+76029189&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(_^T^S)+D[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=S+(v^_^T)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^_)+D[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^v)+D[2]+3299628645&4294967295,_=T+(w<<23&4294967295|w>>>9),w=v+(T^(_|~S))+D[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+D[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+D[5]+4237533241&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+D[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+D[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+D[1]+2240044497&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+D[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+D[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+D[13]+1309151649&4294967295,_=T+(w<<21&4294967295|w>>>11),w=v+(T^(_|~S))+D[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=S+(_^(v|~T))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~_))+D[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,D=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=_;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(D[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,D),T=0;break}}else for(;S<v;)if(D[T++]=E[S++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var D=0;32>D;D+=8)E[_++]=this.g[v]>>>D&255;return E};function o(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function s(E,v){this.h=v;for(var _=[],D=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;D&&S==v||(_[T]=S,D=!1)}this.g=_}var a={};function c(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(l(-E));for(var v=[],_=1,D=0;E>=_;D++)v[D]=E/_|0,_*=4294967296;return new s(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return b(d(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),D=f,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),w=parseInt(E.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(_),D=D.add(l(w)))}return D}var f=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(C(this))return-b(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var D=this.i(_);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(C(this))return"-"+b(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,D="";;){var T=j(_,v).g;_=U(_,T.j(v));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=T,I(_))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function C(E){return E.h==-1}n.l=function(E){return E=U(this,E),C(E)?-1:I(E)?0:1};function b(E){for(var v=E.g.length,_=[],D=0;D<v;D++)_[D]=~E.g[D];return new s(_,~E.h).add(g)}n.abs=function(){return C(this)?b(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0,T=0;T<=v;T++){var S=D+(this.i(T)&65535)+(E.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);D=w>>>16,S&=65535,w&=65535,_[T]=w<<16|S}return new s(_,_[_.length-1]&-2147483648?-1:0)};function U(E,v){return E.add(b(v))}n.j=function(E){if(I(this)||I(E))return f;if(C(this))return C(E)?b(this).j(b(E)):b(b(this).j(E));if(C(E))return b(this.j(b(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],D=0;D<2*v;D++)_[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<E.g.length;T++){var S=this.i(D)>>>16,w=this.i(D)&65535,Sr=E.i(T)>>>16,sc=E.i(T)&65535;_[2*D+2*T]+=w*sc,H(_,2*D+2*T),_[2*D+2*T+1]+=S*sc,H(_,2*D+2*T+1),_[2*D+2*T+1]+=w*Sr,H(_,2*D+2*T+1),_[2*D+2*T+2]+=S*Sr,H(_,2*D+2*T+2)}for(D=0;D<v;D++)_[D]=_[2*D+1]<<16|_[2*D];for(D=v;D<2*v;D++)_[D]=0;return new s(_,0)};function H(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function N(E,v){this.g=E,this.h=v}function j(E,v){if(I(v))throw Error("division by zero");if(I(E))return new N(f,f);if(C(E))return v=j(b(E),v),new N(b(v.g),b(v.h));if(C(v))return v=j(E,b(v)),new N(b(v.g),v.h);if(30<E.g.length){if(C(E)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,D=v;0>=D.l(E);)_=re(_),D=re(D);var T=Y(_,1),S=Y(D,1);for(D=Y(D,2),_=Y(_,2);!I(D);){var w=S.add(D);0>=w.l(E)&&(T=T.add(_),S=w),D=Y(D,1),_=Y(_,1)}return v=U(E,T.j(v)),new N(T,v)}for(T=f;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(_)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(_),w=S.j(v);C(w)||0<w.l(E);)_-=D,S=l(_),w=S.j(v);I(S)&&(S=g),T=T.add(S),E=U(E,w)}return new N(T,E)}n.A=function(E){return j(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)&E.i(D);return new s(_,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)|E.i(D);return new s(_,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)^E.i(D);return new s(_,this.h^E.h)};function re(E){for(var v=E.g.length+1,_=[],D=0;D<v;D++)_[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(_,E.h)}function Y(E,v){var _=v>>5;v%=32;for(var D=E.g.length-_,T=[],S=0;S<D;S++)T[S]=0<v?E.i(S+_)>>>v|E.i(S+_+1)<<32-v:E.i(S+_);return new s(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lv=K1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Pi=K1.Integer=s}).apply(typeof W1<"u"?W1:typeof self<"u"?self:typeof window<"u"?window:{});var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gr={};var Bv,M3,aa,jv,Su,Sf,$v,qv,Hv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Af=="object"&&Af];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var A=u[m];if(!(A in p))break e;p=p[A]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,m=!1,A={next:function(){if(!m&&p<u.length){var F=p++;return{value:h(F,u[F]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),u.apply(h,A)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,A,F){for(var $=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)$[Re-2]=arguments[Re];return h.prototype[A].apply(m,$)}}function C(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function b(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let A=u.length||0,F=m.length||0;u.length=A+F;for(let $=0;$<F;$++)u[A+$]=m[$]}else u.push(m)}}class U{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function H(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var re=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function Y(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function E(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(p in m)u[p]=m[p];for(let F=0;F<_.length;F++)p=_[F],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function T(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=vg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Sr{constructor(){this.h=this.g=null}add(h,p){let m=sc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var sc=new U(()=>new WR,u=>u.reset());class WR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ac,cc=!1,vg=new Sr,mI=()=>{let u=a.Promise.resolve(void 0);ac=()=>{u.then(KR)}};var KR=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){S(p)}var h=sc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}cc=!1};function ri(){this.s=this.s,this.C=this.C}ri.prototype.s=!1,ri.prototype.ma=function(){this.s||(this.s=!0,this.N())},ri.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var QR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function uc(u,h){if(Pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(re){e:{try{j(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:YR[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&uc.aa.h.call(this)}}I(uc,Pt);var YR={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),XR=0;function JR(u,h,p,m,A){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=A,this.key=++XR,this.da=this.fa=!1}function bl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tl(u){this.src=u,this.g={},this.h=0}Tl.prototype.add=function(u,h,p,m,A){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var $=wg(u,h,m,A);return-1<$?(h=u[$],p||(h.fa=!1)):(h=new JR(h,this.src,F,!!m,A),h.fa=p,u.push(h)),h};function _g(u,h){var p=h.type;if(p in u.g){var m=u.g[p],A=Array.prototype.indexOf.call(m,h,void 0),F;(F=0<=A)&&Array.prototype.splice.call(m,A,1),F&&(bl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function wg(u,h,p,m){for(var A=0;A<u.length;++A){var F=u[A];if(!F.da&&F.listener==h&&F.capture==!!p&&F.ha==m)return A}return-1}var Eg="closure_lm_"+(1e6*Math.random()|0),Ig={};function yI(u,h,p,m,A){if(m&&m.once)return _I(u,h,p,m,A);if(Array.isArray(h)){for(var F=0;F<h.length;F++)yI(u,h[F],p,m,A);return null}return p=Tg(p),u&&u[lc]?u.K(h,p,l(m)?!!m.capture:!!m,A):vI(u,h,p,!1,m,A)}function vI(u,h,p,m,A,F){if(!h)throw Error("Invalid event type");var $=l(A)?!!A.capture:!!A,Re=Cg(u);if(Re||(u[Eg]=Re=new Tl(u)),p=Re.add(h,p,m,$,F),p.proxy)return p;if(m=ZR(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)QR||(A=$),A===void 0&&(A=!1),u.addEventListener(h.toString(),m,A);else if(u.attachEvent)u.attachEvent(EI(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ZR(){function u(p){return h.call(u.src,u.listener,p)}let h=eN;return u}function _I(u,h,p,m,A){if(Array.isArray(h)){for(var F=0;F<h.length;F++)_I(u,h[F],p,m,A);return null}return p=Tg(p),u&&u[lc]?u.L(h,p,l(m)?!!m.capture:!!m,A):vI(u,h,p,!0,m,A)}function wI(u,h,p,m,A){if(Array.isArray(h))for(var F=0;F<h.length;F++)wI(u,h[F],p,m,A);else m=l(m)?!!m.capture:!!m,p=Tg(p),u&&u[lc]?(u=u.i,h=String(h).toString(),h in u.g&&(F=u.g[h],p=wg(F,p,m,A),-1<p&&(bl(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete u.g[h],u.h--)))):u&&(u=Cg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=wg(h,p,m,A)),(p=-1<u?h[u]:null)&&Dg(p))}function Dg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[lc])_g(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(EI(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Cg(h))?(_g(p,u),p.h==0&&(p.src=null,h[Eg]=null)):bl(u)}}}function EI(u){return u in Ig?Ig[u]:Ig[u]="on"+u}function eN(u,h){if(u.da)u=!0;else{h=new uc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Dg(u),u=p.call(m,h)}return u}function Cg(u){return u=u[Eg],u instanceof Tl?u:null}var bg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tg(u){return typeof u=="function"?u:(u[bg]||(u[bg]=function(h){return u.handleEvent(h)}),u[bg])}function Ut(){ri.call(this),this.i=new Tl(this),this.M=this,this.F=null}I(Ut,ri),Ut.prototype[lc]=!0,Ut.prototype.removeEventListener=function(u,h,p,m){wI(this,u,h,p,m)};function Gt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Pt(h,u);else if(h instanceof Pt)h.target=h.target||u;else{var A=h;h=new Pt(m,u),D(h,A)}if(A=!0,p)for(var F=p.length-1;0<=F;F--){var $=h.g=p[F];A=Al($,m,!0,h)&&A}if($=h.g=u,A=Al($,m,!0,h)&&A,A=Al($,m,!1,h)&&A,p)for(F=0;F<p.length;F++)$=h.g=p[F],A=Al($,m,!1,h)&&A}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)bl(p[m]);delete u.g[h],u.h--}}this.F=null},Ut.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Ut.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Al(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,F=0;F<h.length;++F){var $=h[F];if($&&!$.da&&$.capture==p){var Re=$.listener,At=$.ha||$.src;$.fa&&_g(u.i,$),A=Re.call(At,m)!==!1&&A}}return A&&!m.defaultPrevented}function II(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function DI(u){u.g=II(()=>{u.g=null,u.i&&(u.i=!1,DI(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class tN extends ri{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:DI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dc(u){ri.call(this),this.h=u,this.g={}}I(dc,ri);var CI=[];function bI(u){Y(u.g,function(h,p){this.g.hasOwnProperty(p)&&Dg(h)},u),u.g={}}dc.prototype.N=function(){dc.aa.N.call(this),bI(this)},dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ag=a.JSON.stringify,nN=a.JSON.parse,rN=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Sg(){}Sg.prototype.h=null;function TI(u){return u.h||(u.h=u.i())}function AI(){}var hc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mg(){Pt.call(this,"d")}I(Mg,Pt);function xg(){Pt.call(this,"c")}I(xg,Pt);var ro={},SI=null;function Sl(){return SI=SI||new Ut}ro.La="serverreachability";function MI(u){Pt.call(this,ro.La,u)}I(MI,Pt);function fc(u){let h=Sl();Gt(h,new MI(h))}ro.STAT_EVENT="statevent";function xI(u,h){Pt.call(this,ro.STAT_EVENT,u),this.stat=h}I(xI,Pt);function Wt(u){let h=Sl();Gt(h,new xI(h,u))}ro.Ma="timingevent";function FI(u,h){Pt.call(this,ro.Ma,u),this.size=h}I(FI,Pt);function pc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function gc(){this.g=!0}gc.prototype.xa=function(){this.g=!1};function iN(u,h,p,m,A,F){u.info(function(){if(u.g)if(F)for(var $="",Re=F.split("&"),At=0;At<Re.length;At++){var be=Re[At].split("=");if(1<be.length){var kt=be[0];be=be[1];var Ot=kt.split("_");$=2<=Ot.length&&Ot[1]=="type"?$+(kt+"="+be+"&"):$+(kt+"=redacted&")}}else $=null;else $=F;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+h+`
`+p+`
`+$})}function oN(u,h,p,m,A,F,$){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+h+`
`+p+`
`+F+" "+$})}function ls(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+aN(u,p)+(m?" "+m:"")})}function sN(u,h){u.info(function(){return"TIMEOUT: "+h})}gc.prototype.info=function(){};function aN(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(var $=1;$<A.length;$++)A[$]=""}}}}return Ag(p)}catch{return h}}var Ml={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},RI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fg;function xl(){}I(xl,Sg),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},Fg=new xl;function ii(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new NI}function NI(){this.i=null,this.g="",this.h=!1}var PI={},Rg={};function Ng(u,h,p){u.L=1,u.v=Pl(Mr(h)),u.m=p,u.P=!0,UI(u,null)}function UI(u,h){u.F=Date.now(),Fl(u),u.A=Mr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),QI(p.i,"t",m),u.C=0,p=u.j.J,u.h=new NI,u.g=fD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new tN(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(CI[0]=A.toString()),A=CI);for(var F=0;F<A.length;F++){var $=yI(p,A[F],m||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),fc(),iN(u.i,u.u,u.A,u.l,u.R,u.m)}ii.prototype.ca=function(u){u=u.target;let h=this.M;h&&xr(u)==3?h.j():this.Y(u)},ii.prototype.Y=function(u){try{if(u==this.g)e:{let Ot=xr(this.g);var h=this.g.Ba();let fs=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||nD(this.g)))){this.J||Ot!=4||h==7||(h==8||0>=fs?fc(3):fc(2)),Pg(this);var p=this.g.Z();this.X=p;t:if(kI(this)){var m=nD(this.g);u="";var A=m.length,F=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){io(this),mc(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(F&&h==A-1)});m.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,oN(this.i,this.u,this.A,this.l,this.R,Ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,At=this.g;if((Re=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Re)){var be=Re;break t}}be=null}if(p=be)ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ug(this,p);else{this.o=!1,this.s=3,Wt(12),io(this),mc(this);break e}}if(this.P){p=!0;let xn;for(;!this.J&&this.C<$.length;)if(xn=cN(this,$),xn==Rg){Ot==4&&(this.s=4,Wt(14),p=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(xn==PI){this.s=4,Wt(15),ls(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else ls(this.i,this.l,xn,null),Ug(this,xn);if(kI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||$.length!=0||this.h.h||(this.s=1,Wt(16),p=!1),this.o=this.o&&p,!p)ls(this.i,this.l,$,"[Invalid Chunked Response]"),io(this),mc(this);else if(0<$.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),jg(kt),kt.M=!0,Wt(11))}}else ls(this.i,this.l,$,null),Ug(this,$);Ot==4&&io(this),this.o&&!this.J&&(Ot==4?uD(this.j,this):(this.o=!1,Fl(this)))}else bN(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),io(this),mc(this)}}}catch{}finally{}};function kI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function cN(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Rg:(p=Number(h.substring(p,m)),isNaN(p)?PI:(m+=1,m+p>h.length?Rg:(h=h.slice(m,m+p),u.C=m+p,h)))}ii.prototype.cancel=function(){this.J=!0,io(this)};function Fl(u){u.S=Date.now()+u.I,OI(u,u.I)}function OI(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pc(g(u.ba,u),h)}function Pg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ii.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(sN(this.i,this.A),this.L!=2&&(fc(),Wt(17)),io(this),this.s=2,mc(this)):OI(this,this.S-u)};function mc(u){u.j.G==0||u.J||uD(u.j,u)}function io(u){Pg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,bI(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Ug(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||kg(p.h,u))){if(!u.K&&kg(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Ll(p),Ol(p);else break e;Bg(p),Wt(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=pc(g(p.Za,p),6e3));if(1>=BI(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else so(p,11)}else if((u.K||p.g==u)&&Ll(p),!H(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let be=A[h];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];let kt=be[3];kt!=null&&(p.la=kt,p.j.info("VER="+p.la));let Ot=be[4];Ot!=null&&(p.Aa=Ot,p.j.info("SVER="+p.Aa));let fs=be[5];fs!=null&&typeof fs=="number"&&0<fs&&(m=1.5*fs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let xn=u.g;if(xn){let jl=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var F=m.h;F.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Og(F,F.h),F.h=null))}if(m.D){let $g=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;$g&&(m.ya=$g,Be(m.I,m.D,$g))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var $=u;if(m.qa=hD(m,m.J?m.ia:null,m.W),$.K){jI(m.h,$);var Re=$,At=m.L;At&&(Re.I=At),Re.B&&(Pg(Re),Fl(Re)),m.g=$}else aD(m);0<p.i.length&&Vl(p)}else be[0]!="stop"&&be[0]!="close"||so(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?so(p,7):Lg(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}fc(4)}catch{}}var uN=class{constructor(u,h){this.g=u,this.map=h}};function VI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function LI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function BI(u){return u.h?1:u.g?u.g.size:0}function kg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Og(u,h){u.g?u.g.add(h):u.h=h}function jI(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}VI.prototype.cancel=function(){if(this.i=$I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function $I(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return C(u.i)}function lN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function dN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function qI(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=dN(u),m=lN(u),A=m.length,F=0;F<A;F++)h.call(void 0,m[F],p&&p[F],u)}var HI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hN(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),A=null;if(0<=m){var F=u[p].substring(0,m);A=u[p].substring(m+1)}else F=u[p];h(F,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function oo(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof oo){this.h=u.h,Rl(this,u.j),this.o=u.o,this.g=u.g,Nl(this,u.s),this.l=u.l;var h=u.i,p=new _c;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),zI(this,p),this.m=u.m}else u&&(h=String(u).match(HI))?(this.h=!1,Rl(this,h[1]||"",!0),this.o=yc(h[2]||""),this.g=yc(h[3]||"",!0),Nl(this,h[4]),this.l=yc(h[5]||"",!0),zI(this,h[6]||"",!0),this.m=yc(h[7]||"")):(this.h=!1,this.i=new _c(null,this.h))}oo.prototype.toString=function(){var u=[],h=this.j;h&&u.push(vc(h,GI,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(vc(h,GI,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(vc(p,p.charAt(0)=="/"?gN:pN,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",vc(p,yN)),u.join("")};function Mr(u){return new oo(u)}function Rl(u,h,p){u.j=p?yc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Nl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function zI(u,h,p){h instanceof _c?(u.i=h,vN(u.i,u.h)):(p||(h=vc(h,mN)),u.i=new _c(h,u.h))}function Be(u,h,p){u.i.set(h,p)}function Pl(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function yc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function vc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,fN),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var GI=/[#\/\?@]/g,pN=/[#\?:]/g,gN=/[#\?]/g,mN=/[#\?@]/g,yN=/#/g;function _c(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function oi(u){u.g||(u.g=new Map,u.h=0,u.i&&hN(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=_c.prototype,n.add=function(u,h){oi(this),this.i=null,u=ds(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function WI(u,h){oi(u),h=ds(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function KI(u,h){return oi(u),h=ds(u,h),u.g.has(h)}n.forEach=function(u,h){oi(this),this.g.forEach(function(p,m){p.forEach(function(A){u.call(h,A,m,this)},this)},this)},n.na=function(){oi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let A=u[m];for(let F=0;F<A.length;F++)p.push(h[m])}return p},n.V=function(u){oi(this);let h=[];if(typeof u=="string")KI(this,u)&&(h=h.concat(this.g.get(ds(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return oi(this),this.i=null,u=ds(this,u),KI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function QI(u,h,p){WI(u,h),0<p.length&&(u.i=null,u.g.set(ds(u,h),C(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let F=encodeURIComponent(String(m)),$=this.V(m);for(m=0;m<$.length;m++){var A=F;$[m]!==""&&(A+="="+encodeURIComponent(String($[m]))),u.push(A)}}return this.i=u.join("&")};function ds(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function vN(u,h){h&&!u.j&&(oi(u),u.i=null,u.g.forEach(function(p,m){var A=m.toLowerCase();m!=A&&(WI(this,m),QI(this,A,p))},u)),u.j=h}function _N(u,h){let p=new gc;if(a.Image){let m=new Image;m.onload=y(si,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(si,p,"TestLoadImage: error",!1,h,m),m.onabort=y(si,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(si,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function wN(u,h){let p=new gc,m=new AbortController,A=setTimeout(()=>{m.abort(),si(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(F=>{clearTimeout(A),F.ok?si(p,"TestPingServer: ok",!0,h):si(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),si(p,"TestPingServer: error",!1,h)})}function si(u,h,p,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(p)}catch{}}function EN(){this.g=new rN}function IN(u,h,p){let m=p||"";try{qI(u,function(A,F){let $=A;l(A)&&($=Ag(A)),h.push(m+F+"="+encodeURIComponent($))})}catch(A){throw h.push(m+"type="+encodeURIComponent("_badmap")),A}}function wc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(wc,Sg),wc.prototype.g=function(){return new Ul(this.l,this.j)},wc.prototype.i=function(u){return function(){return u}}({});function Ul(u,h){Ut.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Ul,Ut),n=Ul.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ic(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ec(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function YI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Ec(this):Ic(this),this.readyState==3&&YI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ec(this))},n.Qa=function(u){this.g&&(this.response=u,Ec(this))},n.ga=function(){this.g&&Ec(this)};function Ec(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ic(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Ic(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function XI(u){let h="";return Y(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Vg(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=XI(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Be(u,h,p))}function Qe(u){Ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Qe,Ut);var DN=/^https?$/i,CN=["POST","PUT"];n=Qe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fg.g(),this.v=this.o?TI(this.o):TI(Fg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(F){JI(this,F);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)p.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let F of m.keys())p.set(F,m.get(F));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CN,h,void 0))||m||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,$]of p)this.g.setRequestHeader(F,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tD(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){JI(this,F)}};function JI(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,ZI(u),kl(u)}function ZI(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Gt(this,"complete"),Gt(this,"abort"),kl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kl(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eD(this):this.bb())},n.bb=function(){eD(this)};function eD(u){if(u.h&&typeof s<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)II(u.Ea,0,u);else if(Gt(u,"readystatechange"),xr(u)==4){u.h=!1;try{let $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=$===0){var A=String(u.D).match(HI)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),m=!DN.test(A?A.toLowerCase():"")}p=m}if(p)Gt(u,"complete"),Gt(u,"success");else{u.m=6;try{var F=2<xr(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",ZI(u)}}finally{kl(u)}}}}function kl(u,h){if(u.g){tD(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Gt(u,"ready");try{p.onreadystatechange=m}catch{}}}function tD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),nN(h)}};function nD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bN(u){let h={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(H(u[m]))continue;var p=T(u[m]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let F=h[A]||[];h[A]=F,F.push(p)}E(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function rD(u){this.Aa=0,this.i=[],this.j=new gc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dc("baseRetryDelayMs",5e3,u),this.cb=Dc("retryDelaySeedMs",1e4,u),this.Wa=Dc("forwardChannelMaxRetries",2,u),this.wa=Dc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new VI(u&&u.concurrentRequestLimit),this.Da=new EN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rD.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){Wt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=hD(this,null,this.W),Vl(this)};function Lg(u){if(iD(u),u.G==3){var h=u.U++,p=Mr(u.I);if(Be(p,"SID",u.K),Be(p,"RID",h),Be(p,"TYPE","terminate"),Cc(u,p),h=new ii(u,u.j,h),h.L=2,h.v=Pl(Mr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=fD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Fl(h)}dD(u)}function Ol(u){u.g&&(jg(u),u.g.cancel(),u.g=null)}function iD(u){Ol(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ll(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Vl(u){if(!LI(u.h)&&!u.s){u.s=!0;var h=u.Ga;ac||mI(),cc||(ac(),cc=!0),vg.add(h,u),u.B=0}}function TN(u,h){return BI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pc(g(u.Ga,u,h),lD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new ii(this,this.j,u),F=this.o;if(this.S&&(F?(F=v(F),D(F,this.S)):F=this.S),this.m!==null||this.O||(A.H=F,F=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=sD(this,A,h),p=Mr(this.I),Be(p,"RID",u),Be(p,"CVER",22),this.D&&Be(p,"X-HTTP-Session-Id",this.D),Cc(this,p),F&&(this.O?h="headers="+encodeURIComponent(String(XI(F)))+"&"+h:this.m&&Vg(p,this.m,F)),Og(this.h,A),this.Ua&&Be(p,"TYPE","init"),this.P?(Be(p,"$req",h),Be(p,"SID","null"),A.T=!0,Ng(A,p,null)):Ng(A,p,h),this.G=2}}else this.G==3&&(u?oD(this,u):this.i.length==0||LI(this.h)||oD(this))};function oD(u,h){var p;h?p=h.l:p=u.U++;let m=Mr(u.I);Be(m,"SID",u.K),Be(m,"RID",p),Be(m,"AID",u.T),Cc(u,m),u.m&&u.o&&Vg(m,u.m,u.o),p=new ii(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=sD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Og(u.h,p),Ng(p,m,h)}function Cc(u,h){u.H&&Y(u.H,function(p,m){Be(h,m,p)}),u.l&&qI({},function(p,m){Be(h,m,p)})}function sD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var A=u.i;let F=-1;for(;;){let $=["count="+p];F==-1?0<p?(F=A[0].g,$.push("ofs="+F)):F=0:$.push("ofs="+F);let Re=!0;for(let At=0;At<p;At++){let be=A[At].g,kt=A[At].map;if(be-=F,0>be)F=Math.max(0,A[At].g-100),Re=!1;else try{IN(kt,$,"req"+be+"_")}catch{m&&m(kt)}}if(Re){m=$.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function aD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;ac||mI(),cc||(ac(),cc=!0),vg.add(h,u),u.v=0}}function Bg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pc(g(u.Fa,u),lD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,cD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Ol(this),cD(this))};function jg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function cD(u){u.g=new ii(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Mr(u.qa);Be(h,"RID","rpc"),Be(h,"SID",u.K),Be(h,"AID",u.T),Be(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(h,"TO",u.ja),Be(h,"TYPE","xmlhttp"),Cc(u,h),u.m&&u.o&&Vg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Pl(Mr(h)),p.m=null,p.P=!0,UI(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Ol(this),Bg(this),Wt(19))};function Ll(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function uD(u,h){var p=null;if(u.g==h){Ll(u),jg(u),u.g=null;var m=2}else if(kg(u.h,h))p=h.D,jI(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=u.B;m=Sl(),Gt(m,new FI(m,p)),Vl(u)}else aD(u);else if(A=h.s,A==3||A==0&&0<h.X||!(m==1&&TN(u,h)||m==2&&Bg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),A){case 1:so(u,5);break;case 4:so(u,10);break;case 3:so(u,6);break;default:so(u,2)}}}function lD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function so(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let A=!m;m=new oo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rl(m,"https"),Pl(m),A?_N(m.toString(),p):wN(m.toString(),p)}else Wt(2);u.G=0,u.l&&u.l.sa(h),dD(u),iD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function dD(u){if(u.G=0,u.ka=[],u.l){let h=$I(u.h);(h.length!=0||u.i.length!=0)&&(b(u.ka,h),b(u.ka,u.i),u.h.i.length=0,C(u.i),u.i.length=0),u.l.ra()}}function hD(u,h,p){var m=p instanceof oo?Mr(p):new oo(p);if(m.g!="")h&&(m.g=h+"."+m.g),Nl(m,m.s);else{var A=a.location;m=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var F=new oo(null);m&&Rl(F,m),h&&(F.g=h),A&&Nl(F,A),p&&(F.l=p),m=F}return p=u.D,h=u.ya,p&&h&&Be(m,p,h),Be(m,"VER",u.la),Cc(u,m),m}function fD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Qe(new wc({eb:p})):new Qe(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pD(){}n=pD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Bl(){}Bl.prototype.g=function(u,h){return new ln(u,h)};function ln(u,h){Ut.call(this),this.g=new rD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!H(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!H(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new hs(this)}I(ln,Ut),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Lg(this.g)},ln.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ag(u),u=p);h.i.push(new uN(h.Ya++,u)),h.G==3&&Vl(h)},ln.prototype.N=function(){this.g.l=null,delete this.j,Lg(this.g),delete this.g,ln.aa.N.call(this)};function gD(u){Mg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(gD,Mg);function mD(){xg.call(this),this.status=1}I(mD,xg);function hs(u){this.g=u}I(hs,pD),hs.prototype.ua=function(){Gt(this.g,"a")},hs.prototype.ta=function(u){Gt(this.g,new gD(u))},hs.prototype.sa=function(u){Gt(this.g,new mD)},hs.prototype.ra=function(){Gt(this.g,"b")},Bl.prototype.createWebChannel=Bl.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Hv=Gr.createWebChannelTransport=function(){return new Bl},qv=Gr.getStatEventTarget=function(){return Sl()},$v=Gr.Event=ro,Sf=Gr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ml.NO_ERROR=0,Ml.TIMEOUT=8,Ml.HTTP_ERROR=6,Su=Gr.ErrorCode=Ml,RI.COMPLETE="complete",jv=Gr.EventType=RI,AI.EventType=hc,hc.OPEN="a",hc.CLOSE="b",hc.ERROR="c",hc.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,aa=Gr.WebChannel=AI,M3=Gr.FetchXmlHttpFactory=wc,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Bv=Gr.XhrIo=Qe}).apply(typeof Af<"u"?Af:typeof self<"u"?self:typeof window<"u"?window:{});var Q1="@firebase/firestore";var vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");var Va="10.14.0";var ji=new Gl("@firebase/firestore");function ha(){return ji.logLevel}function JS(n){ji.setLogLevel(n)}function O(n,...e){if(ji.logLevel<=er.DEBUG){let t=e.map(Qw);ji.debug(`Firestore (${Va}): ${n}`,...t)}}function ot(n,...e){if(ji.logLevel<=er.ERROR){let t=e.map(Qw);ji.error(`Firestore (${Va}): ${n}`,...t)}}function Wn(n,...e){if(ji.logLevel<=er.WARN){let t=e.map(Qw);ji.warn(`Firestore (${Va}): ${n}`,...t)}}function Qw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: `+n;throw ot(e),new Error(e)}function te(n,e){n||Q()}function ZS(n,e){n||Q()}function z(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends zl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vt.UNAUTHENTICATED))}shutdown(){}},Xv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Jv=class{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){te(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Dt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>M(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string"),new Vf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new vt(e)}},Zv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},e_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Zv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},t_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},n_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){te(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(te(typeof t.token=="string"),this.R=t.token,new t_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function F3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Lf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=F3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(n,e){return n<e?-1:n>e?1:0}function Ea(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function eM(n){return n+"\0"}var Ge=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ge(0,0))}static max(){return new n(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(),r===void 0?r=e.length-t:r>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ee=class n extends Bf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},R3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends Bf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return R3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ee.fromString(e))}static fromName(e){return new n(Ee.fromString(e).popFirst(5))}static empty(){return new n(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ee(e.slice()))}};var Ia=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function r_(n){return n.fields.find(e=>e.kind===2)}function Oo(n){return n.fields.filter(e=>e.kind!==2)}Ia.UNKNOWN_ID=-1;var va=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Bu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Sn.min())}};function tM(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ge(t+1,0):new Ge(t,r));return new Sn(i,G.empty(),e)}function nM(n){return new Sn(n.readTime,n.key,-1)}var Sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),G.empty(),-1)}static max(){return new n(ie.max(),G.empty(),-1)}};function Yw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var rM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xi(n){return M(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==rM)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var $f=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Dt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new qo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Xw(r.target.error);this.V.reject(new qo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new qo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new o_(t)}},$i=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(bc())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Vo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hl())return!1;if(n.v())return!0;let e=bc(),t=n.S(e),r=0<t&&t<10,i=iM(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new qo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=$f.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function iM(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var i_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vo(this.B.delete())}},qo=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ji(n){return n.name==="IndexedDbTransactionError"}var o_=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Vo(this.store.add(e))}get(e){return Vo(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Vo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Vo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new x((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new x((r,i)=>{t.onerror=o=>{let s=Xw(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new i_(a),l=t(a.primaryKey,a.value,c);if(l instanceof x){let d=l.catch(f=>(c.done(),x.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>x.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Vo(n){return new x((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Xw(r.target.error);t(i)}})}var Y1=!1;function Xw(n){let e=$i.S(bc());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Y1||(Y1=!0,setTimeout(()=>{throw r},0)),r}}return n}var s_=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ji(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Xi(t)}yield this.X(6e4)}))}},a_=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return x.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=nM(o);Yw(s,r)>0&&(r=s)}),new Sn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var yn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function al(n){return n==null}function ju(n){return n===0&&1/n==-1/0}function oM(n){return typeof n=="number"&&Number.isInteger(n)&&!ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function tn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=X1(e)),e=N3(n.get(t),e);return X1(e)}function N3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function X1(n){return n+""}function fr(n){let e=n.length;if(te(e>=2),e===2)return te(n.charAt(0)===""&&n.charAt(1)===""),Ee.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Q(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Q()}o=s+2}return new Ee(r)}var J1=["userId","batchId"];function Nf(n,e){return[n,tn(e)]}function sM(n,e,t){return[n,tn(e),t]}var P3={},U3=["prefixPath","collectionGroup","readTime","documentId"],k3=["prefixPath","collectionGroup","documentId"],O3=["collectionGroup","readTime","prefixPath","documentId"],V3=["canonicalId","targetId"],L3=["targetId","path"],B3=["path","targetId"],j3=["collectionId","parent"],$3=["indexId","uid"],q3=["uid","sequenceNumber"],H3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],z3=["indexId","uid","orderedDocumentKey"],G3=["userId","collectionPath","documentId"],W3=["userId","collectionPath","largestBatchId"],K3=["userId","collectionGroup","largestBatchId"],aM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Q3=[...aM,"documentOverlays"],cM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uM=cM,Jw=[...uM,"indexConfiguration","indexState","indexEntries"],Y3=Jw,X3=[...Jw,"globals"];var $u=class extends jf{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ct(n,e){let t=z(n);return $i.F(t._e,e)}function Z1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ts(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var $e=class n{constructor(e,t){this.comparator=e,this.root=t||gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}},ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Oe=class n{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qf(this.data.getIterator())}getIteratorFrom(e){return new qf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},qf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ca(n){return n.hasNext()?n.getNext():void 0}var vn=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new Oe(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function dM(){return typeof atob<"u"}var ct=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ct.EMPTY_BYTE_STRING=new ct("");var J3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(n){if(te(!!n),typeof n=="string"){let e=0,t=J3.exec(n);if(te(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}function Up(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zw(n){let e=n.mapValue.fields.__previous_value__;return Up(e)?Zw(e):e}function qu(n){let e=Qr(n.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var c_=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Hi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Li={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pf={nullValue:"NULL_VALUE"};function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Up(n)?4:hM(n)?9007199254740991:kp(n)?10:11:Q()}function vr(n,e){if(n===e)return!0;let t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qu(n).isEqual(qu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qr(i.timestampValue),a=Qr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qi(i.bytesValue).isEqual(qi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?ju(s)===ju(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ea(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Z1(s)!==Z1(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vr(s[c],a[c])))return!1;return!0}(n,e);default:return Q()}}function Hu(n,e){return(n.values||[]).find(t=>vr(t,e))!==void 0}function zi(n,e){if(n===e)return 0;let t=Ho(n),r=Ho(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),c=He(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return eS(n.timestampValue,e.timestampValue);case 4:return eS(qu(n),qu(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qi(o),c=qi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ce(a[l],c[l]);if(d!==0)return d}return ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(He(o.latitude),He(s.latitude));return a!==0?a:ce(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return tS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,C=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:tS(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Li.mapValue&&s===Li.mapValue)return 0;if(o===Li.mapValue)return 1;if(s===Li.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ce(c[f],d[f]);if(g!==0)return g;let y=zi(a[c[f]],l[d[f]]);if(y!==0)return y}return ce(c.length,d.length)}(n.mapValue,e.mapValue);default:throw Q()}}function eS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=Qr(n),r=Qr(e),i=ce(t.seconds,r.seconds);return i!==0?i:ce(t.nanos,r.nanos)}function tS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=zi(t[i],r[i]);if(o)return o}return ce(t.length,r.length)}function Da(n){return u_(n)}function u_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Qr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=u_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${u_(t.fields[s])}`;return i+"}"}(n.mapValue):Q()}function zo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l_(n){return!!n&&"integerValue"in n}function zu(n){return!!n&&"arrayValue"in n}function nS(n){return!!n&&"nullValue"in n}function rS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uf(n){return!!n&&"mapValue"in n}function kp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Uu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ts(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Z3(n){return"nullValue"in n?Pf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zo(Hi.empty(),G.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?kp(n)?fM:{mapValue:{}}:Q()}function e4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zo(Hi.empty(),G.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?fM:"mapValue"in n?kp(n)?{mapValue:{}}:Li:Q()}function iS(n,e){let t=zi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oS(n,e){let t=zi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ht=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Uf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ts(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Uu(this.value))}};function pM(n){let e=[];return ts(n.fields,(t,r)=>{let i=new st([t]);if(Uf(r)){let o=pM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new vn(e)}var _t=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),Ht.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),Ht.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),Ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _r=class{constructor(e,t){this.position=e,this.inclusive=t}};function sS(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=zi(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function aS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}var Go=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function t4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zf=class{},_e=class n extends zf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new f_(e,t,r):t==="array-contains"?new m_(e,r):t==="in"?new Gf(e,r):t==="not-in"?new y_(e,r):t==="array-contains-any"?new v_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new p_(e,r):new g_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(zi(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(zi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Fe=class n extends zf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ca(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ca(n){return n.op==="and"}function d_(n){return n.op==="or"}function eE(n){return gM(n)&&Ca(n)}function gM(n){for(let e of n.filters)if(e instanceof Fe)return!1;return!0}function h_(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(eE(n))return n.filters.map(e=>h_(e)).join(",");{let e=n.filters.map(t=>h_(t)).join(",");return`${n.op}(${e})`}}function mM(n,e){return n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(n,e):n instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&mM(s,i.filters[a]),!0):!1}(n,e):void Q()}function yM(n,e){let t=n.filters.concat(e);return Fe.create(t,n.op)}function vM(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`}(n):n instanceof Fe?function(t){return t.op.toString()+" {"+t.getFilters().map(vM).join(" ,")+"}"}(n):"Filter"}var f_=class extends _e{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},p_=class extends _e{constructor(e,t){super(e,"in",t),this.keys=_M("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},g_=class extends _e{constructor(e,t){super(e,"not-in",t),this.keys=_M("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function _M(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var m_=class extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return zu(t)&&Hu(t.arrayValue,this.value)}},Gf=class extends _e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}},y_=class extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Hu(this.value.arrayValue,t)}},v_=class extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!zu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}};var __=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function w_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new __(n,e,t,r,i,o,s)}function Wo(n){let e=z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>h_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),al(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Da(r)).join(",")),e.ue=t}return e.ue}function cl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!t4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aS(n.startAt,e.startAt)&&aS(n.endAt,e.endAt)}function Wf(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Kf(n,e){return n.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function cS(n,e,t){let r=Pf,i=!0;for(let o of Kf(n,e)){let s=Pf,a=!0;switch(o.op){case"<":case"<=":s=Z3(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Pf}iS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];iS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function uS(n,e,t){let r=Li,i=!0;for(let o of Kf(n,e)){let s=Li,a=!0;switch(o.op){case">=":case">":s=e4(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Li}oS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];oS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Kn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function wM(n,e,t,r,i,o,s,a){return new Kn(n,e,t,r,i,o,s,a)}function La(n){return new Kn(n)}function lS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tE(n){return n.collectionGroup!==null}function _a(n){let e=z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Oe(st.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Go(o,r))}),t.has(st.keyField().canonicalString())||e.ce.push(new Go(st.keyField(),r))}return e.ce}function nn(n){let e=z(n);return e.le||(e.le=n4(e,_a(n))),e.le}function n4(n,e){if(n.limitType==="F")return w_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Go(i.field,o)});let t=n.endAt?new _r(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new _r(n.startAt.position,n.startAt.inclusive):null;return w_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function E_(n,e){let t=n.filters.concat([e]);return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Qf(n,e,t){return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ul(n,e){return cl(nn(n),nn(e))&&n.limitType===e.limitType}function EM(n){return`${Wo(nn(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>vM(i)).join(", ")}]`),al(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Da(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`}(nn(n))}; limitType=${n.limitType})`}function ll(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of _a(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=sS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,_a(r),i)||r.endAt&&!function(s,a,c){let l=sS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,_a(r),i))}(n,e)}function IM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DM(n){return(e,t)=>{let r=!1;for(let i of _a(n)){let o=r4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function r4(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?zi(c,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var wr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return lM(this.inner)}size(){return this.innerSize}};var i4=new $e(G.comparator);function un(){return i4}var CM=new $e(G.comparator);function Nu(...n){let e=CM;for(let t of n)e=e.insert(t.key,t);return e}function bM(n){let e=CM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pr(){return ku()}function TM(){return ku()}function ku(){return new wr(n=>n.toString(),(n,e)=>n.isEqual(e))}var o4=new $e(G.comparator),s4=new Oe(G.comparator);function de(...n){let e=s4;for(let t of n)e=e.add(t);return e}var a4=new Oe(ce);function nE(){return a4}function rE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function AM(n){return{integerValue:""+n}}function SM(n,e){return oM(e)?AM(e):rE(n,e)}var ba=class{constructor(){this._=void 0}};function c4(n,e,t){return n instanceof Gi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Up(o)&&(o=Zw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Yr?xM(n,e):n instanceof Xr?FM(n,e):function(i,o){let s=MM(i,o),a=dS(s)+dS(i.Pe);return l_(s)&&l_(i.Pe)?AM(a):rE(i.serializer,a)}(n,e)}function u4(n,e,t){return n instanceof Yr?xM(n,e):n instanceof Xr?FM(n,e):t}function MM(n,e){return n instanceof Wi?function(r){return l_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Gi=class extends ba{},Yr=class extends ba{constructor(e){super(),this.elements=e}};function xM(n,e){let t=RM(e);for(let r of n.elements)t.some(i=>vr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xr=class extends ba{constructor(e){super(),this.elements=e}};function FM(n,e){let t=RM(e);for(let r of n.elements)t=t.filter(i=>!vr(i,r));return{arrayValue:{values:t}}}var Wi=class extends ba{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function dS(n){return He(n.integerValue||n.doubleValue)}function RM(n){return zu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ko=class{constructor(e,t){this.field=e,this.transform=t}};function l4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Yr&&i instanceof Yr||r instanceof Xr&&i instanceof Xr?Ea(r.elements,i.elements,vr):r instanceof Wi&&i instanceof Wi?vr(r.Pe,i.Pe):r instanceof Gi&&i instanceof Gi}(n.transform,e.transform)}var I_=class{constructor(e,t){this.version=e,this.transformResults=t}},et=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ta=class{};function NM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Qi(n.key,et.none()):new Ki(n.key,n.data,et.none());{let t=n.data,r=Ht.empty(),i=new Oe(st.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qn(n.key,r,new vn(i.toArray()),et.none())}}function d4(n,e,t){n instanceof Ki?function(i,o,s){let a=i.value.clone(),c=fS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qn?function(i,o,s){if(!kf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(PM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ou(n,e,t,r){return n instanceof Ki?function(o,s,a,c){if(!kf(o.precondition,s))return a;let l=o.value.clone(),d=pS(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qn?function(o,s,a,c){if(!kf(o.precondition,s))return a;let l=pS(o.fieldTransforms,c,s),d=s.data;return d.setAll(PM(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return kf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function h4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=MM(r.transform,i||null);o!=null&&(t===null&&(t=Ht.empty()),t.set(r.field,o))}return t||null}function hS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ea(r,i,(o,s)=>l4(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ki=class extends Ta{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qn=class extends Ta{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function fS(n,e,t){let r=new Map;te(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,u4(s,a,t[i]))}return r}function pS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,c4(o,s,e))}return r}var Qi=class extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gu=class extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&d4(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=NM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(t,r)=>hS(t,r))&&Ea(this.baseMutations,e.baseMutations,(t,r)=>hS(t,r))}},D_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){te(e.mutations.length===r.length);let i=function(){return o4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ku=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var C_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var mt,we;function UM(n){switch(n){default:return Q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function kM(n){if(n===void 0)return ot("GRPC error has no .code"),R.UNKNOWN;switch(n){case mt.OK:return R.OK;case mt.CANCELLED:return R.CANCELLED;case mt.UNKNOWN:return R.UNKNOWN;case mt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case mt.INTERNAL:return R.INTERNAL;case mt.UNAVAILABLE:return R.UNAVAILABLE;case mt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case mt.NOT_FOUND:return R.NOT_FOUND;case mt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case mt.ABORTED:return R.ABORTED;case mt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case mt.DATA_LOSS:return R.DATA_LOSS;default:return Q()}}(we=mt||(mt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var gS=null;function OM(){return new TextEncoder}var f4=new Pi([4294967295,4294967295],0);function mS(n){let e=OM().encode(n),t=new Lv;return t.update(e),new Uint8Array(t.digest())}function yS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pi([t,r],0),new Pi([i,o],0)]}var b_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $o(`Invalid padding: ${t}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $o(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Pi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Pi.fromNumber(r)));return i.compare(f4)===1&&(i=new Pi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=mS(e),[r,i]=yS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=mS(e),[r,i]=yS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$o=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Qu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new $e(ce),un(),de())}},Yu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var wa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Yf=class{constructor(e,t){this.targetId=e,this.me=t}},Xf=class{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Jf=class{constructor(){this.fe=0,this.ge=_S(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new Yu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=_S()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},T_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=vS(),this.Qe=new $e(ce)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Wf(o))if(r===0){let s=new G(o.path);this.Ue(t,s,_t.newNoDocument(s,ie.min()))}else te(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}gS?.et(function(d,f,g,y,I){var C,b,U,H,N,j;let re={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Y=f.unchangedNames;return Y&&(re.bloomFilter={applied:I===0,hashCount:(C=Y?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(H=(U=(b=Y?.bits)===null||b===void 0?void 0:b.bitmap)===null||U===void 0?void 0:U.length)!==null&&H!==void 0?H:0,padding:(j=(N=Y?.bits)===null||N===void 0?void 0:N.padding)!==null&&j!==void 0?j:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),re}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qi(r).toUint8Array()}catch(c){if(c instanceof Hf)return Wn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new b_(s,i,o)}catch(c){return Wn(c instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Wf(a.target)){let c=new G(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,_t.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Qu(e,t,this.Qe,this.ke,r);return this.ke=un(),this.qe=vS(),this.Qe=new $e(ce),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Jf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Oe(ce),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function vS(){return new $e(G.comparator)}function _S(){return new $e(G.comparator)}var p4={asc:"ASCENDING",desc:"DESCENDING"},g4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m4={and:"AND",or:"OR"},A_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function S_(n,e){return n.useProto3Json||al(e)?e:{value:e}}function Aa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function y4(n,e){return Aa(n,e.toTimestamp())}function at(n){return te(!!n),ie.fromTimestamp(function(t){let r=Qr(t);return new Ge(r.seconds,r.nanos)}(n))}function iE(n,e){return M_(n,e).canonicalString()}function M_(n,e){let t=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LM(n){let e=Ee.fromString(n);return te(QM(e)),e}function Xu(n,e){return iE(n.databaseId,e.path)}function mr(n,e){let t=LM(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G($M(t))}function BM(n,e){return iE(n.databaseId,e)}function jM(n){let e=LM(n);return e.length===4?Ee.emptyPath():$M(e)}function x_(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $M(n){return te(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function wS(n,e,t){return{name:Xu(n,e),fields:t.value.mapValue.fields}}function qM(n,e,t){let r=mr(n,e.name),i=at(e.updateTime),o=e.createTime?at(e.createTime):ie.min(),s=new Ht({mapValue:{fields:e.fields}}),a=_t.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function v4(n,e){return"found"in e?function(r,i){te(!!i.found),i.found.name,i.found.updateTime;let o=mr(r,i.found.name),s=at(i.found.updateTime),a=i.found.createTime?at(i.found.createTime):ie.min(),c=new Ht({mapValue:{fields:i.found.fields}});return _t.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){te(!!i.missing),te(!!i.readTime);let o=mr(r,i.missing),s=at(i.readTime);return _t.newNoDocument(o,s)}(n,e):Q()}function _4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(te(d===void 0||typeof d=="string"),ct.fromBase64String(d||"")):(te(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ct.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:kM(l.code);return new k(d,l.message||"")}(s);t=new Xf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=mr(n,r.document.name),o=at(r.document.updateTime),s=r.document.createTime?at(r.document.createTime):ie.min(),a=new Ht({mapValue:{fields:r.document.fields}}),c=_t.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new wa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=mr(n,r.document),o=r.readTime?at(r.readTime):ie.min(),s=_t.newNoDocument(i,o),a=r.removedTargetIds||[];t=new wa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=mr(n,r.document),o=r.removedTargetIds||[];t=new wa([],o,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new C_(i,o),a=r.targetId;t=new Yf(a,s)}}return t}function Ju(n,e){let t;if(e instanceof Ki)t={update:wS(n,e.key,e.value)};else if(e instanceof Qi)t={delete:Xu(n,e.key)};else if(e instanceof Qn)t={update:wS(n,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof Gu))return Q();t={verify:Xu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Gi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:y4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q()}(n,e.precondition)),t}function F_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?et.updateTime(at(o.updateTime)):o.exists!==void 0?et.exists(o.exists):et.none()}(e.currentDocument):et.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME"),c=new Gi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Yr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Xr(d)}else"increment"in a?c=new Wi(s,a.increment):Q();let l=st.fromServerFormat(a.fieldPath);return new Ko(l,c)}(n,i)):[];if(e.update){e.update.name;let i=mr(n,e.update.name),o=new Ht({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new vn(l.map(d=>st.fromServerFormat(d)))}(e.updateMask);return new Qn(i,o,s,t,r)}return new Ki(i,o,t,r)}if(e.delete){let i=mr(n,e.delete);return new Qi(i,t)}if(e.verify){let i=mr(n,e.verify);return new Gu(i,t)}return Q()}function w4(n,e){return n&&n.length>0?(te(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?at(i.updateTime):at(o);return s.isEqual(ie.min())&&(s=at(o)),new I_(s,i.transformResults||[])}(t,e))):[]}function HM(n,e){return{documents:[BM(n,e.path)]}}function zM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BM(n,i);let o=function(l){if(l.length!==0)return KM(Fe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:pa(g.field),direction:I4(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=S_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function GM(n){let e=jM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){te(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=WM(f);return g instanceof Fe&&eE(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(I){return new Go(ga(I.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,al(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new _r(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new _r(y,g)}(t.endAt)),wM(e,i,s,o,a,"F",c,l)}function E4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ga(t.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ga(t.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(t.unaryFilter.field);return _e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(t.unaryFilter.field);return _e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return _e.create(ga(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Fe.create(t.compositeFilter.filters.map(r=>WM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function I4(n){return p4[n]}function D4(n){return g4[n]}function C4(n){return m4[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return st.fromServerFormat(n.fieldPath)}function KM(n){return n instanceof _e?function(t){if(t.op==="=="){if(rS(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(nS(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rS(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(nS(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:D4(t.op),value:t.value}}}(n):n instanceof Fe?function(t){let r=t.getFilters().map(i=>KM(i));return r.length===1?r[0]:{compositeFilter:{op:C4(t.op),filters:r}}}(n):Q()}function b4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Sa=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zf=class{constructor(e){this.ct=e}};function T4(n,e){let t;if(e.document)t=qM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=G.fromSegments(e.noDocument.path),i=Yo(e.noDocument.readTime);t=_t.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{let r=G.fromSegments(e.unknownDocument.path),i=Yo(e.unknownDocument.version);t=_t.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ge(i[0],i[1]);return ie.fromTimestamp(o)}(e.readTime)),t}function ES(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Xu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Aa(o,s.version.toTimestamp()),createTime:Aa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return Q();r.unknownDocument={path:t.path.toArray(),version:Qo(e.version)}}return r}function ep(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yo(n){let e=new Ge(n.seconds,n.nanoseconds);return ie.fromTimestamp(e)}function Lo(n,e){let t=(e.baseMutations||[]).map(o=>F_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>F_(n.ct,o)),i=Ge.fromMillis(e.localWriteTimeMs);return new Wu(e.batchId,i,t,r)}function Pu(n){let e=Yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yo(n.lastLimboFreeSnapshotVersion):ie.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return te(o.documents.length===1),nn(La(jM(o.documents[0])))}(n.query):function(o){return nn(GM(o))}(n.query),new Sa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ct.fromBase64String(n.resumeToken))}function YM(n,e){let t=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion),i;i=Wf(e.target)?HM(n.ct,e.target):zM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function oE(n){let e=GM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Qf(e,e.limit,"L"):e}function zv(n,e){return new Ku(e.largestBatchId,F_(n.ct,e.overlayMutation))}function IS(n,e){let t=e.path.lastSegment();return[n,tn(e.path.popLast()),t]}function DS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qo(r.readTime),documentKey:tn(r.documentKey.path),largestBatchId:r.largestBatchId}}var R_=class{getBundleMetadata(e,t){return CS(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Yo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return CS(e).put(function(i){return{bundleId:i.id,createTime:Qo(at(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return bS(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:oE(o.bundledQuery),readTime:Yo(o.readTime)}}(r)})}saveNamedQuery(e,t){return bS(e).put(function(i){return{name:i.name,readTime:Qo(at(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function CS(n){return Ct(n,"bundles")}function bS(n){return Ct(n,"namedQueries")}var tp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Mu(e).get(IS(this.userId,t)).next(r=>r?zv(this.serializer,r):null)}getOverlays(e,t){let r=pr();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ku(t,s);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(tn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Mu(e).j("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,t,r){let i=pr(),o=tn(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Mu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=zv(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=pr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Mu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=zv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Mu(e).put(function(i,o,s){let[a,c,l]=IS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ju(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Mu(n){return Ct(n,"documentOverlays")}var N_=class{Pt(e){return Ct(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ct.fromUint8Array(r):ct.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Wr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ju(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Qr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?hM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):kp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(He(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),G.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Wr.vt=new Wr;function A4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function TS(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=A4(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var P_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=TS(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=TS(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},U_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},k_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Bo=class{constructor(){this.jt=new P_,this.Ht=new U_(this.jt),this.Jt=new k_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var jo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ui(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=AS(n.arrayValue,e.arrayValue),t!==0?t:(t=AS(n.directionalValue,e.directionalValue),t!==0?t:G.comparator(n.documentKey,e.documentKey)))}function AS(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var np=class{constructor(e){this.Xt=new Oe((t,r)=>st.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(te(e.collectionGroup===this.collectionId),this.nn)return!1;let t=r_(e);if(t!==void 0&&!this.sn(t))return!1;let r=Oo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Oe(st.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new va(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new va(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new va(r.field,r.dir==="asc"?0:1)));return new Ia(Ia.UNKNOWN_ID,this.collectionId,t,Bu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function XM(n){var e,t;if(te(n instanceof _e||n instanceof Fe),n instanceof _e){if(n instanceof Gf){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>_e.create(n.field,"==",o)))||[];return Fe.create(i,"or")}return n}let r=n.filters.map(i=>XM(i));return Fe.create(r,n.op)}function S4(n){if(n.getFilters().length===0)return[];let e=L_(XM(n));return te(JM(e)),O_(e)||V_(e)?[e]:e.getFilters()}function O_(n){return n instanceof _e}function V_(n){return n instanceof Fe&&eE(n)}function JM(n){return O_(n)||V_(n)||function(t){if(t instanceof Fe&&d_(t)){for(let r of t.getFilters())if(!O_(r)&&!V_(r))return!1;return!0}return!1}(n)}function L_(n){if(te(n instanceof _e||n instanceof Fe),n instanceof _e)return n;if(n.filters.length===1)return L_(n.filters[0]);let e=n.filters.map(r=>L_(r)),t=Fe.create(e,n.op);return t=rp(t),JM(t)?t:(te(t instanceof Fe),te(Ca(t)),te(t.filters.length>1),t.filters.reduce((r,i)=>sE(r,i)))}function sE(n,e){let t;return te(n instanceof _e||n instanceof Fe),te(e instanceof _e||e instanceof Fe),t=n instanceof _e?e instanceof _e?function(i,o){return Fe.create([i,o],"and")}(n,e):SS(n,e):e instanceof _e?SS(e,n):function(i,o){if(te(i.filters.length>0&&o.filters.length>0),Ca(i)&&Ca(o))return yM(i,o.getFilters());let s=d_(i)?i:o,a=d_(i)?o:i,c=s.filters.map(l=>sE(l,a));return Fe.create(c,"or")}(n,e),rp(t)}function SS(n,e){if(Ca(e))return yM(e,n.getFilters());{let t=e.filters.map(r=>sE(n,r));return Fe.create(t,"or")}}function rp(n){if(te(n instanceof _e||n instanceof Fe),n instanceof _e)return n;let e=n.getFilters();if(e.length===1)return rp(e[0]);if(gM(n))return n;let t=e.map(i=>rp(i)),r=[];return t.forEach(i=>{i instanceof _e?r.push(i):i instanceof Fe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Fe.create(r,n.op)}var B_=class{constructor(){this.un=new Zu}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Sn.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Zu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Oe(Ee.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Oe(Ee.comparator)).toArray()}};var Mf=new Uint8Array(0),j_=class{constructor(e,t){this.databaseId=t,this.cn=new Zu,this.ln=new wr(r=>Wo(r),(r,i)=>cl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:tn(i)};return MS(e).put(o)}return x.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[eM(t),""],!1,!0);return MS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(fr(s.parent))}return r})}addFieldIndex(e,t){let r=xu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=la(e);return o.next(a=>{s.put(DS(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=xu(e),i=la(e),o=ua(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=xu(e),r=ua(e),i=la(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return x.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new np(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ua(e),i=!0,o=new Map;return x.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return x.forEach(o,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(j=>`${j.fieldPath}:${j.kind}`).join(",")}`}(c)} to execute ${Wo(t)}`);let d=function(N,j){let re=r_(j);if(re===void 0)return null;for(let Y of Kf(N,re.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,c),f=function(N,j){let re=new Map;for(let Y of Oo(j))for(let E of Kf(N,Y.fieldPath))switch(E.op){case"==":case"in":re.set(Y.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(Y.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null}(l,c),g=function(N,j){let re=[],Y=!0;for(let E of Oo(j)){let v=E.kind===0?cS(N,E.fieldPath,N.startAt):uS(N,E.fieldPath,N.startAt);re.push(v.value),Y&&(Y=v.inclusive)}return new _r(re,Y)}(l,c),y=function(N,j){let re=[],Y=!0;for(let E of Oo(j)){let v=E.kind===0?uS(N,E.fieldPath,N.endAt):cS(N,E.fieldPath,N.endAt);re.push(v.value),Y&&(Y=v.inclusive)}return new _r(re,Y)}(l,c),I=this.In(c,l,g),C=this.In(c,l,y),b=this.Tn(c,l,f),U=this.En(c.indexId,d,I,g.inclusive,C,y.inclusive,b);return x.forEach(U,H=>r.G(H,t.limit).next(N=>{N.forEach(j=>{let re=G.fromSegments(j.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return x.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=S4(Fe.create(e.filters,"and")).map(r=>w_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/l]):Mf,y=this.An(e,g,r[f%l],i),I=this.Rn(e,g,o[f%l],s),C=a.map(b=>this.An(e,g,b,!0));d.push(...this.createRange(y,I,C))}return d}An(e,t,r,i){let o=new jo(e,G.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new jo(e,G.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new np(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return x.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Oe(st.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Bo;for(let i of Oo(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Wr.vt.It(o,s)}return r.zt()}dn(e){let t=new Bo;return Wr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Bo;return Wr.vt.It(zo(this.databaseId,t),r.Yt(function(o){let s=Oo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Bo);let o=0;for(let s of Oo(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&zu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Wr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Bo;c.seed(a.zt()),Wr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=xu(e),i=la(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new Bu(f.sequenceNumber,new Sn(Yo(f.readTime),new G(fr(f.documentKey)),f.largestBatchId)):Bu.empty(),y=d.fields.map(([I,C])=>new va(st.fromServerFormat(I),C));return new Ia(d.indexId,d.collectionGroup,y,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ce(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=xu(e),o=la(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>x.forEach(a,c=>o.put(DS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return x.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(o,c);return l.isEqual(d)?x.resolve():this.bn(e,o,c,l,d)}))))})}Dn(e,t,r,i){return ua(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ua(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ua(e),o=new Oe(Ui);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new jo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Oe(Ui),i=this.Vn(t,e);if(i==null)return r;let o=r_(t);if(o!=null){let s=e.data.field(o.fieldPath);if(zu(s))for(let a of s.arrayValue.values||[])r=r.add(new jo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new jo(t.indexId,e.key,Mf,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,g){let y=c.getIterator(),I=l.getIterator(),C=ca(y),b=ca(I);for(;C||b;){let U=!1,H=!1;if(C&&b){let N=d(C,b);N<0?H=!0:N>0&&(U=!0)}else C!=null?H=!0:U=!0;U?(f(b),b=ca(I)):H?(g(C),C=ca(y)):(C=ca(y),b=ca(I))}}(i,o,Ui,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),x.waitFor(s)}yn(e){let t=1;return la(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Ui(s,a)).filter((s,a,c)=>!a||Ui(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ui(s,e),c=Ui(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Mf,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Mf,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Ui(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xS)}getMinOffset(e,t){return x.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Q())).next(xS)}};function MS(n){return Ct(n,"collectionParents")}function ua(n){return Ct(n,"indexEntries")}function xu(n){return Ct(n,"indexConfiguration")}function la(n){return Ct(n,"indexState")}function xS(n){te(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Yw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}var FS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},An=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function ZM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{te(a===1)}));let l=[];for(let d of t.mutations){let f=sM(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return x.waitFor(o).next(()=>l)}function ip(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Q();e=n.noDocument}return JSON.stringify(e).length}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(41943040,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);var op=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){te(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ma(e),s=ki(e);return s.add({}).next(a=>{te(typeof a=="number");let c=new Wu(a,t,r,i),l=function(y,I,C){let b=C.baseMutations.map(H=>Ju(y.ct,H)),U=C.mutations.map(H=>Ju(y.ct,H));return{userId:I,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:b,mutations:U}}(this.serializer,this.userId,c),d=[],f=new Oe((g,y)=>ce(g.canonicalString(),y.canonicalString()));for(let g of i){let y=sM(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,P3))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),x.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return ki(e).get(t).next(r=>r?(te(r.userId===this.userId),Lo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?x.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ki(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(te(a.batchId>=r),o=Lo(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ki(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).U("userMutationsIndex",t).next(r=>r.map(i=>Lo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Nf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ma(e).J({range:i},(s,a,c)=>{let[l,d,f]=s,g=fr(d);if(l===this.userId&&t.path.isEqual(g))return ki(e).get(f).next(y=>{if(!y)throw Q();te(y.userId===this.userId),o.push(Lo(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ce),i=[];return t.forEach(o=>{let s=Nf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ma(e).J({range:a},(l,d,f)=>{let[g,y,I]=l,C=fr(y);g===this.userId&&o.path.isEqual(C)?r=r.add(I):f.done()});i.push(c)}),x.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Nf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Oe(ce);return ma(e).J({range:s},(c,l,d)=>{let[f,g,y]=c,I=fr(g);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ki(e).get(o).next(s=>{if(s===null)throw Q();te(s.userId===this.userId),r.push(Lo(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ZM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return x.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ma(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=fr(o[1]);i.push(c)}else a.done()}).next(()=>{te(i.length===0)})})}containsKey(e,t){return ex(e,this.userId,t)}Nn(e){return tx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function ex(n,e,t){let r=Nf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ma(n).J({range:o,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function ki(n){return Ct(n,"mutations")}function ma(n){return Ct(n,"documentMutations")}function tx(n){return Ct(n,"mutationQueues")}var Ma=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var $_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ma(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ie.fromTimestamp(new Ge(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>da(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(te(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return da(e).J((s,a)=>{let c=Pu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,t){return da(e).J((r,i)=>{let o=Pu(i);t(o)})}qn(e){return RS(e).get("targetGlobalKey").next(t=>(te(t!==null),t))}Qn(e,t){return RS(e).put("targetGlobalKey",t)}Kn(e,t){return da(e).put(YM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Wo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return da(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Pu(a);cl(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Oi(e);return t.forEach(s=>{let a=tn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,t,r){let i=Oi(e);return x.forEach(t,o=>{let s=tn(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Oi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Oi(e),o=de();return i.J({range:r,H:!0},(s,a,c)=>{let l=fr(s[1]),d=new G(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=tn(t.path),i=IDBKeyRange.bound([r],[eM(r)],!1,!0),o=0;return Oi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return da(e).get(t).next(r=>r?Pu(r):null)}};function da(n){return Ct(n,"targets")}function RS(n){return Ct(n,"targetGlobal")}function Oi(n){return Ct(n,"targetDocuments")}function NS([n,e],[t,r]){let i=ce(n,t);return i===0?ce(e,r):i}var q_=class{constructor(e){this.Un=e,this.buffer=new Oe(NS),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();NS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},H_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ji(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Xi(t)}yield this.Hn(3e5)}))}},z_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(yn.oe);let r=new q_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(FS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ha()<=er.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function M4(n,e){return new z_(n,e)}var G_=class{constructor(e,t){this.db=e,this.garbageCollector=M4(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return xf(e,r)}removeReference(e,t,r){return xf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xf(e,t)}nr(e,t){return function(i,o){let s=!1;return tx(i).Y(a=>ex(i,a,o).next(c=>(c&&(s=!0),x.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ie.min()),Oi(e).delete(function(f){return[0,tn(f.path)]}(s))))});i.push(c)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xf(e,t)}tr(e,t){let r=Oi(e),i,o=yn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==yn.oe&&t(new G(fr(i)),o),o=l,i=c):o=yn.oe}).next(()=>{o!==yn.oe&&t(new G(fr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function xf(n,e){return Oi(n).put(function(r,i){return{targetId:0,path:tn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var sp=class{constructor(){this.changes=new wr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var W_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ko(e).put(r)}removeEntry(e,t,r){return ko(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ep(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=_t.newInvalidDocument(t);return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:_t.newInvalidDocument(t)};return ko(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(t))},(i,o)=>{r={document:this.ir(t,o),size:ip(o)}}).next(()=>r)}getEntries(e,t){let r=un();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=un(),i=new $e(G.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,ip(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return x.resolve();let i=new Oe(kS);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Fu(i.first()),Fu(i.last())),s=i.getIterator(),a=s.getNext();return ko(e).J({index:"documentKeyIndex",range:o},(c,l,d)=>{let f=G.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&kS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(Fu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ko(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=un();for(let f of l){let g=this.ir(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(ll(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=un(),s=US(t,r),a=US(t,Sn.max());return ko(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.ir(G.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new K_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PS(e).get("remoteDocumentGlobalKey").next(t=>(te(!!t),t))}rr(e,t){return PS(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=T4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return _t.newInvalidDocument(e)}};function nx(n){return new W_(n)}var K_=class extends sp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new wr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Oe((o,s)=>ce(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=ES(this.cr.serializer,s);i=i.add(o.path.popLast());let l=ip(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=ES(this.cr.serializer,s.convertToNoDocument(ie.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),x.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function PS(n){return Ct(n,"remoteDocumentGlobal")}function ko(n){return Ct(n,"remoteDocumentsV14")}function Fu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function US(n,e){let t=e.documentKey.path.toArray();return[n,ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kS(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ce(t[o],r[o]),i)return i;return i=ce(t.length,r.length),i||(i=ce(t[t.length-2],r[r.length-2]),i||ce(t[t.length-1],r[r.length-1]))}var Q_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ap=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ou(r.mutation,i,vn.empty(),Ge.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=pr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Nu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=pr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=un(),s=ku(),a=function(){return ku()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Qn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),Ou(d.mutation,l,d.mutation.getFieldMask(),Ge.now())):s.set(l.key,vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new Q_(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ku(),i=new $e((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||vn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||de()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=TM();d.forEach(g=>{if(!o.has(g)){let y=NM(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(pr()),a=-1,c=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,de())).next(d=>({batchId:a,changes:bM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=Nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Nu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=function(f,g){return new Kn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,_t.newInvalidDocument(d)))});let a=Nu();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&Ou(d.mutation,l,vn.empty(),Ge.now()),ll(t,l)&&(a=a.insert(c,l))}),a})}};var Y_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:at(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:oE(i.bundledQuery),readTime:at(i.readTime)}}(t)),x.resolve()}};var X_=class{constructor(){this.overlays=new $e(G.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=pr();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=pr(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $e((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=pr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=pr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ku(t,r));let o=this.Ir.get(t);o===void 0&&(o=de(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var J_=class{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var el=class{constructor(){this.Tr=new Oe(yt.Er),this.dr=new Oe(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new yt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new yt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new G(new Ee([])),r=new yt(t,e),i=new yt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new G(new Ee([])),r=new yt(t,e),i=new yt(t,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new yt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},yt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return G.comparator(e.key,t.key)||ce(e.wr,t.wr)}static Ar(e,t){return ce(e.wr,t.wr)||G.comparator(e.key,t.key)}};var Z_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Oe(yt.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Wu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new yt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new yt(t,0),i=new yt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Oe(ce);return t.forEach(i=>{let o=new yt(i,0),s=new yt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new yt(new G(o),0),a=new Oe(ce);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),x.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){te(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let o=new yt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new yt(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ew=class{constructor(e){this.Mr=e,this.docs=function(){return new $e(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=un();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_t.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=un(),s=t.path,a=new G(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Yw(nM(d),r)<=0||(i.has(d.key)||ll(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tw(this)}getSize(e){return x.resolve(this.size)}},tw=class extends sp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var nw=class{constructor(e){this.persistence=e,this.Nr=new wr(t=>Wo(t),cl),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new el,this.targetCount=0,this.kr=Ma.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ma(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var cp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new yn(0),this.Kr=!1,this.Kr=!0,this.$r=new J_,this.referenceDelegate=e(this),this.Ur=new nw(this),this.indexManager=new B_,this.remoteDocumentCache=function(i){return new ew(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Zf(t),this.Gr=new Y_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Z_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new rw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},rw=class extends jf{constructor(e){super(),this.currentSequenceNumber=e}},up=class n{constructor(e){this.persistence=e,this.Jr=new el,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var iw=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new $f("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J1,{unique:!0}),c.createObjectStore("documentMutations")}(e),OS(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),OS(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J1,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return x.waitFor(g)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:G3});l.createIndex("collectionPathOverlayIndex",W3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",K3,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:U3});l.createIndex("documentKeyIndex",k3),l.createIndex("collectionGroupIndex",O3)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:$3}).createIndex("sequenceNumberIndex",q3,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:H3}).createIndex("documentKeyIndex",z3,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ip(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>x.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>x.forEach(a,c=>{te(c.userId===o.userId);let l=Lo(this.serializer,c);return ZM(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ee(s),l=function(f){return[0,tn(f)]}(c);o.push(t.get(l).next(d=>d?x.resolve():(f=>t.put({targetId:0,path:tn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>x.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:j3});let r=t.store("collectionParents"),i=new Zu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:tn(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ee(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let d=fr(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Pu(i),s=YM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new G(Ee.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):Q()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=nx(this.serializer),o=new cp(up.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:de();Lo(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),x.forEach(a,(c,l)=>{let d=new vt(l),f=tp.lt(this.serializer,d),g=o.getIndexManager(d),y=op.lt(d,this.serializer,g,o.referenceDelegate);return new ap(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new $u(t,yn.oe),c).next()})})}};function OS(n){n.createObjectStore("targetDocuments",{keyPath:L3}).createIndex("documentTargetsIndex",B3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V3,{unique:!0}),n.createObjectStore("targetGlobal")}var Gv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ow=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G_(this,i),this.Ai=t+"main",this.serializer=new Zf(c),this.Ri=new $i(this.Ai,this.hi,new iw(this.serializer)),this.$r=new N_,this.Ur=new $_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nx(this.serializer),this.Gr=new R_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Gv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new yn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ff(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ji(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ru(e).get("owner").next(t=>x.resolve(this.vi(t)))}Ci(e){return Ff(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ct(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return x.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?x.resolve(!0):Ru(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Gv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ff(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new $u(e,yn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ff(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return op.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new j_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?X3:c===16?Y3:c===15?Jw:c===14?uM:c===13?cM:c===12?Q3:c===11?aM:void Q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new $u(a,this.Qr?this.Qr.next():yn.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,rM);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ru(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,Gv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ru(e).put("owner",t)}static D(){return $i.D()}bi(e){let t=Ru(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):x.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;zg()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ot("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ru(n){return Ct(n,"owner")}function Ff(n){return Ct(n,"clientMetadata")}function aE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var sw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var aw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zg()?8:iM(bc())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new aw;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ha()<=er.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(ha()<=er.DEBUG&&O("QueryEngine","Query:",fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ha()<=er.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(t))):x.resolve())}Yi(e,t){if(lS(t))return x.resolve(null);let r=nn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Qf(t,null,"F"),r=nn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Qf(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return lS(t)||i.isEqual(ie.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?x.resolve(null):(ha()<=er.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fa(t)),this.rs(e,s,t,tM(i,-1)).next(a=>a))})}ts(e,t){let r=new Oe(DM(e));return t.forEach((i,o)=>{ll(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ha()<=er.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",fa(t)),this.Ji.getDocumentsMatchingQuery(e,t,Sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var cw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new $e(ce),this._s=new wr(o=>Wo(o),cl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ap(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function rx(n,e,t,r){return new cw(n,e,t,r)}function ix(n,e){return M(this,null,function*(){let t=z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=de();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function x4(n,e){let t=z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(c,I)).next(C=>{let b=l.docVersions.get(I);te(b!==null),C.version.compareTo(b)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ox(n){let e=z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function F4(n,e){let t=z(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,b,U){return C.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let c=un(),l=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(sx(o,s,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ie.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function sx(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=un();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function R4(n,e){let t=z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xa(n,e){let t=z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Sa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Fa(n,e,t){return M(this,null,function*(){let r=z(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ji(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function dp(n,e,t){let r=z(n),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=z(c),g=f._s.get(d);return g!==void 0?x.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:de())).next(a=>(ux(r,IM(e),a),{documents:a,Ts:o})))}function ax(n,e){let t=z(n),r=z(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function cx(n,e){let t=z(n),r=t.us.get(e)||ie.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,tM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ux(t,e,i),i))}function ux(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function N4(n,e,t,r){return M(this,null,function*(){let i=z(n),o=de(),s=un();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield xa(i,function(d){return nn(La(Ee.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>sx(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function P4(r,i){return M(this,arguments,function*(n,e,t=de()){let o=yield xa(n,nn(oE(e.bundledQuery))),s=z(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=at(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(ct.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function VS(n,e){return`firestore_clients_${n}_${e}`}function LS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Wv(n,e){return`firestore_targets_${n}_${e}`}var hp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ot("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Vu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(ot("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=nE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=oM(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ot("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},uw=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ot("SharedClientState",`Failed to parse online state: ${e}`),null)}},tl=class{constructor(){this.activeTargetIds=nE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Lu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new $e(ce),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=VS(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new tl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(VS(this.persistenceKey,r));if(i){let o=fp.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Wv(this.persistenceKey,e));if(i){let o=Vu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=yn.oe;if(o!=null)try{let a=JSON.parse(o);te(typeof a=="number"),s=a}catch(a){ot("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==yn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new hp(this.currentUser,e,t,r),o=LS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=LS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Wv(this.persistenceKey,e),o=new Vu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return fp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return hp.Rs(new vt(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Vu.Rs(i,t)}Ls(e){return uw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=nE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},pp=class{constructor(){this.so=new tl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lw=class{_o(e){}shutdown(){}};var gp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rf=null;function Kv(){return Rf===null?Rf=function(){return 268435456+Math.round(2147483648*Math.random())}():Rf++,"0x"+Rf.toString(16)}var U4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var qt="WebChannelConnection",hw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Kv(),c=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(d=>(O("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Wn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=U4[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Kv();return new Promise((s,a)=>{let c=new Bv;c.setWithCredentials(!0),c.listenOnce(jv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Su.NO_ERROR:let d=c.getResponseJson();O(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Su.TIMEOUT:O(qt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case Su.HTTP_ERROR:let f=c.getStatus();if(O(qt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let I=function(b){let U=b.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(U)>=0?U:R.UNKNOWN}(y.status);a(new k(I,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{O(qt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(qt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Kv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Hv(),a=qv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");O(qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),g=!1,y=!1,I=new dw({Io:b=>{y?O(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(O(qt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(qt,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},To:()=>f.close()}),C=(b,U,H)=>{b.listen(U,N=>{try{H(N)}catch(j){setTimeout(()=>{throw j},0)}})};return C(f,aa.EventType.OPEN,()=>{y||(O(qt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),C(f,aa.EventType.CLOSE,()=>{y||(y=!0,O(qt,`RPC '${e}' stream ${i} transport closed`),I.So())}),C(f,aa.EventType.ERROR,b=>{y||(y=!0,Wn(qt,`RPC '${e}' stream ${i} transport errored:`,b),I.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),C(f,aa.EventType.MESSAGE,b=>{var U;if(!y){let H=b.data[0];te(!!H);let N=H,j=N.error||((U=N[0])===null||U===void 0?void 0:U.error);if(j){O(qt,`RPC '${e}' stream ${i} received error:`,j);let re=j.status,Y=function(_){let D=mt[_];if(D!==void 0)return kM(D)}(re),E=j.message;Y===void 0&&(Y=R.INTERNAL,E="Unknown error status: "+re+" with message "+j.message),y=!0,I.So(new k(Y,E)),f.close()}else O(qt,`RPC '${e}' stream ${i} received:`,H),I.bo(H)}}),C(a,$v.STAT_EVENT,b=>{b.stat===Sf.PROXY?O(qt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Sf.NOPROXY&&O(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function lx(){return typeof window<"u"?window:null}function Of(){return typeof document<"u"?document:null}function dl(n){return new A_(n,!0)}var nl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var mp=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(ot(t.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fw=class extends mp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=_4(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?at(s.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=x_(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Wf(c)?{documents:HM(o,c)}:{query:zM(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=VM(o,s.resumeToken);let l=S_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Aa(o,s.snapshotVersion.toTimestamp());let l=S_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=E4(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=x_(this.serializer),t.removeTarget=e,this.a_(t)}},pw=class extends mp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return te(!!e.streamToken),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=w4(e.writeResults,e.commitTime),r=at(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=x_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Ju(this.serializer,r))};this.a_(t)}};var gw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,M_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,M_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ot(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var yw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){Zi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return M(this,null,function*(){let l=z(c);l.L_.add(4),yield Ba(l),l.q_.set("Unknown"),l.L_.delete(4),yield hl(l)})}(this))}))}),this.q_=new mw(r,i)}};function hl(n){return M(this,null,function*(){if(Zi(n))for(let e of n.B_)yield e(!0)})}function Ba(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Op(n,e){let t=z(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),lE(t)?uE(t):$a(t).r_()&&cE(t,e))}function Ra(n,e){let t=z(n),r=$a(t);t.N_.delete(e),r.r_()&&dx(t,e),t.N_.size===0&&(r.r_()?r.o_():Zi(t)&&t.q_.set("Unknown"))}function cE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$a(n).A_(e)}function dx(n,e){n.Q_.xe(e),$a(n).R_(e)}function uE(n){n.Q_=new T_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),$a(n).start(),n.q_.v_()}function lE(n){return Zi(n)&&!$a(n).n_()&&n.N_.size>0}function Zi(n){return z(n).L_.size===0}function hx(n){n.Q_=void 0}function k4(n){return M(this,null,function*(){n.q_.set("Online")})}function O4(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{cE(n,e)})})}function V4(n,e){return M(this,null,function*(){hx(n),lE(n)?(n.q_.M_(e),uE(n)):n.q_.set("Unknown")})}function L4(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof Xf&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yp(n,r)}else if(e instanceof wa?n.Q_.Ke(e):e instanceof Yf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield ox(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),dx(o,c);let f=new Sa(d.target,c,l,d.sequenceNumber);cE(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield yp(n,r)}})}function yp(n,e,t){return M(this,null,function*(){if(!Ji(e))throw e;n.L_.add(1),yield Ba(n),n.q_.set("Offline"),t||(t=()=>ox(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield hl(n)}))})}function fx(n,e){return e().catch(t=>yp(n,t,e))}function ja(n){return M(this,null,function*(){let e=z(n),t=Yi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;B4(e);)try{let i=yield R4(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,j4(e,i)}catch(i){yield yp(e,i)}px(e)&&gx(e)})}function B4(n){return Zi(n)&&n.O_.length<10}function j4(n,e){n.O_.push(e);let t=Yi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function px(n){return Zi(n)&&!Yi(n).n_()&&n.O_.length>0}function gx(n){Yi(n).start()}function $4(n){return M(this,null,function*(){Yi(n).p_()})}function q4(n){return M(this,null,function*(){let e=Yi(n);for(let t of n.O_)e.m_(t.mutations)})}function H4(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=D_.from(r,e,t);yield fx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ja(n)})}function z4(n,e){return M(this,null,function*(){e&&Yi(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return UM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Yi(r).s_(),yield fx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ja(r)}})}(n,e)),px(n)&&gx(n)})}function BS(n,e){return M(this,null,function*(){let t=z(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=Zi(t);t.L_.add(3),yield Ba(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield hl(t)})}function vw(n,e){return M(this,null,function*(){let t=z(n);e?(t.L_.delete(2),yield hl(t)):e||(t.L_.add(2),yield Ba(t),t.q_.set("Unknown"))})}function $a(n){return n.K_||(n.K_=function(t,r,i){let o=z(t);return o.w_(),new fw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:k4.bind(null,n),Ro:O4.bind(null,n),mo:V4.bind(null,n),d_:L4.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),lE(n)?uE(n):n.q_.set("Unknown")):(yield n.K_.stop(),hx(n))}))),n.K_}function Yi(n){return n.U_||(n.U_=function(t,r,i){let o=z(t);return o.w_(),new pw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$4.bind(null,n),mo:z4.bind(null,n),f_:q4.bind(null,n),g_:H4.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield ja(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _w=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qa(n,e){if(ot("AsyncQueue",`${e}: ${n}`),Ji(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var vp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=Nu(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var _p=class{constructor(){this.W_=new $e(G.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Na=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,vp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ww=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ew=class{constructor(){this.queries=jS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=z(t),o=i.queries;i.queries=jS(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function jS(){return new wr(n=>EM(n),ul)}function dE(n,e){return M(this,null,function*(){let t=z(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ww,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=qa(s,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&fE(t)})}function hE(n,e){return M(this,null,function*(){let t=z(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function G4(n,e){let t=z(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&fE(t)}function W4(n,e,t){let r=z(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function fE(n){n.Y_.forEach(e=>{e.next()})}var Iw,$S;($S=Iw||(Iw={})).ea="default",$S.Cache="cache";var rl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Iw.Cache}};var Dw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var wp=class{constructor(e){this.serializer=e}Es(e){return mr(this.serializer,e)}ds(e){return e.metadata.exists?qM(this.serializer,e.document,!1):_t.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return at(e)}},Cw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mx(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ee.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new wp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||de()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield N4(this.localStore,new wp(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield P4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function mx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Ep=class{constructor(e){this.key=e}},Ip=class{constructor(e){this.key=e}},Dp=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=DM(e),this.Ra=new vp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new _p,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=ll(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),b=!1;g&&y?g.data.isEqual(y.data)?I!==C&&(r.track({type:3,doc:y}),b=!0):this.ga(g,y)||(r.track({type:2,doc:y}),b=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),b=!0):g&&!y&&(r.track({type:1,doc:g}),b=!0,(c||l)&&(a=!0)),b&&(y?(s=s.add(y),o=C?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,I){let C=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return C(y)-C(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Na(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _p,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ip(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Ep(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Na.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},bw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Tw=class{constructor(e){this.key=e,this.va=!1}},Aw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new wr(a=>EM(a),ul),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(G.comparator),this.Na=new Map,this.La=new el,this.Ba={},this.ka=new Map,this.qa=Ma.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function K4(n,e,t=!0){return M(this,null,function*(){let r=Vp(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield yx(r,e,t,!0),i})}function Q4(n,e){return M(this,null,function*(){let t=Vp(n);yield yx(t,e,!0,!1)})}function yx(n,e,t,r){return M(this,null,function*(){let i=yield xa(n.localStore,nn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield pE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Op(n.remoteStore,i),a})}function pE(n,e,t,r,i){return M(this,null,function*(){n.Ka=(f,g,y)=>function(C,b,U,H){return M(this,null,function*(){let N=b.view.ma(U);N.ns&&(N=yield dp(C.localStore,b.query,!1).then(({documents:E})=>b.view.ma(E,N)));let j=H&&H.targetChanges.get(b.targetId),re=H&&H.targetMismatches.get(b.targetId)!=null,Y=b.view.applyChanges(N,C.isPrimaryClient,j,re);return Sw(C,b.targetId,Y.wa),Y.snapshot})}(n,f,g,y);let o=yield dp(n.localStore,e,!0),s=new Dp(e,o.Ts),a=s.ma(o.documents),c=Yu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Sw(n,t,l.wa);let d=new bw(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Y4(n,e,t){return M(this,null,function*(){let r=z(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ul(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ra(r.remoteStore,i.targetId),Pa(r,i.targetId)}).catch(Xi))):(Pa(r,i.targetId),yield Fa(r.localStore,i.targetId,!0))})}function X4(n,e){return M(this,null,function*(){let t=z(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ra(t.remoteStore,r.targetId))})}function J4(n,e,t){return M(this,null,function*(){let r=vE(n);try{let i=yield function(s,a){let c=z(s),l=Ge.now(),d=a.reduce((y,I)=>y.add(I.key),de()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=un(),C=de();return c.cs.getEntries(y,d).next(b=>{I=b,I.forEach((U,H)=>{H.isValidDocument()||(C=C.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(b=>{f=b;let U=[];for(let H of a){let N=h4(H,f.get(H.key).overlayedDocument);N!=null&&U.push(new Qn(H.key,N,pM(N.value.mapValue),et.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,U,a)}).next(b=>{g=b;let U=b.applyToLocalDocumentSet(f,C);return c.documentOverlayCache.saveOverlays(y,b.batchId,U)})}).then(()=>({batchId:g.batchId,changes:bM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new $e(ce)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield ei(r,i.changes),yield ja(r.remoteStore)}catch(i){let o=qa(i,"Failed to persist write");t.reject(o)}})}function vx(n,e){return M(this,null,function*(){let t=z(n);try{let r=yield F4(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?te(s.va):i.removedDocuments.size>0&&(te(s.va),s.va=!1))}),yield ei(t,r,e)}catch(r){yield Xi(r)}})}function qS(n,e,t){let r=z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=z(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&fE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Z4(n,e,t){return M(this,null,function*(){let r=z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new $e(G.comparator);s=s.insert(o,_t.newNoDocument(o,ie.min()));let a=de().add(o),c=new Qu(ie.min(),new Map,new $e(ce),s,a);yield vx(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),yE(r)}else yield Fa(r.localStore,e,!1).then(()=>Pa(r,e,t)).catch(Xi)})}function e9(n,e){return M(this,null,function*(){let t=z(n),r=e.batch.batchId;try{let i=yield x4(t.localStore,e);mE(t,r,null),gE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ei(t,i)}catch(i){yield Xi(i)}})}function t9(n,e,t){return M(this,null,function*(){let r=z(n);try{let i=yield function(s,a){let c=z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(te(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);mE(r,e,t),gE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ei(r,i)}catch(i){yield Xi(i)}})}function n9(n,e){return M(this,null,function*(){let t=z(n);Zi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=z(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=qa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function gE(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function mE(n,e,t){let r=z(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||_x(n,r)})}function _x(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ra(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),yE(n))}function Sw(n,e,t){for(let r of t)r instanceof Ep?(n.La.addReference(r.key,e),r9(n,r)):r instanceof Ip?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||_x(n,r.key)):Q()}function r9(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),yE(n))}function yE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new G(Ee.fromString(e)),r=n.qa.next();n.Na.set(r,new Tw(t)),n.Oa=n.Oa.insert(t,r),Op(n.remoteStore,new Sa(nn(La(t.path)),r,"TargetPurposeLimboResolution",yn.oe))}}function ei(n,e,t){return M(this,null,function*(){let r=z(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=sw.Wi(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return M(this,null,function*(){let d=z(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Ji(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),I=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,C)}}})}(r.localStore,o))})}function i9(n,e){return M(this,null,function*(){let t=z(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield ix(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ei(t,r.hs)}})}function o9(n,e){let t=z(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function s9(n,e){return M(this,null,function*(){let t=z(n),r=yield dp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Sw(t,e.targetId,i.wa),i})}function a9(n,e){return M(this,null,function*(){let t=z(n);return cx(t.localStore,e).then(r=>ei(t,r))})}function c9(n,e,t,r){return M(this,null,function*(){let i=z(n),o=yield function(a,c){let l=z(a),d=z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):x.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ja(i.remoteStore):t==="acknowledged"||t==="rejected"?(mE(i,e,r||null),gE(i,e),function(a,c){z(z(a).mutationQueue).On(c)}(i.localStore,e)):Q(),yield ei(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function u9(n,e){return M(this,null,function*(){let t=z(n);if(Vp(t),vE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield HS(t,r.toArray());t.Qa=!0,yield vw(t.remoteStore,!0);for(let o of i)Op(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Pa(t,s),Fa(t.localStore,s,!0))),Ra(t.remoteStore,s)}),yield i,yield HS(t,r),function(s){let a=z(s);a.Na.forEach((c,l)=>{Ra(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new $e(G.comparator)}(t),t.Qa=!1,yield vw(t.remoteStore,!1)}})}function HS(n,e,t){return M(this,null,function*(){let r=z(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield xa(r.localStore,nn(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield s9(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield ax(r.localStore,s);a=yield xa(r.localStore,l),yield pE(r,wx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function wx(n){return wM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function l9(n){return function(t){return z(z(t).persistence).Qi()}(z(n).localStore)}function d9(n,e,t,r){return M(this,null,function*(){let i=z(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield cx(i.localStore,IM(o[0])),a=Qu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ct.EMPTY_BYTE_STRING);yield ei(i,s,a);break}case"rejected":yield Fa(i.localStore,e,!0),Pa(i,e,r);break;default:Q()}})}function h9(n,e,t){return M(this,null,function*(){let r=Vp(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield ax(r.localStore,i),s=yield xa(r.localStore,o);yield pE(r,wx(o),s.targetId,!1,s.resumeToken),Op(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Fa(r.localStore,i,!1).then(()=>{Ra(r.remoteStore,i),Pa(r,i)}).catch(Xi))}})}function Vp(n){let e=z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z4.bind(null,e),e.Ca.d_=G4.bind(null,e.eventManager),e.Ca.$a=W4.bind(null,e.eventManager),e}function vE(n){let e=z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t9.bind(null,e),e}function f9(n,e,t){let r=z(n);(function(o,s,a){return M(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(y,I){let C=z(y),b=at(I.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",U=>C.Gr.getBundleMetadata(U,I.id)).then(U=>!!U&&U.createTime.compareTo(b)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(mx(c));let l=new Cw(c,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield ei(o,f.Ia,void 0),yield function(y,I){let C=z(y);return C.persistence.runTransaction("Save bundle","readwrite",b=>C.Gr.saveBundleMetadata(b,I))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return Wn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Mw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=dl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return rx(this.persistence,new lp,t.initialUser,this.serializer)}Ga(t){return new cp(up.Zr,this.serializer)}Wa(t){return new pp}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Cp=class n extends Mw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield qg(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield vE(this.Ja.syncEngine),yield ja(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return rx(this.persistence,new lp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new H_(r,e.asyncQueue,t)}Ha(e,t){let r=new a_(t,this.persistence);return new s_(e.asyncQueue,r)}Ga(e){let t=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new ow(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lx(),Of(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pp}},xw=class n extends Cp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield qg(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Lu&&(this.sharedClientState.syncEngine={no:c9.bind(null,t),ro:d9.bind(null,t),io:h9.bind(null,t),Qi:l9.bind(null,t),eo:a9.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield u9(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=lx();if(!Lu.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},_E=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i9.bind(null,this.syncEngine),yield vw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Ew}()}createDatastore(t){let r=dl(t.databaseInfo.databaseId),i=function(s){return new hw(s)}(t.databaseInfo);return function(s,a,c,l){return new gw(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new yw(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>qS(this.syncEngine,r,0),function(){return gp.D()?new gp:new lw}())}createSyncEngine(t,r){return function(o,s,a,c,l,d,f){let g=new Aw(o,s,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=z(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ba(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function zS(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ua=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Fw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Dt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Dw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Rw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=z(i),a={documents:o.map(f=>Xu(s.serializer,f))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=v4(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());te(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=G.fromPath(r);this.mutations.push(new Gu(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=z(r),s={writes:i.map(a=>Ju(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Q();t=ie.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ie.min())?et.exists(!1):et.updateTime(t):et.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ie.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return et.updateTime(t)}return et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Nw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new nl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Rw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!al(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!UM(t)}return!1}};var Pw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qa(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qv(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield ix(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function GS(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield wE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>BS(e.remoteStore,i)),n._onlineComponents=e})}function wE(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Wn("Error using user provided cache. Falling back to memory cache: "+t),yield Qv(n,new Mw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Qv(n,new Mw);return n._offlineComponents})}function Lp(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield GS(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield GS(n,new _E))),n._onlineComponents})}function Ex(n){return wE(n).then(e=>e.persistence)}function EE(n){return wE(n).then(e=>e.localStore)}function Ix(n){return Lp(n).then(e=>e.remoteStore)}function IE(n){return Lp(n).then(e=>e.syncEngine)}function p9(n){return Lp(n).then(e=>e.datastore)}function ka(n){return M(this,null,function*(){let e=yield Lp(n),t=e.eventManager;return t.onListen=K4.bind(null,e.syncEngine),t.onUnlisten=Y4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=X4.bind(null,e.syncEngine),t})}function g9(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield Ex(n),t=yield Ix(n);return e.setNetworkEnabled(!0),function(i){let o=z(i);return o.L_.delete(0),hl(o)}(t)}))}function m9(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield Ex(n),t=yield Ix(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=z(i);o.L_.add(0),yield Ba(o),o.q_.set("Offline")})}(t)}))}function y9(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,d){let f=z(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=qa(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield EE(n),e,t)})),t.promise}function Dx(n,e,t={}){let r=new Dt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let d=new Ua({next:g=>{d.Za(),s.enqueueAndForget(()=>hE(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new rl(La(a.path),d,{includeMetadataChanges:!0,_a:!0});return dE(o,f)}(yield ka(n),n.asyncQueue,e,t,r)})),r.promise}function v9(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield dp(i,o,!0),c=new Dp(o,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=qa(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield EE(n),e,t)})),t.promise}function Cx(n,e,t={}){let r=new Dt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let d=new Ua({next:g=>{d.Za(),s.enqueueAndForget(()=>hE(o,f)),g.fromCache&&c.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new rl(a,d,{includeMetadataChanges:!0,_a:!0});return dE(o,f)}(yield ka(n),n.asyncQueue,e,t,r)})),r.promise}function _9(n,e){let t=new Ua(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){z(i).Y_.add(o),o.next()}(yield ka(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){z(i).Y_.delete(o)}(yield ka(n),t)}))}}function w9(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?OM().encode(s):s,function(d,f){return new Fw(d,f)}(function(d,f){if(d instanceof Uint8Array)return zS(d,f);if(d instanceof ArrayBuffer)return zS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,dl(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){f9(yield IE(n),i,r)}))}function E9(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=z(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield EE(n),e)}))}function bx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WS=new Map;function DE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KS(n){if(!G.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function QS(n){if(G.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function Ce(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bp(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Tx(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var bp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yv;switch(r.type){case"firstParty":return new e_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=WS.get(t);r&&(O("ComponentProvider","Removing Datastore"),WS.delete(t),r.terminate())}(this),Promise.resolve()}};function Ax(n,e,t,r={}){var i;let o=(n=Ce(n,Xo))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=vt.MOCK_USER;else{a=ql(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new vt(l)}n._authCredentials=new Xv(new Vf(a,c))}}var Ft=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},yr=class n extends Ft{constructor(e,t,r){super(e,t,La(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bE(n,e,...t){if(n=Te(n),DE("collection","path",e),n instanceof Xo){let r=Ee.fromString(e,...t);return QS(r),new yr(n,null,r)}{if(!(n instanceof Le||n instanceof yr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return QS(r),new yr(n.firestore,null,r)}}function Sx(n,e){if(n=Ce(n,Xo),DE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ft(n,null,function(r){return new Kn(Ee.emptyPath(),r)}(e))}function fl(n,e,...t){if(n=Te(n),arguments.length===1&&(e=Lf.newId()),DE("doc","path",e),n instanceof Xo){let r=Ee.fromString(e,...t);return KS(r),new Le(n,null,new G(r))}{if(!(n instanceof Le||n instanceof yr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return KS(r),new Le(n.firestore,n instanceof yr?n.converter:null,new G(r))}}function TE(n,e){return n=Te(n),e=Te(e),(n instanceof Le||n instanceof yr)&&(e instanceof Le||e instanceof yr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AE(n,e){return n=Te(n),e=Te(e),n instanceof Ft&&e instanceof Ft&&n.firestore===e.firestore&&ul(n._query,e._query)&&n.converter===e.converter}var Tp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nl(this,"async_queue_retry"),this.Vu=()=>{let r=Of();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Of();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Of();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Dt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ji(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ot("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=_w.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Uw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var kw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var Mx=-1,We=class extends Xo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Tp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tp(e),this._firestoreClient=void 0,yield e}})}};function Rt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xx(n),n._firestoreClient}function xx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new c_(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bx(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Pw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function Fx(n,e){Wn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return Nx(n,_E.provider,{build:r=>new Cp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function Rx(n){return M(this,null,function*(){Wn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();Nx(n,_E.provider,{build:t=>new xw(t,e.cacheSizeBytes)})})}function Nx(n,e,t){if((n=Ce(n,We))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xx(n)}function Px(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Dt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!$i.D())return Promise.resolve();let i=r+"main";yield $i.delete(i)})}(aE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Ux(n){return function(t){let r=new Dt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return n9(yield IE(t),r)})),r.promise}(Rt(n=Ce(n,We)))}function kx(n){return g9(Rt(n=Ce(n,We)))}function Ox(n){return m9(Rt(n=Ce(n,We)))}function Vx(n,e){let t=Rt(n=Ce(n,We)),r=new kw;return w9(t,n._databaseId,e,r),r}function Lx(n,e){return E9(Rt(n=Ce(n,We)),e).then(t=>t?new Ft(n,null,t.query):null)}var Er=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ct.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jr=class{constructor(e){this._methodName=e}};var Jo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var il=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var I9=/^__.*__$/,Ow=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ki(e,this.data,t,this.fieldTransforms)}},Ap=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Bx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Sp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Bx(this.Cu)&&I9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Vw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dl(e)}Qu(e,t,r,i=!1){return new Sp({Cu:e,methodName:t,qu:r,path:st.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ns(n){let e=n._freezeSettings(),t=dl(n._databaseId);return new Vw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jp(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);xE("Data must be an object, but it was:",s,r);let a=qx(r,s),c,l;if(o.merge)c=new vn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=qw(e,f,t);if(!s.contains(g))throw new k(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zx(d,g)||d.push(g)}c=new vn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new Ow(new Ht(a),c,l)}var ol=class n extends Jr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function jx(n,e,t){return new Sp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Lw=class n extends Jr{_toFieldTransform(e){return new Ko(e.path,new Gi)}isEqual(e){return e instanceof n}},Bw=class n extends Jr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jx(this,e,!0),r=this.Ku.map(o=>rs(o,t)),i=new Yr(r);return new Ko(e.path,i)}isEqual(e){return e instanceof n&&Gg(this.Ku,e.Ku)}},jw=class n extends Jr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jx(this,e,!0),r=this.Ku.map(o=>rs(o,t)),i=new Xr(r);return new Ko(e.path,i)}isEqual(e){return e instanceof n&&Gg(this.Ku,e.Ku)}},$w=class n extends Jr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Wi(e.serializer,SM(e.serializer,this.$u));return new Ko(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function SE(n,e,t,r){let i=n.Qu(1,e,t);xE("Data must be an object, but it was:",i,r);let o=[],s=Ht.empty();ts(r,(c,l)=>{let d=FE(e,c,t);l=Te(l);let f=i.Nu(d);if(l instanceof ol)o.push(d);else{let g=rs(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new vn(o);return new Ap(s,a,i.fieldTransforms)}function ME(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[qw(e,r,t)],c=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(qw(e,o[g])),c.push(o[g+1]);let l=[],d=Ht.empty();for(let g=a.length-1;g>=0;--g)if(!zx(l,a[g])){let y=a[g],I=c[g];I=Te(I);let C=s.Nu(y);if(I instanceof ol)l.push(y);else{let b=rs(I,C);b!=null&&(l.push(y),d.set(y,b))}}let f=new vn(l);return new Ap(d,f,s.fieldTransforms)}function $x(n,e,t,r=!1){return rs(t,n.Qu(r?4:3,e))}function rs(n,e){if(Hx(n=Te(n)))return xE("Unsupported field value:",e,n),qx(n,e);if(n instanceof Jr)return function(r,i){if(!Bx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=rs(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ge.fromDate(r);return{timestampValue:Aa(i.serializer,o)}}if(r instanceof Ge){let o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Aa(i.serializer,o)}}if(r instanceof Jo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Er)return{bytesValue:VM(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof il)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return rE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bp(r)}`)}(n,e)}function qx(n,e){let t={};return lM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(n,(r,i)=>{let o=rs(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Hx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ge||n instanceof Jo||n instanceof Er||n instanceof Le||n instanceof Jr||n instanceof il)}function xE(n,e,t){if(!Hx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function qw(n,e,t){if((e=Te(e))instanceof Yn)return e._internalPath;if(typeof e=="string")return FE(n,e);throw Mp("Field path arguments must be of type string or ",n,!1,void 0,t)}var D9=new RegExp("[~\\*/\\[\\]]");function FE(n,e,t){if(e.search(D9)>=0)throw Mp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yn(...e.split("."))._internalPath}catch{throw Mp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(R.INVALID_ARGUMENT,a+n+c)}function zx(n,e){return n.some(t=>t.isEqual(e))}var Zo=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($p("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Hw=class extends Zo{data(){return super.data()}};function $p(n,e){return typeof e=="string"?FE(n,e):e instanceof Yn?e._internalPath:e._delegate._internalPath}function Gx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sl=class{},es=class extends sl{};function ti(n,e,...t){let r=[];e instanceof sl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof zw).length,a=o.filter(c=>c instanceof xp).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var xp=class n extends es{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return nF(e._query,t),new Ft(e.firestore,e.converter,E_(e._query,t))}_parse(e){let t=ns(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XS(f,d);let y=[];for(let I of f)y.push(YS(c,o,I));g={arrayValue:{values:y}}}else g=YS(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XS(f,d),g=$x(a,s,f,d==="in"||d==="not-in");return _e.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Wx(n,e,t){let r=e,i=$p("where",n);return xp._create(i,r,t)}var zw=class n extends sl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Fe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)nF(s,c),s=E_(s,c)}(e._query,t),new Ft(e.firestore,e.converter,E_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Gw=class n extends es{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(o,s)}(e._query,this._field,this._direction);return new Ft(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Kn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Kx(n,e="asc"){let t=e,r=$p("orderBy",n);return Gw._create(r,t)}var Fp=class n extends es{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ft(e.firestore,e.converter,Qf(e._query,this._limit,this._limitType))}};function Qx(n){return Tx("limit",n),Fp._create("limit",n,"F")}function Yx(n){return Tx("limitToLast",n),Fp._create("limitToLast",n,"L")}var Rp=class n extends es{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=tF(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(i,o){return new Kn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Xx(...n){return Rp._create("startAt",n,!0)}function Jx(...n){return Rp._create("startAfter",n,!1)}var Np=class n extends es{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=tF(e,this.type,this._docOrFields,this._inclusive);return new Ft(e.firestore,e.converter,function(i,o){return new Kn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Zx(...n){return Np._create("endBefore",n,!1)}function eF(...n){return Np._create("endAt",n,!0)}function tF(n,e,t,r){if(t[0]=Te(t[0]),t[0]instanceof Zo)return function(o,s,a,c,l){if(!c)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of _a(o))if(f.field.isKeyField())d.push(zo(s,c.key));else{let g=c.data.field(f.field);if(Up(g))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new _r(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ns(n.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<d.length;I++){let C=d[I];if(g[I].field.isKeyField()){if(typeof C!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!tE(s)&&C.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let b=s.path.child(Ee.fromString(C));if(!G.isDocumentKey(b))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let U=new G(b);y.push(zo(a,U))}else{let b=$x(c,l,C);y.push(b)}}return new _r(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function YS(n,e,t){if(typeof(t=Te(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ee.fromString(t));if(!G.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zo(n,new G(r))}if(t instanceof Le)return zo(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bp(t)}.`)}function XS(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nF(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Oa=class{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ts(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new il(o)}convertGeoPoint(e){return new Jo(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Zw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){let t=Qr(e);return new Ge(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ee.fromString(e);te(QM(r));let i=new Hi(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||ot(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function qp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ww=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};var Kr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mn=class extends Zo{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($p("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Bi=class extends Mn{data(e={}){return super.data(e)}},Xn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Kr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Bi(this._firestore,this._userDataWriter,r.key,r,new Kr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Bi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Bi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Kr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:C9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function C9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function RE(n,e){return n instanceof Mn&&e instanceof Mn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xn&&e instanceof Xn&&n._firestore===e._firestore&&AE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function rF(n){n=Ce(n,Le);let e=Ce(n.firestore,We);return Dx(Rt(e),n._key).then(t=>kE(e,n,t))}var Zr=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function iF(n){n=Ce(n,Le);let e=Ce(n.firestore,We),t=Rt(e),r=new Zr(e);return y9(t,n._key).then(i=>new Mn(e,r,n._key,i,new Kr(i!==null&&i.hasLocalMutations,!0),n.converter))}function oF(n){n=Ce(n,Le);let e=Ce(n.firestore,We);return Dx(Rt(e),n._key,{source:"server"}).then(t=>kE(e,n,t))}function sF(n){n=Ce(n,Ft);let e=Ce(n.firestore,We),t=Rt(e),r=new Zr(e);return Gx(n._query),Cx(t,n._query).then(i=>new Xn(e,r,n,i))}function aF(n){n=Ce(n,Ft);let e=Ce(n.firestore,We),t=Rt(e),r=new Zr(e);return v9(t,n._query).then(i=>new Xn(e,r,n,i))}function cF(n){n=Ce(n,Ft);let e=Ce(n.firestore,We),t=Rt(e),r=new Zr(e);return Cx(t,n._query,{source:"server"}).then(i=>new Xn(e,r,n,i))}function NE(n,e,t){n=Ce(n,Le);let r=Ce(n.firestore,We),i=qp(n.converter,e,t);return Ha(r,[jp(ns(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,et.none())])}function PE(n,e,t,...r){n=Ce(n,Le);let i=Ce(n.firestore,We),o=ns(i),s;return s=typeof(e=Te(e))=="string"||e instanceof Yn?ME(o,"updateDoc",n._key,e,t,r):SE(o,"updateDoc",n._key,e),Ha(i,[s.toMutation(n._key,et.exists(!0))])}function uF(n){return Ha(Ce(n.firestore,We),[new Qi(n._key,et.none())])}function lF(n,e){let t=Ce(n.firestore,We),r=fl(n),i=qp(n.converter,e);return Ha(t,[jp(ns(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,et.exists(!1))]).then(()=>r)}function UE(n,...e){var t,r,i;n=Te(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Uw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Uw(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Le)l=Ce(n.firestore,We),d=La(n._key.path),c={next:f=>{e[s]&&e[s](kE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Ce(n,Ft);l=Ce(f.firestore,We),d=f._query;let g=new Zr(l);c={next:y=>{e[s]&&e[s](new Xn(l,g,f,y))},error:e[s+1],complete:e[s+2]},Gx(n._query)}return function(g,y,I,C){let b=new Ua(C),U=new rl(y,b,I);return g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return dE(yield ka(g),U)})),()=>{b.Za(),g.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return hE(yield ka(g),U)}))}}(Rt(l),d,a,c)}function dF(n,e){return _9(Rt(n=Ce(n,We)),Uw(e)?e:{next:e})}function Ha(n,e){return function(r,i){let o=new Dt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return J4(yield IE(r),i,o)})),o.promise}(Rt(n),e)}function kE(n,e,t){let r=t.docs.get(e._key),i=new Zr(n);return new Mn(n,i,e._key,r,new Kr(t.hasPendingWrites,t.fromCache),e.converter)}var b9={maxAttempts:5};var Pp=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ns(e)}set(e,t,r){this._verifyNotCommitted();let i=Vi(e,this._firestore),o=qp(i.converter,t,r),s=jp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,et.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Vi(e,this._firestore),s;return s=typeof(t=Te(t))=="string"||t instanceof Yn?ME(this._dataReader,"WriteBatch.update",o._key,t,r,i):SE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,et.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Vi(e,this._firestore);return this._mutations=this._mutations.concat(new Qi(t._key,et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Vi(n,e){if((n=Te(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Kw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ns(t)}get(t){let r=Vi(t,this._firestore),i=new Ww(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Q();let s=o[0];if(s.isFoundDocument())return new Zo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Zo(this._firestore,i,r._key,null,r.converter);throw Q()})}set(t,r,i){let o=Vi(t,this._firestore),s=qp(o.converter,r,i),a=jp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Vi(t,this._firestore),a;return a=typeof(r=Te(r))=="string"||r instanceof Yn?ME(this._dataReader,"Transaction.update",s._key,r,i,o):SE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Vi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Vi(e,this._firestore),r=new Zr(this._firestore);return super.get(e).then(i=>new Mn(this._firestore,r,t._key,i._document,new Kr(!1,!1),t.converter))}};function hF(n,e,t){n=Ce(n,We);let r=Object.assign(Object.assign({},b9),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Dt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield p9(o);new Nw(o.asyncQueue,l,a,s,c).au()})),c.promise}(Rt(n),i=>e(new Kw(n,i)),r)}function fF(){return new ol("deleteField")}function pF(){return new Lw("serverTimestamp")}function gF(...n){return new Bw("arrayUnion",n)}function mF(...n){return new jw("arrayRemove",n)}function yF(n){return new $w("increment",n)}(function(e,t=!0){(function(i){Va=i})(Wl),ao(new Fn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new We(new Jv(r.getProvider("auth-internal")),new n_(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Rn(Q1,"4.7.3",e),Rn(Q1,"4.7.3","esm2017")})();var T9="@firebase/firestore-compat",A9="0.3.38";function $E(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vF(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function _F(){if(!dM())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hp=class n{constructor(e){this._delegate=e}static fromBase64String(e){return _F(),new n(Er.fromBase64String(e))}static fromUint8Array(e){return vF(),new n(Er.fromUint8Array(e))}toBase64(){return _F(),this._delegate.toBase64()}toUint8Array(){return vF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function OE(n){return S9(n,["next","error","complete"])}function S9(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var VE=class{enableIndexedDbPersistence(e,t){return Fx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Rx(e._delegate)}clearIndexedDbPersistence(e){return Px(e._delegate)}},zp=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Wn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){Ax(this._delegate,e,t,r)}enableNetwork(){return kx(this._delegate)}disableNetwork(){return Ox(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ux(this._delegate)}onSnapshotsInSync(e){return dF(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wa(this,bE(this._delegate,e))}catch(t){throw rn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ir(this,fl(this._delegate,e))}catch(t){throw rn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,Sx(this._delegate,e))}catch(t){throw rn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return hF(this._delegate,t=>e(new Gp(this,t)))}batch(){return Rt(this._delegate),new Wp(new Pp(this._delegate,e=>Ha(this._delegate,e)))}loadBundle(e){return Vx(this._delegate,e)}namedQuery(e){return Lx(this._delegate,e).then(t=>t?new as(this,t):null)}},za=class extends Oa{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hp(new Er(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Ir.forKey(t,this.firestore,null)}};function M9(n){JS(n)}var Gp=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new za(e)}get(e){let t=is(e);return this._delegate.get(t).then(r=>new os(this._firestore,new Mn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=is(e);return r?($E("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=is(e);return this._delegate.delete(t),this}},Wp=class{constructor(e){this._delegate=e}set(e,t,r){let i=is(e);return r?($E("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=is(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=is(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ga=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Bi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ss(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new za(e),t),i.set(t,o)),o}};Ga.INSTANCES=new WeakMap;var Ir=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new za(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Le(t._delegate,r,new G(e)))}static forKey(e,t,r){return new n(t,new Le(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wa(this.firestore,bE(this._delegate,e))}catch(t){throw rn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Te(e),e instanceof Le?TE(this._delegate,e):!1}set(e,t){t=$E("DocumentReference.set",t);try{return t?NE(this._delegate,e,t):NE(this._delegate,e)}catch(r){throw rn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?PE(this._delegate,e):PE(this._delegate,e,t,...r)}catch(i){throw rn(i,"updateDoc()","DocumentReference.update()")}}delete(){return uF(this._delegate)}onSnapshot(...e){let t=wF(e),r=EF(e,i=>new os(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return UE(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=iF(this._delegate):e?.source==="server"?t=oF(this._delegate):t=rF(this._delegate),t.then(r=>new os(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function rn(n,e,t){return n.message=n.message.replace(e,t),n}function wF(n){for(let e of n)if(typeof e=="object"&&!OE(e))return e;return{}}function EF(n,e){var t,r;let i;return OE(n[0])?i=n[0]:OE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var os=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RE(this._delegate,e._delegate)}},ss=class extends os{data(e){let t=this._delegate.data(e);return this._delegate._converter||ZS(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},as=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new za(e)}where(e,t,r){try{return new n(this.firestore,ti(this._delegate,Wx(e,t,r)))}catch(i){throw rn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,ti(this._delegate,Kx(e,t)))}catch(r){throw rn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,ti(this._delegate,Qx(e)))}catch(t){throw rn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,ti(this._delegate,Yx(e)))}catch(t){throw rn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,ti(this._delegate,Xx(...e)))}catch(t){throw rn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,ti(this._delegate,Jx(...e)))}catch(t){throw rn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,ti(this._delegate,Zx(...e)))}catch(t){throw rn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,ti(this._delegate,eF(...e)))}catch(t){throw rn(t,"endAt()","Query.endAt()")}}isEqual(e){return AE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=aF(this._delegate):e?.source==="server"?t=cF(this._delegate):t=sF(this._delegate),t.then(r=>new pl(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=wF(e),r=EF(e,i=>new pl(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return UE(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},LE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ss(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},pl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ss(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new LE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ss(this._firestore,r))})}isEqual(e){return RE(this._delegate,e._delegate)}},Wa=class n extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ir(this.firestore,e):null}doc(e){try{return e===void 0?new Ir(this.firestore,fl(this._delegate)):new Ir(this.firestore,fl(this._delegate,e))}catch(t){throw rn(t,"doc()","CollectionReference.doc()")}}add(e){return lF(this._delegate,e).then(t=>new Ir(this.firestore,t))}isEqual(e){return TE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function is(n){return Ce(n,Le)}var BE=class n{constructor(...e){this._delegate=new Yn(...e)}static documentId(){return new n(st.keyField().canonicalString())}isEqual(e){return e=Te(e),e instanceof Yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var jE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=pF();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=fF();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=gF(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=mF(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=yF(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var x9={Firestore:zp,GeoPoint:Jo,Timestamp:Ge,Blob:Hp,Transaction:Gp,WriteBatch:Wp,DocumentReference:Ir,DocumentSnapshot:os,Query:as,QueryDocumentSnapshot:ss,QuerySnapshot:pl,CollectionReference:Wa,FieldPath:BE,FieldValue:jE,setLogLevel:M9,CACHE_SIZE_UNLIMITED:Mx};function F9(n,e){n.INTERNAL.registerComponent(new Fn("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},x9)))}function R9(n){F9(n,(e,t)=>new zp(e,t,new VE)),n.registerVersion(T9,A9)}R9(Vt);function N9(n,e=ho){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function IF(n,e){return N9(n,e)}function P9(n,e){return IF(n,e).pipe(po(void 0),xc(),Z(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function zE(n,e){return IF(n,e).pipe(Z(t=>({payload:t,type:"query"})))}var Kp=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=bF(r,t);return new Yp(i,o,this.afs)}snapshotChanges(){return P9(this.ref,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:t})=>e.idField?Ie(W({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return pe(this.ref.get(e)).pipe(xt)}};function Qp(n,e){return zE(n,e).pipe(po(void 0),xc(),Z(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function DF(n,e,t){return Qp(n,t).pipe(fo((r,i)=>U9(r,i.map(o=>o.payload),e),[]),pm(),Z(r=>r.map(i=>({type:i.type,payload:i}))))}function U9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=k9(n,r))}),n}function qE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function k9(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return qE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return qE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qE(n,e.oldIndex,1);break}return n}function CF(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Yp=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Qp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Z(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(po(void 0),xc(),wt(([r,i])=>i.length>0||!r),Z(([,r])=>r),xt)}auditTrail(e){return this.stateChanges(e).pipe(fo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=CF(e);return DF(this.query,t,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return zE(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.payload.docs.map(r=>e.idField?Ie(W({},r.data()),{[e.idField]:r.id}):r.data())),xt)}get(e){return pe(this.query.get(e)).pipe(xt)}add(e){return this.ref.add(e)}doc(e){return new Kp(this.ref.doc(e),this.afs)}},HE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Qp(this.query,this.afs.schedulers.outsideAngular).pipe(xt):Qp(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.filter(r=>e.indexOf(r.type)>-1)),wt(t=>t.length>0),xt)}auditTrail(e){return this.stateChanges(e).pipe(fo((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=CF(e);return DF(this.query,t,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return zE(this.query,this.afs.schedulers.outsideAngular).pipe(Z(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),xt)}get(e){return pe(this.query.get(e)).pipe(xt)}},O9=new q("angularfire2.enableFirestorePersistence"),V9=new q("angularfire2.firestore.persistenceSettings"),L9=new q("angularfire2.firestore.settings"),B9=new q("angularfire2.firestore.use-emulator");function bF(n,e=t=>t){return{query:e(n),ref:n}}var Ka=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,d,f,g,y,I,C,b,U,H){this.schedulers=c;let N=Uo(t,a,r),j=d;f&&Ov(N,a,g,I,C,b,y,U),[this.firestore,this.persistenceEnabled$]=oa(`${N.name}.firestore`,"AngularFirestore",N.name,()=>{let re=a.runOutsideAngular(()=>N.firestore());if(o&&re.settings(o),j&&re.useEmulator(...j),i&&!Ci(s)){let Y=()=>{try{return pe(re.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ne(!1)}};return[re,a.runOutsideAngular(Y)]}else return[re,ne(!1)]},[o,j,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=bF(i,r),a=this.schedulers.ngZone.run(()=>o);return new Yp(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new HE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Kp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(P(Ri),P(Ni,8),P(O9,8),P(L9,8),P(bt),P(me),P(ia),P(V9,8),P(B9,8),P(sa,8),P(Fv,8),P(Rv,8),P(Nv,8),P(Pv,8),P(Uv,8),P(kv,8),P(zr,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var eo=(()=>{class n{constructor(t,r,i){this.fireauth=t,this.router=r,this.firestore=i}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(i=>{let o=i.user?.uid;localStorage.setItem("token","true"),localStorage.setItem("currentUser",t),o&&this.firestore.collection("users").doc(o).get().toPromise().then(s=>{if(s&&s.exists){let a=s.data();localStorage.setItem("userInfo",JSON.stringify(a)),console.log("User info retrieved and saved to localStorage:",a)}else console.log("No user data found in Firestore for the current user.")}).catch(s=>{console.error("Error retrieving user data:",s)}),this.router.navigate(["/"])}).catch(i=>{alert(i.message),this.router.navigate(["/login"])})}register(t,r,i,o){this.fireauth.createUserWithEmailAndPassword(t,r).then(s=>{alert("Registration Successful");let a=s.user?.uid;if(a){let l={name:i,birth:o,email:t};this.firestore.collection("users").doc(a).set(l).then(()=>{console.log("User data saved to Firestore")}).catch(d=>{console.error("Error saving user data to Firestore:",d)})}let c={name:i,birth:o,email:t};localStorage.setItem("userInfo",JSON.stringify(c)),localStorage.setItem("currentUser",t),console.log("User info saved in localStorage:",localStorage.getItem("userInfo")),this.router.navigate(["/"])}).catch(s=>{alert(s.message),this.router.navigate(["/register"])})}getCurrentUser(){return localStorage.getItem("currentUser")}isLoggedIn(){return!!localStorage.getItem("user")}getUserInfo(){return this.fireauth.authState.pipe(Z(t=>{if(t){let r=localStorage.getItem("currentUser"),i=localStorage.getItem("userInfo");if(i){let o=JSON.parse(i);if(o.email===r)return Ie(W({},o),{uid:t.uid,email:t.email||"",birthday:o.birth,name:o.name})}return{uid:t.uid,email:t.email||""}}return null}))}static{this.\u0275fac=function(r){return new(r||n)(P(sa),P(gt),P(Ka))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var PF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(X(Ao),X(vi))}}static{this.\u0275dir=Mt({type:n})}}return n})(),j9=(()=>{class n extends PF{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qs(n)))(i||n)}})()}static{this.\u0275dir=Mt({type:n,features:[Lr]})}}return n})(),UF=new q("");var $9={provide:UF,useExisting:To(()=>Dr),multi:!0};function q9(){let n=ur()?ur().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var H9=new q(""),Dr=(()=>{class n extends PF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!q9())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Ao),X(vi),X(H9,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&it("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Xc([$9]),Lr]})}}return n})();function z9(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var KE=new q(""),kF=new q("");function G9(n){return z9(n.value)?{required:!0}:null}function TF(n){return null}function OF(n){return n!=null}function VF(n){return wi(n)?pe(n):n}function LF(n){let e={};return n.forEach(t=>{e=t!=null?W(W({},e),t):e}),Object.keys(e).length===0?null:e}function BF(n,e){return e.map(t=>t(n))}function W9(n){return!n.validate}function jF(n){return n.map(e=>W9(e)?e:t=>e.validate(t))}function K9(n){if(!n)return null;let e=n.filter(OF);return e.length==0?null:function(t){return LF(BF(t,e))}}function QE(n){return n!=null?K9(jF(n)):null}function Q9(n){if(!n)return null;let e=n.filter(OF);return e.length==0?null:function(t){let r=BF(t,e).map(VF);return lm(r).pipe(Z(LF))}}function YE(n){return n!=null?Q9(jF(n)):null}function AF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Y9(n){return n._rawValidators}function X9(n){return n._rawAsyncValidators}function WE(n){return n?Array.isArray(n)?n:[n]:[]}function Zp(n,e){return Array.isArray(n)?n.includes(e):n===e}function SF(n,e){let t=WE(e);return WE(n).forEach(i=>{Zp(t,i)||t.push(i)}),t}function MF(n,e){return WE(e).filter(t=>!Zp(n,t))}var eg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=QE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ya=class extends eg{get formDirective(){return null}get path(){return null}},vl=class extends eg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},tg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},J9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},CY=Ie(W({},J9),{"[class.ng-submitted]":"isSubmitted"}),to=(()=>{class n extends tg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(X(vl,2))}}static{this.\u0275dir=Mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Th("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Lr]})}}return n})(),Cr=(()=>{class n extends tg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(X(Ya,10))}}static{this.\u0275dir=Mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Th("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Lr]})}}return n})();var gl="VALID",Jp="INVALID",Qa="PENDING",ml="DISABLED";function $F(n){return(ig(n)?n.validators:n)||null}function Z9(n){return Array.isArray(n)?QE(n):n||null}function qF(n,e){return(ig(e)?e.asyncValidators:n)||null}function e$(n){return Array.isArray(n)?YE(n):n||null}function ig(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function t$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function n$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var ng=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gl}get invalid(){return this.status===Jp}get pending(){return this.status==Qa}get disabled(){return this.status===ml}get enabled(){return this.status!==ml}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MF(e,this._rawAsyncValidators))}hasValidator(e){return Zp(this._rawValidators,e)}hasAsyncValidator(e){return Zp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qa,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ml,this.errors=null,this._forEachChild(r=>{r.disable(Ie(W({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gl,this._forEachChild(r=>{r.enable(Ie(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ie(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gl||this.status===Qa)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ml:gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qa,this._hasOwnPendingAsyncValidator=!0;let t=VF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?ml:this.errors?Jp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qa)?Qa:this._anyControlsHaveStatus(Jp)?Jp:gl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ig(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Z9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=e$(this._rawAsyncValidators)}},rg=class extends ng{constructor(e,t,r){super($F(t),qF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){n$(this,!0,e),Object.keys(e).forEach(r=>{t$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var og=new q("CallSetDisabledState",{providedIn:"root",factory:()=>sg}),sg="always";function r$(n,e){return[...e.path,n]}function HF(n,e,t=sg){zF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),o$(n,e),a$(n,e),s$(n,e),i$(n,e)}function xF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function i$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zF(n,e){let t=Y9(n);e.validator!==null?n.setValidators(AF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=X9(n);e.asyncValidator!==null?n.setAsyncValidators(AF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();xF(e._rawValidators,i),xF(e._rawAsyncValidators,i)}function o$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&GF(n,e)})}function s$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&GF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function GF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function a$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function c$(n,e){n==null,zF(n,e)}function u$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function l$(n){return Object.getPrototypeOf(n.constructor)===j9}function d$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function h$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Dr?t=o:l$(o)?r=o:i=o}),i||r||t||null}var f$={provide:Ya,useExisting:To(()=>Jn)},yl=Promise.resolve(),Jn=(()=>{class n extends Ya{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new lt,this.form=new rg({},QE(t),YE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),HF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yl.then(()=>{let r=this._findContainer(t.path),i=new rg({});c$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){yl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,d$(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(X(KE,10),X(kF,10),X(og,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&it("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Lt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xc([f$]),Lr]})}}return n})();function FF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function RF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var p$=class extends ng{constructor(e=null,t,r){super($F(t),qF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ig(t)&&(t.nonNullable||t.initialValueIsDefault)&&(RF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){RF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var g$={provide:vl,useExisting:To(()=>ni)},NF=Promise.resolve(),ni=(()=>{class n extends vl{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new p$,this._registered=!1,this.name="",this.update=new lt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=h$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),u$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){NF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ei(r);NF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?r$(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(X(Ya,9),X(KE,10),X(kF,10),X(UF,10),X(Br,8),X(og,8))}}static{this.\u0275dir=Mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Lt.None,"disabled","isDisabled"],model:[Lt.None,"ngModel","model"],options:[Lt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xc([g$]),Lr,mi]})}}return n})(),br=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var m$=new q("");var y$=(()=>{class n{constructor(){this._validator=TF}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):TF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mt({type:n,features:[mi]})}}return n})();var v$={provide:KE,useExisting:To(()=>XE),multi:!0};var XE=(()=>{class n extends y${constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ei,this.createValidator=t=>G9}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qs(n)))(i||n)}})()}static{this.\u0275dir=Mt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Yc("required",i._enabled?"":null)},inputs:{required:"required"},features:[Xc([v$]),Lr]})}}return n})();var WF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({})}}return n})();var KF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:og,useValue:t.callSetDisabledState??sg}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({imports:[WF]})}}return n})(),QF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:m$,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:og,useValue:t.callSetDisabledState??sg}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({imports:[WF]})}}return n})();var YF=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}login(){if(this.email==""){alert("Please enter email");return}if(this.password==""){alert("Please enter password");return}this.auth.login(this.email,this.password),this.email="",this.password=""}static{this.\u0275fac=function(r){return new(r||n)(X(eo))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-login"]],decls:16,vars:2,consts:[["id","login-page"],[1,"loginForm"],[1,"text"],[1,"form-group"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","password","placeholder","Password","name","password",3,"ngModelChange","ngModel"],["type","button",1,"btnlogin",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"h1"),J(5,"Login"),L(),V(6,"div",3)(7,"label"),J(8,"Email:"),L(),V(9,"input",4),ft("ngModelChange",function(s){return It(i.email,s)||(i.email=s),s}),L()(),V(10,"div",3)(11,"label"),J(12,"Password:"),L(),V(13,"input",5),ft("ngModelChange",function(s){return It(i.password,s)||(i.password=s),s}),L()(),V(14,"button",6),it("click",function(){return i.login()}),J(15,"Login"),L()()()()()),r&2&&(oe(9),ht("ngModel",i.email),oe(4),ht("ngModel",i.password))},dependencies:[br,Dr,to,Cr,ni,Jn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:300px;padding:0 40px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9e1;margin-top:30px;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:323px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;padding:7px;margin-bottom:23px}#login-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2FDALL%C2%B7E_2024_04_05_11_31_31_Create_a_realistic_image_of_a_gym_equipment.png?alt=media&token=baf875e4-56fa-437e-add4-cca409aedf8d);background-size:cover;background-position:center;background-repeat:no-repeat}.text[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}']})}}return n})();var XF=(()=>{class n{constructor(t){this.auth=t,this.name="",this.email="",this.birth="",this.password="",this.confirmPassword=""}register(){if(this.name==""){alert("Please enter name");return}if(this.email==""){alert("Please enter email");return}if(this.birth==""){alert("Please enter birth");return}if(this.password==""){alert("Please enter password");return}if(this.password!==this.confirmPassword){alert("Passwords do not match");return}this.auth.register(this.email,this.password,this.name,this.birth),this.email="",this.password="",this.confirmPassword="",this.name="",this.birth=""}static{this.\u0275fac=function(r){return new(r||n)(X(eo))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-register"]],decls:28,vars:5,consts:[["id","register-page"],[1,"registerForm"],[1,"text"],[1,"form-group"],["type","text","id","name","placeholder","Name","name","name",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","date","id","birth","placeholder","Birth","name","birth",3,"ngModelChange","ngModel"],["type","password","placeholder","Password","name","password",3,"ngModelChange","ngModel"],["type","password","placeholder","Confirm Password","name","confirm-pass",3,"ngModelChange","ngModel"],["type","button",1,"btnregister",3,"click"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"h1"),J(5,"Register"),L(),V(6,"div",3)(7,"label"),J(8,"Name:"),L(),V(9,"input",4),ft("ngModelChange",function(s){return It(i.name,s)||(i.name=s),s}),L()(),V(10,"div",3)(11,"label"),J(12,"Email:"),L(),V(13,"input",5),ft("ngModelChange",function(s){return It(i.email,s)||(i.email=s),s}),L()(),V(14,"div",3)(15,"label"),J(16,"Birth:"),L(),V(17,"input",6),ft("ngModelChange",function(s){return It(i.birth,s)||(i.birth=s),s}),L()(),V(18,"div",3)(19,"label"),J(20,"Password:"),L(),V(21,"input",7),ft("ngModelChange",function(s){return It(i.password,s)||(i.password=s),s}),L()(),V(22,"div",3)(23,"label"),J(24,"Confirm Password:"),L(),V(25,"input",8),ft("ngModelChange",function(s){return It(i.confirmPassword,s)||(i.confirmPassword=s),s}),L()(),V(26,"button",9),it("click",function(){return i.register()}),J(27," Create Account "),L()()()()()),r&2&&(oe(9),ht("ngModel",i.name),oe(4),ht("ngModel",i.email),oe(4),ht("ngModel",i.birth),oe(4),ht("ngModel",i.password),oe(4),ht("ngModel",i.confirmPassword))},dependencies:[br,Dr,to,Cr,ni,Jn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:350px;border:1px solid #ccc;padding:0 70px;margin-top:20px;border-radius:20px;background-color:#f9f9f9cd;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:520px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:23px}#register-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url("./media/Fitness_gym_interior_sunset_16_9-EWKIRD7F.png");background-size:cover;background-position:center;background-repeat:no-repeat}.text[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}#birth[_ngcontent-%COMP%], #name[_ngcontent-%COMP%]{width:182px}']})}}return n})();var _$=n=>["/details",n];function w$(n,e){if(n&1&&(V(0,"div",2),qn(1,"img",3),V(2,"h3"),J(3),L(),V(4,"h3"),J(5),L(),V(6,"h3"),J(7),L(),V(8,"button",4),J(9,"Details"),L()()),n&2){let t=e.$implicit;oe(),t0("alt",t.name),Ze("src",t.photo,Qc),oe(2),Mo(t.name),oe(2),Zt("Weight: ",t.weight,"kg"),oe(2),Zt("Price: $",t.price,""),oe(),Ze("routerLink",kT(6,_$,t.id))}}var JF=(()=>{class n{constructor(t){this.afs=t}ngOnInit(){this.items$=this.afs.collection("Upload").snapshotChanges().pipe(Z(t=>t.map(r=>{let i=r.payload.doc.data(),o=r.payload.doc.id;return Ie(W({},i),{id:o})})))}static{this.\u0275fac=function(r){return new(r||n)(X(Ka))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-catalog"]],decls:3,vars:3,consts:[[1,"catalog"],["class","catalog-item",4,"ngFor","ngForOf"],[1,"catalog-item"],[3,"src","alt"],[1,"details-button",3,"routerLink"]],template:function(r,i){r&1&&(V(0,"div",0),hn(1,w$,10,8,"div",1),Mh(2,"async"),L()),r&2&&(oe(),Ze("ngForOf",LT(2,1,i.items$)))},dependencies:[dA,Df,fA],styles:[".catalog[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;background:#4e4e5d;background:linear-gradient(90deg,#4e4e5df2 35%,#121c1fd2);flex-wrap:nowrap;height:100vh;width:100vw;gap:30px;overflow-x:auto;padding-top:23px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#576f86;border-radius:6px}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#576f86}.catalog[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f1f1f1;border-radius:6px}.catalog-item[_ngcontent-%COMP%]{box-shadow:6px 6px 20px #1a2a39,-6px -6px 20px #000001c7;background-color:#576f86;display:flex;justify-content:center;align-items:center;flex-direction:column;width:400px;text-align:center;border:1px solid #3e3a3f;margin:0;padding:20px;border-radius:12px}.catalog-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:323px;height:323px;border-radius:13px}.catalog-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px;font-weight:bolder;margin-top:8px}.catalog-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;padding:10px}.details-button[_ngcontent-%COMP%]{width:100px;height:auto;cursor:pointer;border:none;border-radius:10px;display:inline;align-items:center;text-align:center;background-color:#9da6d7;transition:.5s;color:#000;font-size:18px;font-weight:700;text-decoration:none;padding-bottom:10px;padding-top:10px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62;margin-top:10px}.details-button[_ngcontent-%COMP%]:hover{box-shadow:none}"]})}}return n})();var Xa=(()=>{class n{constructor(t){this.afs=t}addItem(t){return t.id=this.afs.createId(),this.afs.collection("/Upload").doc(t.id).set(t)}editItem(t){return this.afs.collection("/Upload").doc(t.id).update(t)}getAllItems(){return this.afs.collection("/Upload").snapshotChanges()}deleteItem(t){return this.afs.collection("/Upload").doc(t).delete().then(()=>{console.log("Item deleted successfully:",t)}).catch(r=>{throw console.error("Error deleting item:",r),r})}getItemById(t){return this.afs.collection("/Upload").doc(t).valueChanges()}updateItem(t){return this.afs.collection("/Upload").doc(t.id).update(t)}static{this.\u0275fac=function(r){return new(r||n)(P(Ka))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aR="firebasestorage.googleapis.com",cR="storageBucket",E$=2*60*1e3,I$=10*60*1e3,D$=1e3;var Ke=class n extends zl{constructor(e,t,r=0){super(ZE(e),`Firebase Storage: ${t} (${ZE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ZE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ze=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ze||{});function ZE(n){return"storage/"+n}function aI(){let n="An unknown error occurred, please check the error payload for server response.";return new Ke(ze.UNKNOWN,n)}function C$(n){return new Ke(ze.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function b$(n){return new Ke(ze.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function T$(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(ze.UNAUTHENTICATED,n)}function A$(){return new Ke(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function S$(n){return new Ke(ze.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function uR(){return new Ke(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lR(){return new Ke(ze.CANCELED,"User canceled the upload/download.")}function M$(n){return new Ke(ze.INVALID_URL,"Invalid URL '"+n+"'.")}function x$(n){return new Ke(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function F$(){return new Ke(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cR+"' property when initializing the app?")}function dR(){return new Ke(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function R$(){return new Ke(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function N$(){return new Ke(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function P$(n){return new Ke(ze.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cs(n){return new Ke(ze.INVALID_ARGUMENT,n)}function hR(){return new Ke(ze.APP_DELETED,"The Firebase app was deleted.")}function cI(n){return new Ke(ze.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function El(n,e){return new Ke(ze.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function wl(n){throw new Ke(ze.INTERNAL_ERROR,"Internal error: "+n)}var on=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw x$(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(j){j.path_=decodeURIComponent(j.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},C=t===aR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",U=new RegExp(`^https?://${C}/${i}/${b}`,"i"),N=[{regex:a,indices:c,postModify:o},{regex:y,indices:I,postModify:l},{regex:U,indices:{bucket:1,path:2},postModify:l}];for(let j=0;j<N.length;j++){let re=N[j],Y=re.regex.exec(e);if(Y){let E=Y[re.indices.bucket],v=Y[re.indices.path];v||(v=""),r=new n(E,v),re.postModify(r);break}}if(r==null)throw M$(e);return r}},tI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function U$(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function d(...b){l||(l=!0,e.apply(null,b))}function f(b){i=setTimeout(()=>{i=null,n(y,c())},b)}function g(){o&&clearTimeout(o)}function y(b,...U){if(l){g();return}if(b){g(),d.call(null,b,...U);return}if(c()||s){g(),d.call(null,b,...U);return}r<64&&(r*=2);let N;a===1?(a=2,N=0):N=(r+Math.random())*1e3,f(N)}let I=!1;function C(b){I||(I=!0,g(),!l&&(i!==null?(b||(a=2),clearTimeout(i),f(0)):b||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,C(!0)},t),C}function k$(n){n(!1)}function O$(n){return n!==void 0}function V$(n){return typeof n=="function"}function L$(n){return typeof n=="object"&&!Array.isArray(n)}function ug(n){return typeof n=="string"||n instanceof String}function ZF(n){return uI()&&n instanceof Blob}function uI(){return typeof Blob<"u"}function nI(n,e,t,r){if(r<e)throw cs(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cs(`Invalid value for '${n}'. Expected ${t} or less.`)}function no(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function fR(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ec=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ec||{});function pR(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var rI=class{constructor(e,t,r,i,o,s,a,c,l,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,I)=>{this.resolve_=y,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Za(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===ec.NO_ERROR,c=o.getStatus();if(!a||pR(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===ec.ABORT;r(!1,new Za(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Za(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());O$(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=aI();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?hR():lR();s(c)}else{let c=uR();s(c)}};this.canceled_?t(!1,new Za(!1,null,!0)):this.backoffId_=U$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&k$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Za=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function B$(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function j$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $$(n,e){e&&(n["X-Firebase-GMPID"]=e)}function q$(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function H$(n,e,t,r,i,o,s=!0){let a=fR(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return $$(l,e),B$(l,t),j$(l,o),q$(l,r),new rI(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function z$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G$(...n){let e=z$();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(uI())return new Blob(n);throw new Ke(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function W$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function K$(n){if(typeof atob>"u")throw P$("base-64");return atob(n)}var _n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Il=class{constructor(e,t){this.data=e,this.contentType=t||null}};function lI(n,e){switch(n){case _n.RAW:return new Il(gR(e));case _n.BASE64:case _n.BASE64URL:return new Il(mR(n,e));case _n.DATA_URL:return new Il(Y$(e),X$(e))}throw aI()}function gR(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Q$(n){let e;try{e=decodeURIComponent(n)}catch{throw El(_n.DATA_URL,"Malformed data URL.")}return gR(e)}function mR(n,e){switch(n){case _n.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw El(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _n.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw El(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=K$(e)}catch(i){throw i.message.includes("polyfill")?i:El(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var cg=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw El(_n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=J$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Y$(n){let e=new cg(n);return e.base64?mR(_n.BASE64,e.rest):Q$(e.rest)}function X$(n){return new cg(n).contentType}function J$(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var tc=class n{constructor(e,t){let r=0,i="";ZF(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ZF(this.data_)){let r=this.data_,i=W$(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(uI()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(G$.apply(null,t))}else{let t=e.map(s=>ug(s)?lI(_n.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function dI(n){let e;try{e=JSON.parse(n)}catch{return null}return L$(e)?e:null}function Z$(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function e6(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function yR(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function t6(n,e){return e}var Nt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||t6}},ag=null;function n6(n){return!ug(n)||n.length<2?n:yR(n)}function lg(){if(ag)return ag;let n=[];n.push(new Nt("bucket")),n.push(new Nt("generation")),n.push(new Nt("metageneration")),n.push(new Nt("name","fullPath",!0));function e(o,s){return n6(s)}let t=new Nt("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Nt("size");return i.xform=r,n.push(i),n.push(new Nt("timeCreated")),n.push(new Nt("updated")),n.push(new Nt("md5Hash",null,!0)),n.push(new Nt("cacheControl",null,!0)),n.push(new Nt("contentDisposition",null,!0)),n.push(new Nt("contentEncoding",null,!0)),n.push(new Nt("contentLanguage",null,!0)),n.push(new Nt("contentType",null,!0)),n.push(new Nt("metadata","customMetadata",!0)),ag=n,ag}function r6(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new on(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function i6(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return r6(r,n),r}function vR(n,e,t){let r=dI(e);return r===null?null:i6(n,r,t)}function o6(n,e,t,r){let i=dI(e);if(i===null||!ug(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let d=n.bucket,f=n.fullPath,g="/b/"+s(d)+"/o/"+s(f),y=no(g,t,r),I=fR({alt:"media",token:l});return y+I})[0]}function hI(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var eR="prefixes",tR="items";function s6(n,e,t){let r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[eR])for(let i of t[eR]){let o=i.replace(/\/$/,""),s=n._makeStorageReference(new on(e,o));r.prefixes.push(s)}if(t[tR])for(let i of t[tR]){let o=n._makeStorageReference(new on(e,i.name));r.items.push(o)}return r}function a6(n,e,t){let r=dI(t);return r===null?null:s6(n,e,r)}var Zn=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Ar(n){if(!n)throw aI()}function dg(n,e){function t(r,i){let o=vR(n,i,e);return Ar(o!==null),o}return t}function c6(n,e){function t(r,i){let o=a6(n,e,i);return Ar(o!==null),o}return t}function u6(n,e){function t(r,i){let o=vR(n,i,e);return Ar(o!==null),o6(o,i,n.host,n._protocol)}return t}function ic(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=A$():i=T$():t.getStatus()===402?i=b$(n.bucket):t.getStatus()===403?i=S$(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function hg(n){let e=ic(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=C$(n.path)),o.serverResponse=i.serverResponse,o}return t}function _R(n,e,t){let r=e.fullServerUrl(),i=no(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Zn(i,o,dg(n,t),s);return a.errorHandler=hg(e),a}function l6(n,e,t,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),a=no(s,n.host,n._protocol),c="GET",l=n.maxOperationRetryTime,d=new Zn(a,c,c6(n,e.bucket),l);return d.urlParams=o,d.errorHandler=ic(e),d}function d6(n,e,t){let r=e.fullServerUrl(),i=no(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Zn(i,o,u6(n,t),s);return a.errorHandler=hg(e),a}function h6(n,e,t,r){let i=e.fullServerUrl(),o=no(i,n.host,n._protocol),s="PATCH",a=hI(t,r),c={"Content-Type":"application/json; charset=utf-8"},l=n.maxOperationRetryTime,d=new Zn(o,s,dg(n,r),l);return d.headers=c,d.body=a,d.errorHandler=hg(e),d}function f6(n,e){let t=e.fullServerUrl(),r=no(t,n.host,n._protocol),i="DELETE",o=n.maxOperationRetryTime;function s(c,l){}let a=new Zn(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=hg(e),a}function p6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function wR(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=p6(null,e)),r}function g6(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let N="";for(let j=0;j<2;j++)N=N+Math.random().toString().slice(2);return N}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let l=wR(e,r,i),d=hI(l,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+l.contentType+`\r
\r
`,g=`\r
--`+c+"--",y=tc.getBlob(f,r,g);if(y===null)throw dR();let I={name:l.fullPath},C=no(o,n.host,n._protocol),b="POST",U=n.maxUploadRetryTime,H=new Zn(C,b,dg(n,t),U);return H.urlParams=I,H.headers=s,H.body=y.uploadData(),H.errorHandler=ic(e),H}var nc=class{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}};function fI(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ar(!1)}return Ar(!!t&&(e||["active"]).indexOf(t)!==-1),t}function m6(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s=wR(e,r,i),a={name:s.fullPath},c=no(o,n.host,n._protocol),l="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},f=hI(s,t),g=n.maxUploadRetryTime;function y(C){fI(C);let b;try{b=C.getResponseHeader("X-Goog-Upload-URL")}catch{Ar(!1)}return Ar(ug(b)),b}let I=new Zn(c,l,y,g);return I.urlParams=a,I.headers=d,I.body=f,I.errorHandler=ic(e),I}function y6(n,e,t,r){let i={"X-Goog-Upload-Command":"query"};function o(l){let d=fI(l,["active","final"]),f=null;try{f=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ar(!1)}f||Ar(!1);let g=Number(f);return Ar(!isNaN(g)),new nc(g,r.size(),d==="final")}let s="POST",a=n.maxUploadRetryTime,c=new Zn(t,s,o,a);return c.headers=i,c.errorHandler=ic(e),c}var nR=256*1024;function v6(n,e,t,r,i,o,s,a){let c=new nc(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw R$();let l=c.total-c.current,d=l;i>0&&(d=Math.min(d,i));let f=c.current,g=f+d,y="";d===0?y="finalize":l===d?y="upload, finalize":y="upload";let I={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},C=r.slice(f,g);if(C===null)throw dR();function b(j,re){let Y=fI(j,["active","final"]),E=c.current+d,v=r.size(),_;return Y==="final"?_=dg(e,o)(j,re):_=null,new nc(E,v,Y==="final",_)}let U="POST",H=e.maxUploadRetryTime,N=new Zn(t,U,b,H);return N.headers=I,N.body=C.uploadData(),N.progressCallback=a||null,N.errorHandler=ic(n),N}var ER={STATE_CHANGED:"state_changed"},zt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eI(n){switch(n){case"running":case"pausing":case"canceling":return zt.RUNNING;case"paused":return zt.PAUSED;case"success":return zt.SUCCESS;case"canceled":return zt.CANCELED;case"error":return zt.ERROR;default:return zt.ERROR}}var iI=class{constructor(e,t,r){if(V$(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function Ja(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}var rR=null,oI=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ec.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ec.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ec.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw wl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},sI=class extends oI{initXhr(){this.xhr_.responseType="text"}};function Tr(){return rR?rR():new sI}var Dl=class{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(pR(i.status,[]))if(o)i=uR();else{this.sleepTime=Math.max(this.sleepTime*2,D$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{let r=m6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let i=y6(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Tr,t,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=nR*this._chunkMultiplier,t=new nc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=v6(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let a=this._ref.storage._makeRequest(s,Tr,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){nR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=_R(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Tr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=g6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Tr,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=lR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=eI(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){let o=new iI(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(eI(this._state)){case zt.SUCCESS:Ja(this._resolve.bind(null,this.snapshot))();break;case zt.CANCELED:case zt.ERROR:let t=this._reject;Ja(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eI(this._state)){case zt.RUNNING:case zt.PAUSED:e.next&&Ja(e.next.bind(e,this.snapshot))();break;case zt.SUCCESS:e.complete&&Ja(e.complete.bind(e))();break;case zt.CANCELED:case zt.ERROR:e.error&&Ja(e.error.bind(e,this._error))();break;default:e.error&&Ja(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var rc=class n{constructor(e,t){this._service=e,t instanceof on?this._location=t:this._location=on.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new on(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yR(this._location.path)}get storage(){return this._service}get parent(){let e=Z$(this._location.path);if(e===null)return null;let t=new on(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw cI(e)}};function _6(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Dl(n,new tc(e),t)}function w6(n){let e={prefixes:[],items:[]};return IR(n,e).then(()=>e)}function IR(n,e,t){return M(this,null,function*(){let i=yield DR(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield IR(n,e,i.nextPageToken))})}function DR(n,e){e!=null&&typeof e.maxResults=="number"&&nI("options.maxResults",1,1e3,e.maxResults);let t=e||{},r=l6(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Tr)}function E6(n){n._throwIfRoot("getMetadata");let e=_R(n.storage,n._location,lg());return n.storage.makeRequestWithTokens(e,Tr)}function I6(n,e){n._throwIfRoot("updateMetadata");let t=h6(n.storage,n._location,e,lg());return n.storage.makeRequestWithTokens(t,Tr)}function D6(n){n._throwIfRoot("getDownloadURL");let e=d6(n.storage,n._location,lg());return n.storage.makeRequestWithTokens(e,Tr).then(t=>{if(t===null)throw N$();return t})}function C6(n){n._throwIfRoot("deleteObject");let e=f6(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Tr)}function CR(n,e){let t=e6(n._location.path,e),r=new on(n._location.bucket,t);return new rc(n.storage,r)}function b6(n){return/^[A-Za-z]+:\/\//.test(n)}function T6(n,e){return new rc(n,e)}function bR(n,e){if(n instanceof Cl){let t=n;if(t._bucket==null)throw F$();let r=new rc(t,t._bucket);return e!=null?bR(r,e):r}else return e!==void 0?CR(n,e):n}function A6(n,e){if(e&&b6(e)){if(n instanceof Cl)return T6(n,e);throw cs("To use ref(service, url), the first argument must be a Storage instance.")}else return bR(n,e)}function iR(n,e){let t=e?.[cR];return t==null?null:on.makeFromBucketSpec(t,n)}function S6(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:ql(i,n.app.options.projectId))}var Cl=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=aR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=E$,this._maxUploadRetryTime=I$,this._requests=new Set,i!=null?this._bucket=on.makeFromBucketSpec(i,this._host):this._bucket=iR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=on.makeFromBucketSpec(this._url,e):this._bucket=iR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return M(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return M(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new tI(hR());{let s=H$(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return M(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},oR="@firebase/storage",sR="0.13.2";var M6="storage";function TR(n,e,t){return n=Te(n),_6(n,e,t)}function AR(n){return n=Te(n),E6(n)}function SR(n,e){return n=Te(n),I6(n,e)}function MR(n,e){return n=Te(n),DR(n,e)}function xR(n){return n=Te(n),w6(n)}function FR(n){return n=Te(n),D6(n)}function RR(n){return n=Te(n),C6(n)}function pI(n,e){return n=Te(n),A6(n,e)}function NR(n,e){return CR(n,e)}function PR(n,e,t,r={}){S6(n,e,t,r)}function x6(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Cl(t,r,i,e,Wl)}function F6(){ao(new Fn(M6,x6,"PUBLIC").setMultipleInstances(!0)),Rn(oR,sR,""),Rn(oR,sR,"esm2017")}F6();var oc=class{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var fg=class{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oc(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new oc(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(typeof t=="function"?o=s=>t(new oc(s,this,this._ref)):o={next:t.next?s=>t.next(new oc(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},pg=class{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new us(e,this._service))}get items(){return this._delegate.items.map(e=>new us(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var us=class n{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let t=NR(this._delegate,e);return new n(t,this.storage)}get root(){return new n(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new n(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new fg(TR(this._delegate,e,t),this)}putString(e,t=_n.RAW,r){this._throwIfRoot("putString");let i=lI(t,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new fg(new Dl(this._delegate,new tc(i.data,!0),o),this)}listAll(){return xR(this._delegate).then(e=>new pg(e,this.storage))}list(e){return MR(this._delegate,e||void 0).then(t=>new pg(t,this.storage))}getMetadata(){return AR(this._delegate)}updateMetadata(e){return SR(this._delegate,e)}getDownloadURL(){return FR(this._delegate)}delete(){return this._throwIfRoot("delete"),RR(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw cI(e)}};var gg=class{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UR(e))throw cs("ref() expected a child path but got a URL, use refFromURL instead.");return new us(pI(this._delegate,e),this)}refFromURL(e){if(!UR(e))throw cs("refFromURL() expected a full URL but got a child path, use ref() instead.");try{on.makeFromUrl(e,this._delegate.host)}catch{throw cs("refFromUrl() expected a valid full URL but got an invalid one.")}return new us(pI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){PR(this._delegate,e,t,r)}};function UR(n){return/^[A-Za-z]+:\/\//.test(n)}var R6="@firebase/storage-compat",N6="0.3.12";var P6="storage-compat";function U6(n,{instanceIdentifier:e}){let t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new gg(t,r)}function k6(n){let e={TaskState:zt,TaskEvent:ER,StringFormat:_n,Storage:gg,Reference:us};n.INTERNAL.registerComponent(new Fn(P6,U6,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(R6,N6)}k6(Vt);function O6(n){return new he(e=>{let t=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();t(n.snapshot);let o=n.on("state_changed",t);return n.then(s=>{t(s),i()},s=>{t(n.snapshot),r(s)}),function(){o()}}).pipe(hm(0))}function kR(n){let e=O6(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Z(t=>t.bytesTransferred/t.totalBytes*100))}}function mg(n){return{getDownloadURL:()=>ne(void 0).pipe(Iv,Ne(()=>n.getDownloadURL()),xt),getMetadata:()=>ne(void 0).pipe(Iv,Ne(()=>n.getMetadata()),xt),delete:()=>pe(n.delete()),child:e=>mg(n.child(e)),updateMetadata:e=>pe(n.updateMetadata(e)),put:(e,t)=>{let r=n.put(e,t);return kR(r)},putString:(e,t,r)=>{let i=n.putString(e,t,r);return kR(i)},list:e=>pe(n.list(e)),listAll:()=>pe(n.listAll())}}var V6=new q("angularfire2.storageBucket"),L6=new q("angularfire2.storage.maxUploadRetryTime"),B6=new q("angularfire2.storage.maxOperationRetryTime"),j6=new q("angularfire2.storage.use-emulator"),yg=(()=>{class n{storage;constructor(t,r,i,o,s,a,c,l,d,f){let g=Uo(t,s,r);this.storage=oa(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{let y=s.runOutsideAngular(()=>g.storage(i||void 0)),I=d;return I&&y.useEmulator(...I),c&&y.setMaxUploadRetryTime(c),l&&y.setMaxOperationRetryTime(l),y},[c,l])}ref(t){return mg(this.storage.ref(t))}refFromURL(t){return mg(this.storage.refFromURL(t))}upload(t,r,i){let o=this.storage.ref(t);return mg(o).put(r,i)}static \u0275fac=function(r){return new(r||n)(P(Ri),P(Ni,8),P(V6,8),P(bt),P(me),P(ia),P(L6,8),P(B6,8),P(j6,8),P(zr,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var VR=(()=>{class n{constructor(t,r,i){this.dataService=t,this.storage=r,this.router=i,this.newItem={id:"",name:"",weight:"",price:"",description:"",photo:""},this.selectedFile=null,this.isUploading=!1}ngOnInit(){}onFileSelected(t){this.selectedFile=t.target.files[0]}addItem(){if(!this.newItem.name||!this.newItem.weight||!this.newItem.price||!this.newItem.description||!this.selectedFile){alert("Please fill in all fields and select a file");return}this.isUploading=!0;let t=`uploads/${this.selectedFile.name}`,r=this.storage.ref(t);this.storage.upload(t,this.selectedFile).snapshotChanges().pipe(nr(()=>{r.getDownloadURL().subscribe(o=>{this.newItem.photo=o,this.saveItem()})})).subscribe()}saveItem(){return M(this,null,function*(){try{yield this.dataService.addItem(this.newItem),alert("Item added successfully"),this.clearForm(),this.isUploading=!1,this.router.navigate(["/catalog"])}catch(t){console.error("Error adding item: ",t),this.isUploading=!1}})}clearForm(){this.newItem={id:"",name:"",weight:"",price:"",description:"",photo:""},this.selectedFile=null}static{this.\u0275fac=function(r){return new(r||n)(X(Xa),X(yg),X(gt))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-create"]],decls:21,vars:4,consts:[[1,"create"],[3,"ngSubmit"],["for","name"],["type","text","id","name","name","name",3,"ngModelChange","ngModel"],["for","weight"],["type","text","id","weight","name","weight",3,"ngModelChange","ngModel"],["for","price"],["type","text","id","price","name","price",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description",3,"ngModelChange","ngModel"],["for","photo"],["type","file","id","photo","name","photo",3,"change"],["type","submit"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"form",1),it("ngSubmit",function(){return i.addItem()}),V(2,"h1"),J(3,"Create"),L(),V(4,"label",2),J(5,"Name:"),L(),V(6,"input",3),ft("ngModelChange",function(s){return It(i.newItem.name,s)||(i.newItem.name=s),s}),L(),V(7,"label",4),J(8,"Weight:"),L(),V(9,"input",5),ft("ngModelChange",function(s){return It(i.newItem.weight,s)||(i.newItem.weight=s),s}),L(),V(10,"label",6),J(11,"Price:"),L(),V(12,"input",7),ft("ngModelChange",function(s){return It(i.newItem.price,s)||(i.newItem.price=s),s}),L(),V(13,"label",8),J(14,"Description:"),L(),V(15,"textarea",9),ft("ngModelChange",function(s){return It(i.newItem.description,s)||(i.newItem.description=s),s}),L(),V(16,"label",10),J(17,"Photo:"),L(),V(18,"input",11),it("change",function(s){return i.onFileSelected(s)}),L(),V(19,"button",12),J(20,"Create Item"),L()()()),r&2&&(oe(6),ht("ngModel",i.newItem.name),oe(3),ht("ngModel",i.newItem.weight),oe(3),ht("ngModel",i.newItem.price),oe(3),ht("ngModel",i.newItem.description))},dependencies:[br,Dr,to,Cr,ni,Jn],styles:['@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHeLz7HZs.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Holtwood One SC;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/holtwoodonesc/v21/yYLx0hLR0P-3vMFSk1TCq3Txg5BHdrz7.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X60a2W7XS.woff2) format("woff2");unicode-range:U+0302-0303,U+0305,U+0307-0308,U+0310,U+0312,U+0315,U+031A,U+0326-0327,U+032C,U+032F-0330,U+0332-0333,U+0338,U+033A,U+0346,U+034D,U+0391-03A1,U+03A3-03A9,U+03B1-03C9,U+03D1,U+03D5-03D6,U+03F0-03F1,U+03F4-03F5,U+2016-2017,U+2034-2038,U+203C,U+2040,U+2043,U+2047,U+2050,U+2057,U+205F,U+2070-2071,U+2074-208E,U+2090-209C,U+20D0-20DC,U+20E1,U+20E5-20EF,U+2100-2112,U+2114-2115,U+2117-2121,U+2123-214F,U+2190,U+2192,U+2194-21AE,U+21B0-21E5,U+21F1-21F2,U+21F4-2211,U+2213-2214,U+2216-22FF,U+2308-230B,U+2310,U+2319,U+231C-2321,U+2336-237A,U+237C,U+2395,U+239B-23B7,U+23D0,U+23DC-23E1,U+2474-2475,U+25AF,U+25B3,U+25B7,U+25BD,U+25C1,U+25CA,U+25CC,U+25FB,U+266D-266F,U+27C0-27FF,U+2900-2AFF,U+2B0E-2B11,U+2B30-2B4C,U+2BFE,U+3030,U+FF5B,U+FF5D,U+1D400-1D7FF,U+1EE00-1EEFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X61S2W7XS.woff2) format("woff2");unicode-range:U+0001-000C,U+000E-001F,U+007F-009F,U+20DD-20E0,U+20E2-20E4,U+2150-218F,U+2190,U+2192,U+2194-2199,U+21AF,U+21E6-21F0,U+21F3,U+2218-2219,U+2299,U+22C4-22C6,U+2300-243F,U+2440-244A,U+2460-24FF,U+25A0-27BF,U+2800-28FF,U+2921-2922,U+2981,U+29BF,U+29EB,U+2B00-2BFF,U+4DC0-4DFF,U+FFF9-FFFB,U+10140-1018E,U+10190-1019C,U+101A0,U+101D0-101FD,U+102E0-102FB,U+10E60-10E7E,U+1D2C0-1D2D3,U+1D2E0-1D37F,U+1F000-1F0FF,U+1F100-1F1AD,U+1F1E6-1F1FF,U+1F30D-1F30F,U+1F315,U+1F31C,U+1F31E,U+1F320-1F32C,U+1F336,U+1F378,U+1F37D,U+1F382,U+1F393-1F39F,U+1F3A7-1F3A8,U+1F3AC-1F3AF,U+1F3C2,U+1F3C4-1F3C6,U+1F3CA-1F3CE,U+1F3D4-1F3E0,U+1F3ED,U+1F3F1-1F3F3,U+1F3F5-1F3F7,U+1F408,U+1F415,U+1F41F,U+1F426,U+1F43F,U+1F441-1F442,U+1F444,U+1F446-1F449,U+1F44C-1F44E,U+1F453,U+1F46A,U+1F47D,U+1F4A3,U+1F4B0,U+1F4B3,U+1F4B9,U+1F4BB,U+1F4BF,U+1F4C8-1F4CB,U+1F4D6,U+1F4DA,U+1F4DF,U+1F4E3-1F4E6,U+1F4EA-1F4ED,U+1F4F7,U+1F4F9-1F4FB,U+1F4FD-1F4FE,U+1F503,U+1F507-1F50B,U+1F50D,U+1F512-1F513,U+1F53E-1F54A,U+1F54F-1F5FA,U+1F610,U+1F650-1F67F,U+1F687,U+1F68D,U+1F691,U+1F694,U+1F698,U+1F6AD,U+1F6B2,U+1F6B9-1F6BA,U+1F6BC,U+1F6C6-1F6CF,U+1F6D3-1F6D7,U+1F6E0-1F6EA,U+1F6F0-1F6F3,U+1F6F7-1F6FC,U+1F700-1F7FF,U+1F800-1F80B,U+1F810-1F847,U+1F850-1F859,U+1F860-1F887,U+1F890-1F8AD,U+1F8B0-1F8BB,U+1F8C0-1F8C1,U+1F900-1F90B,U+1F93B,U+1F946,U+1F984,U+1F996,U+1F9E9,U+1FA00-1FA6F,U+1FA70-1FA7C,U+1FA80-1FA89,U+1FA8F-1FAC6,U+1FACE-1FADC,U+1FADF-1FAE9,U+1FAF0-1FAF8,U+1FB00-1FBFF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zW2W7XS.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zS2W7XS.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Honk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/honk/v1/m8JdjftUea-X6zq2Ww.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtD6GjLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthQOCfzsw.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthfOCfzsw.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9dr0Wd4kDdMthROCc.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLNkiQ4tg.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLCkiQ4tg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Kalam;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/kalam/v17/YA9Qr0Wd4kDdMtDqHTLMkiQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufA5qW54A.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufJ5qW54A.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufB5qW54A.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufO5qW54A.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufC5qW54A.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufD5qW54A.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto Slab;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoslab/v34/BngMUXZYTXPIvIBgJJSb6ufN5qU.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{--google-font-color-honk:none}form[_ngcontent-%COMP%]{max-width:400px;padding:15px 60px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9c6;margin-top:30px;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.create[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2Fphoto1712309337.jpeg?alt=media&token=07b911e2-425c-4df1-8f04-901f21995f6d);background-size:cover;background-position:center;background-repeat:no-repeat}']})}}return n})();function $6(n,e){if(n&1){let t=Ah();V(0,"div")(1,"button",7),it("click",function(){zc(t);let i=fn(2);return Gc(i.editItem())}),J(2,"Edit"),L(),V(3,"button",7),it("click",function(){zc(t);let i=fn(2);return Gc(i.deleteItem())}),J(4,"Delete"),L()()}}function q6(n,e){if(n&1&&(V(0,"div",1)(1,"div",2),qn(2,"img",3),V(3,"div",4)(4,"h2"),J(5),L(),V(6,"div",5)(7,"p"),J(8),L(),V(9,"p"),J(10),L(),V(11,"p"),J(12),L()(),hn(13,$6,5,0,"div",6),L()()()),n&2){let t=fn();oe(2),Sh("alt","",t.item.name," Photo"),Ze("src",t.item.photo,Qc),oe(3),Mo(t.item.name),oe(3),Zt("Weight: ",t.item.weight,"kg"),oe(2),Zt("Price: $",t.item.price,""),oe(2),Zt("Description: ",t.item.description,""),oe(),Ze("ngIf",t.isAdminUser())}}var LR=(()=>{class n{constructor(t,r,i,o){this.route=t,this.dataService=r,this.router=i,this.authService=o,this.isOwner=!1,this.itemBought=!1,this.currentUser="";let s=this.authService.getCurrentUser();this.currentUser=s!==null?s:""}ngOnInit(){this.getItemDetails()}getItemDetails(){this.itemId=this.route.snapshot.paramMap.get("id"),this.itemId&&this.dataService.getItemById(this.itemId).subscribe(t=>{this.item=t,console.log("Retrieved item:",this.item)})}isAdminUser(){return this.currentUser==="admin@admin.com"}editItem(){this.item?this.router.navigate(["/edit",this.item.id],{state:{item:this.item}}):console.error("Item data is not available")}deleteItem(){this.itemId?confirm("Are you sure you want to delete this item?")&&this.dataService.deleteItem(this.itemId).then(()=>{console.log("Item deleted successfully"),this.router.navigate(["/catalog"])}).catch(t=>{console.error("Error deleting item:",t)}):console.error("Item ID is not provided")}static{this.\u0275fac=function(r){return new(r||n)(X(zn),X(Xa),X(gt),X(eo))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-details"]],decls:1,vars:1,consts:[["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"item-card"],[3,"src","alt"],[1,"item-details"],[1,"det"],[4,"ngIf"],[3,"click"]],template:function(r,i){r&1&&hn(0,q6,14,8,"div",0),r&2&&Ze("ngIf",i.item)},dependencies:[Di],styles:[".item-card[_ngcontent-%COMP%]{padding:80px 250px;gap:60px;border-radius:20px;box-sizing:border-box;background:#12121191;box-shadow:14px 14px 30px #464a4e,-14px -14px 30px #464a4e;display:flex;justify-content:space-around;align-items:center}.item-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:423px;height:423px;border-radius:12px;margin-left:-200px}.item-details[_ngcontent-%COMP%]{color:#fff;margin-top:-120px;padding:20px}.item-details[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.item-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}.item-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-top:27px}.item-bought-message[_ngcontent-%COMP%]{color:red}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;background-image:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2FDALL%C2%B7E_2024_04_05_12_08_22_Create_a_realistic_image_with_the_center.png?alt=media&token=738c2e0a-4456-42ac-b3e7-3f10a643a2ff);background-size:cover;background-position:center;background-repeat:no-repeat}.det[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start;flex-direction:column;width:20vw}"]})}}return n})();var BR=(()=>{class n{isLoggedIn(){return!!localStorage.getItem("token")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gI=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(){return this.authService.isLoggedIn()?(this.router.navigate(["/private"]),!1):!0}static{this.\u0275fac=function(r){return new(r||n)(P(BR),P(gt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z6(n,e){if(n&1&&(V(0,"div",14),J(1),L()),n&2){let t=fn();oe(),Mo(t.errorMessage)}}var jR=(()=>{class n{constructor(t,r,i,o){this.dataService=t,this.router=r,this.route=i,this.storage=o,this.item={id:"",name:"",weight:"",price:"",description:"",photo:""},this.errorMessage=""}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.dataService.getItemById(t).subscribe(r=>{r?this.item=r:this.errorMessage="Item not found"},r=>{console.error("Error retrieving item:",r),this.errorMessage="Error retrieving item"}):this.errorMessage="Item ID is not provided"}save(){this.item&&this.item.id?this.selectedFile?this.uploadImage(this.selectedFile).then(t=>(this.item.photo=t,this.dataService.updateItem(this.item))).then(()=>{this.router.navigate(["/details",this.item.id])}).catch(t=>{console.error("Error updating item:",t),this.errorMessage="Error updating item"}):this.dataService.updateItem(this.item).then(()=>{this.router.navigate(["/details",this.item.id])}).catch(t=>{console.error("Error updating item:",t),this.errorMessage="Error updating item"}):this.errorMessage="No item to save"}onFileSelected(t){let r=t.target;r.files&&r.files.length>0&&(this.selectedFile=r.files[0])}uploadImage(t){return M(this,null,function*(){let r=`images/${t.name}`,i=this.storage.ref(r);return yield this.storage.upload(r,t).snapshotChanges().toPromise(),i.getDownloadURL().toPromise()})}static{this.\u0275fac=function(r){return new(r||n)(X(Xa),X(gt),X(zn),X(yg))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-edit"]],decls:27,vars:5,consts:[[1,"edit"],[1,"edit-form",3,"ngSubmit"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","weight"],["type","text","id","weight","name","weight","required","",3,"ngModelChange","ngModel"],["for","price"],["type","text","id","price","name","price","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","required","",3,"ngModelChange","ngModel"],["for","photo"],["type","file","id","photo","name","photo","accept","image/*",3,"change"],["class","error-message",4,"ngIf"],["type","submit"],[1,"error-message"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"form",1),it("ngSubmit",function(){return i.save()}),V(2,"h1"),J(3,"Edit"),L(),V(4,"div")(5,"label",2),J(6,"Name:"),L(),V(7,"input",3),ft("ngModelChange",function(s){return It(i.item.name,s)||(i.item.name=s),s}),L()(),V(8,"div")(9,"label",4),J(10,"Weight:"),L(),V(11,"input",5),ft("ngModelChange",function(s){return It(i.item.weight,s)||(i.item.weight=s),s}),L()(),V(12,"div")(13,"label",6),J(14,"Price:"),L(),V(15,"input",7),ft("ngModelChange",function(s){return It(i.item.price,s)||(i.item.price=s),s}),L()(),V(16,"div")(17,"label",8),J(18,"Description:"),L(),V(19,"textarea",9),ft("ngModelChange",function(s){return It(i.item.description,s)||(i.item.description=s),s}),L()(),V(20,"div")(21,"label",10),J(22,"Photo:"),L(),V(23,"input",11),it("change",function(s){return i.onFileSelected(s)}),L()(),hn(24,z6,2,1,"div",12),V(25,"button",13),J(26,"Save"),L()()()),r&2&&(oe(7),ht("ngModel",i.item.name),oe(4),ht("ngModel",i.item.weight),oe(4),ht("ngModel",i.item.price),oe(4),ht("ngModel",i.item.description),oe(5),Ze("ngIf",i.errorMessage))},dependencies:[Di,br,Dr,to,Cr,XE,ni,Jn],styles:[".edit-form[_ngcontent-%COMP%]{padding:10px 23px;border:1px solid #ccc;border-radius:20px;background-color:#f9f9f9d3;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:520px;box-shadow:6px 6px 20px #464a4e62,-6px -6px 20px #464a4e62}.edit-form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:10px}.edit-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;text-align:left}.edit-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .edit-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:350px;padding:8px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.edit-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:110px}.edit-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.edit-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.edit-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.edit[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background-image:url(https://images.pexels.com/photos/669582/pexels-photo-669582.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1);background-size:cover;background-position:center;background-repeat:no-repeat}"]})}}return n})();var $R=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["app-not-found"]],decls:6,vars:0,consts:[[1,"text"],[1,"error-container"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"h1"),J(3,"404 Not Found"),L(),V(4,"p"),J(5,"The page you are looking for does not exist."),L()()())},styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;height:100vh;display:flex;justify-content:center;align-items:center;background-color:#f5f5f5}.error-container[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:10px;color:#333}p[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.text[_ngcontent-%COMP%]{padding-top:230px;display:flex;justify-content:center;align-items:center;flex-direction:column}"]})}}return n})();function G6(n,e){if(n&1&&(V(0,"p"),J(1),L()),n&2){let t=fn(2);oe(),Zt("Name: ",t.user.name,"")}}function W6(n,e){if(n&1&&(V(0,"p"),J(1),Mh(2,"date"),L()),n&2){let t=fn(2);oe(),Zt("Birthday: ",BT(2,1,t.user.birth,"dd.MM.yyyy"),"")}}function K6(n,e){if(n&1&&(V(0,"div",3)(1,"h1"),J(2,"Profile"),L(),V(3,"p"),J(4),L(),hn(5,G6,2,1,"p",4)(6,W6,3,4,"p",4),L()),n&2){let t=fn();oe(4),Zt("Email: ",t.user.email,""),oe(),Ze("ngIf",t.user.name),oe(),Ze("ngIf",t.user.birth)}}var qR=(()=>{class n{constructor(t){this.authService=t,this.user=null}ngOnInit(){console.log("Fetching user info"),this.authService.getUserInfo().subscribe(t=>{this.user=t,console.log("User info:",this.user)},t=>{console.error("Error fetching user info:",t)})}static{this.\u0275fac=function(r){return new(r||n)(X(eo))}}static{this.\u0275cmp=qe({type:n,selectors:[["app-profile"]],decls:4,vars:1,consts:[["id","profile-page"],[1,"profileForm"],["id","profile",4,"ngIf"],["id","profile"],[4,"ngIf"]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1)(2,"form"),hn(3,K6,7,3,"div",2),L()()()),r&2&&(oe(3),Ze("ngIf",i.user))},dependencies:[Di,br,Cr,Jn,pA],styles:["form[_ngcontent-%COMP%]{max-width:500px;border:1px solid #ccc;padding:0 70px;border-radius:20px;background-color:#f9f9f9cd;font-family:Roboto Slab,serif;font-style:normal;display:flex;flex-direction:column;align-items:center;height:360px;box-shadow:6px 6px 20px #c3d8ed62,-6px -6px 20px #cad7e562}p[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-top:30px}form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:40px}#profile-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;background:url(https://firebasestorage.googleapis.com/v0/b/angular-softuni-project-21b88.appspot.com/o/uploads%2Fprof.jpg?alt=media&token=ae383716-bbdf-47df-9c8e-2ef1042b584d);background-size:cover;background-position:center;background-repeat:no-repeat}#profile[_ngcontent-%COMP%]{margin-top:85px}"]})}}return n})();var Q6=[{path:"",component:G1},{path:"catalog",component:JF},{path:"create",component:VR},{path:"register",component:XF,canActivate:[gI]},{path:"login",component:YF,canActivate:[gI]},{path:"details/:id",component:LR},{path:"edit/:id",component:jR},{path:"profile",component:qR},{path:"**",component:$R}],HR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n})}static{this.\u0275inj=Xe({imports:[Tu.forRoot(Q6),Tu]})}}return n})();var zR={production:!1,firebase:{apiKey:"AIzaSyB0BLEPahUCpf0FIfejuqJV37x238pZ4Xk",authDomain:"angular-softuni-project-21b88.firebaseapp.com",projectId:"angular-softuni-project-21b88",storageBucket:"angular-softuni-project-21b88.appspot.com",messagingSenderId:"147986316750",appId:"1:147986316750:web:f71e429729a9d8fee07f9f",measurementId:"G-S07HMHV82K"}};var GR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Je({type:n,bootstrap:[z1]})}static{this.\u0275inj=Xe({imports:[kA,HR,Tu,q1.initializeApp(zR.firebase),KF,QF,AA]})}}return n})();UA().bootstrapModule(GR).catch(n=>console.error(n));
